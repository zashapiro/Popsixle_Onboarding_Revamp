<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Popsixle - Get Started</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/components.css">
  <style>
    /* ============================================
       PRICING SCREEN - Clean Elevar-inspired Style
       ============================================ */
    .pricing-screen {
      min-height: 100vh;
      background: #FAFBFC;
    }

    .pricing-nav {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: var(--space-4) var(--space-6);
      background: white;
      border-bottom: 1px solid var(--color-border);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .pricing-logo {
      height: 32px;
    }

    .pricing-main {
      max-width: 1100px;
      margin: 0 auto;
      padding: var(--space-10) var(--space-6);
    }

    .pricing-layout {
      display: grid;
      grid-template-columns: 1fr 1.4fr;
      gap: var(--space-6);
      align-items: stretch;
    }

    .pricing-left {
      display: flex;
      flex-direction: column;
    }

    .pricing-header {
      margin-bottom: var(--space-6);
    }

    .pricing-header h1 {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-semibold);
      color: var(--color-text-primary);
      margin: 0 0 var(--space-2);
    }

    .pricing-header p {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
      margin: 0;
    }

    .pricing-header p strong {
      color: var(--color-primary);
    }

    .pricing-card {
      background: white;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .pricing-plan-name {
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-medium);
      color: var(--color-text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: var(--space-2);
    }

    .pricing-amount {
      display: flex;
      align-items: baseline;
      gap: var(--space-1);
      margin-bottom: var(--space-4);
    }

    .pricing-amount-value {
      font-size: 36px;
      font-weight: var(--font-weight-bold);
      color: var(--color-text-primary);
    }

    .pricing-amount-period {
      font-size: var(--font-size-base);
      color: var(--color-text-secondary);
    }

    .pricing-features {
      list-style: none;
      padding: 0;
      margin: 0 0 var(--space-6);
      flex: 1;
    }

    .pricing-feature {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-2) 0;
      font-size: var(--font-size-sm);
      color: var(--color-text-primary);
    }

    .pricing-feature-icon {
      color: var(--color-success);
      font-size: 14px;
      flex-shrink: 0;
    }

    .pricing-feature-plus {
      color: var(--color-text-muted);
      font-size: 14px;
      flex-shrink: 0;
    }

    .pricing-feature .tooltip {
      margin-left: var(--space-1);
      color: var(--color-text-muted);
      cursor: help;
    }

    .pricing-cta {
      width: 100%;
      padding: var(--space-3) var(--space-4);
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-medium);
      background: #A855F7;
      border: none;
      border-radius: var(--radius-md);
      color: white;
      cursor: pointer;
      transition: background var(--transition-fast);
    }

    .pricing-cta:hover {
      background: #9333EA;
    }

    .pricing-details-section {
      margin-top: var(--space-6);
      text-align: center;
    }

    .pricing-details-link {
      display: inline-flex;
      align-items: center;
      gap: var(--space-1);
      font-size: var(--font-size-sm);
      color: var(--color-primary);
      cursor: pointer;
    }

    .pricing-details-link:hover {
      text-decoration: underline;
    }

    .pricing-details-icon {
      font-size: 10px;
      transition: transform var(--transition-fast);
    }

    .pricing-details.open .pricing-details-icon {
      transform: rotate(180deg);
    }

    .pricing-details-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height var(--transition-normal);
    }

    .pricing-details.open .pricing-details-content {
      max-height: 400px;
    }

    .pricing-details-body {
      text-align: left;
      padding: var(--space-4);
      margin-top: var(--space-4);
      background: #F9FAFB;
      border-radius: var(--radius-md);
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
    }

    .pricing-details-body p {
      margin: 0 0 var(--space-2);
    }

    .pricing-details-body ul {
      margin: var(--space-2) 0;
      padding-left: var(--space-5);
    }

    .pricing-details-body li {
      margin-bottom: var(--space-2);
    }

    /* Right Column - Two Stacked Cards */
    .pricing-right {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    .pricing-trust {
      background: white;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .pricing-trust-label {
      font-size: var(--font-size-xs);
      font-weight: var(--font-weight-medium);
      color: var(--color-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: var(--space-4);
    }

    .pricing-trust-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .pricing-trust-item {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-3) 0;
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-medium);
      color: var(--color-text-primary);
    }

    .pricing-trust-icon {
      color: var(--color-success);
      font-size: 16px;
      flex-shrink: 0;
      font-weight: bold;
    }

    .pricing-quote {
      background: white;
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .pricing-quote-text {
      font-size: var(--font-size-base);
      color: var(--color-text-primary);
      font-style: italic;
      line-height: 1.7;
      margin: 0 0 var(--space-4);
    }

    .pricing-quote-author {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
      font-weight: var(--font-weight-semibold);
      margin: 0;
    }

    /* ============================================
       WIZARD SCREEN STYLES
       ============================================ */
    .wizard-screen {
      display: none;
      min-height: 100vh;
      background: #FAFBFC;
    }

    .wizard-screen.active {
      display: flex;
    }

    /* ============================================
       OUTER SIDEBAR (Elevar-style App Navigation)
       ============================================ */
    .wizard-app-layout {
      display: flex;
      min-height: 100vh;
      width: 100%;
    }

    .outer-sidebar {
      width: 240px;
      background: #FFFFFF;
      border-right: 1px solid #E2E8F0;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      position: sticky;
      top: 0;
      height: 100vh;
      overflow-y: auto;
    }

    .outer-sidebar-header {
      padding: 20px 16px;
      border-bottom: 1px solid #E2E8F0;
    }

    .outer-sidebar-store {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .outer-sidebar-store-icon {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .outer-sidebar-store-icon img {
      width: 36px;
      height: 36px;
      object-fit: contain;
    }

    .outer-sidebar-store-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .outer-sidebar-store-label {
      font-size: 11px;
      color: #94A3B8;
    }

    .outer-sidebar-store-name {
      font-size: 15px;
      font-weight: 600;
      color: #1E293B;
    }

    /* Main Navigation */
    .outer-sidebar-nav {
      padding: 16px 12px;
      border-bottom: 1px solid #E2E8F0;
    }

    .outer-sidebar-nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 500;
      color: #64748B;
      text-decoration: none;
      transition: all 0.15s ease;
    }

    .outer-sidebar-nav-item:hover {
      background: #F8FAFC;
      color: #1E293B;
      text-decoration: none;
    }

    .outer-sidebar-nav-item.active {
      background: #FAF5FF;
      color: #A855F7;
    }

    .outer-sidebar-nav-item svg {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }

    /* Setup Assistance Section */
    .outer-sidebar-section {
      padding: 16px 12px;
      flex: 1;
    }

    .outer-sidebar-section-label {
      font-size: 12px;
      font-weight: 600;
      color: #94A3B8;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .outer-sidebar-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      color: #64748B;
      text-decoration: none;
      transition: all 0.15s ease;
    }

    .outer-sidebar-link:hover {
      background: #F8FAFC;
      color: #1E293B;
      text-decoration: none;
    }

    .outer-sidebar-link svg {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
      color: #94A3B8;
    }

    .outer-sidebar-link img {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      object-fit: cover;
    }

    /* Skip to Dashboard Section */
    .outer-sidebar-skip-section {
      padding: 16px 12px;
      border-top: 1px solid #E2E8F0;
      margin-top: auto;
    }

    .outer-sidebar-skip-btn {
      display: block;
      text-align: center;
      padding: 10px 16px;
      font-size: 14px;
      font-weight: 500;
      color: #64748B;
      text-decoration: none;
      border: 1px solid #E2E8F0;
      border-radius: 8px;
      transition: all 0.15s ease;
    }

    .outer-sidebar-skip-btn:hover {
      background: #F8FAFC;
      border-color: #CBD5E1;
      color: #475569;
      text-decoration: none;
    }

    /* Skip Popup/Modal */
    .skip-popup-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .skip-popup-overlay.active {
      display: flex;
    }

    .skip-popup {
      background: white;
      border-radius: 16px;
      padding: 32px;
      max-width: 420px;
      width: 90%;
      position: relative;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }

    .skip-popup-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      font-size: 24px;
      color: #94A3B8;
      cursor: pointer;
      line-height: 1;
    }

    .skip-popup-close:hover {
      color: #64748B;
    }

    .skip-popup-icon {
      font-size: 48px;
      text-align: center;
      margin-bottom: 16px;
    }

    .skip-popup-title {
      font-size: 20px;
      font-weight: 600;
      color: #1E293B;
      text-align: center;
      margin: 0 0 8px;
    }

    .skip-popup-message {
      font-size: 15px;
      color: #64748B;
      text-align: center;
      margin: 0 0 24px;
      line-height: 1.5;
    }

    .skip-popup-help {
      background: #F8FAFC;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
    }

    .skip-popup-help-label {
      font-size: 12px;
      font-weight: 600;
      color: #A855F7;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }

    .skip-popup-help-link {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 12px 14px;
      margin-bottom: 8px;
      font-size: 15px;
      font-weight: 500;
      color: #1E293B;
      text-decoration: none;
      background: #FFFFFF;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
      transition: all 0.15s ease;
    }

    .skip-popup-help-link:last-child {
      margin-bottom: 0;
    }

    .skip-popup-help-link:hover {
      border-color: #A855F7;
      background: #FAF5FF;
    }

    .skip-popup-help-icon {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .skip-popup-help-icon img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      object-fit: cover;
    }

    .skip-popup-help-icon svg {
      width: 24px;
      height: 24px;
      color: #A855F7;
    }

    .skip-popup-help-text {
      flex: 1;
    }

    .skip-popup-actions {
      display: flex;
      gap: 12px;
    }

    .skip-popup-btn-secondary {
      flex: 1;
      padding: 12px 20px;
      font-size: 15px;
      font-weight: 500;
      color: #64748B;
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s ease;
      text-decoration: none;
      text-align: center;
    }

    .skip-popup-btn-secondary:hover {
      background: #F8FAFC;
      border-color: #CBD5E1;
      text-decoration: none;
    }

    .skip-popup-btn-primary {
      flex: 1;
      padding: 12px 20px;
      font-size: 15px;
      font-weight: 500;
      color: white;
      background: #A855F7;
      border: 1px solid #A855F7;
      border-radius: 8px;
      text-decoration: none;
      text-align: center;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .skip-popup-btn-primary:hover {
      background: #9333EA;
      border-color: #9333EA;
    }

    /* User Footer */
    .outer-sidebar-footer {
      padding: 16px 12px;
      border-top: 1px solid #E2E8F0;
    }

    .outer-sidebar-user {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.15s ease;
    }

    .outer-sidebar-user:hover {
      background: #F8FAFC;
    }

    .outer-sidebar-user-avatar {
      width: 32px;
      height: 32px;
      background: #E2E8F0;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #64748B;
    }

    .outer-sidebar-user-avatar svg {
      width: 18px;
      height: 18px;
    }

    .outer-sidebar-user-name {
      font-size: 14px;
      font-weight: 500;
      color: #1E293B;
    }

    /* ============================================
       INNER LAYOUT (Setup Steps + Main + Explanation)
       ============================================ */
    .wizard-inner-layout {
      display: grid;
      grid-template-columns: 280px 1fr;
      flex: 1;
      min-height: 100vh;
      background: #FAFBFC;
    }

    /* Content Area (Main + Explanation side by side) */
    .wizard-content-area {
      display: flex;
      gap: 24px;
      padding: 24px;
      align-items: flex-start;
      overflow-x: hidden;
    }

    /* Explanation Panel (White card next to wizard) */
    .explanation-panel {
      background: #FFFFFF;
      border: 1px solid #E2E8F0;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      flex: 1;
      min-height: 0;
      overflow-y: auto;
    }

    .explanation-content {
      display: none;
    }

    .explanation-content.active {
      display: block;
    }

    .explanation-header {
      margin-bottom: 20px;
    }

    .explanation-label {
      font-size: 12px;
      font-weight: 600;
      color: #A855F7;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .explanation-title {
      font-size: 20px;
      font-weight: 600;
      color: #1E293B;
      margin: 0;
    }

    .explanation-body {
      font-size: 15px;
      color: #64748B;
      line-height: 1.6;
      margin-bottom: 24px;
    }

    .explanation-body p {
      margin: 0 0 12px;
    }

    .explanation-section {
      margin-bottom: 24px;
    }

    .explanation-section-title {
      font-size: 14px;
      font-weight: 600;
      color: #1E293B;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .explanation-section-title svg {
      width: 18px;
      height: 18px;
      color: #A855F7;
    }

    .faq-item {
      margin-bottom: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid #F1F5F9;
    }

    .faq-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .faq-question {
      font-size: 14px;
      font-weight: 600;
      color: #1E293B;
      margin-bottom: 6px;
    }

    .faq-answer {
      font-size: 14px;
      color: #64748B;
      line-height: 1.5;
    }

    /* Explanation Wrapper (stacks explanation + assistance) */
    .explanation-wrapper {
      display: flex;
      flex-direction: column;
      gap: 16px;
      width: 340px;
      min-width: 340px;
      flex-shrink: 0;
      position: sticky;
      top: 24px;
      max-height: calc(100vh - 48px);
    }

    /* Setup Assistance Card */
    .assistance-card {
      background: #FFFFFF;
      border: 1px solid #E2E8F0;
      border-radius: 12px;
      padding: 16px 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      flex-shrink: 0;
    }

    .assistance-card-label {
      font-size: 12px;
      font-weight: 600;
      color: #A855F7;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }

    .assistance-card-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      margin-bottom: 6px;
      font-size: 15px;
      font-weight: 500;
      color: #1E293B;
      text-decoration: none;
      background: #F8FAFC;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
      transition: all 0.15s ease;
    }

    .assistance-card-link:last-child {
      margin-bottom: 0;
    }

    .assistance-card-link:hover {
      border-color: #A855F7;
      background: #FAF5FF;
      text-decoration: none;
    }

    .assistance-card-link img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      object-fit: cover;
    }

    .assistance-card-link svg {
      width: 24px;
      height: 24px;
      color: #A855F7;
    }

    /* Setup Steps Panel */
    .setup-steps-panel {
      background: #F8FAFC;
      border-right: 1px solid #E2E8F0;
      display: flex;
      flex-direction: column;
      position: sticky;
      top: 0;
      height: 100vh;
      overflow-y: auto;
    }

    .setup-steps-header {
      padding: 16px 20px 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .wizard-main-header {
      display: flex;
      justify-content: flex-end;
      padding: 12px 0 0 0;
    }

    .setup-steps-title {
      font-size: 17px;
      font-weight: 600;
      color: #1E293B;
    }

    .setup-steps-progress {
      font-size: 13px;
      font-weight: 500;
      color: #64748B;
    }

    .setup-steps-list {
      flex: 1;
      padding: 0 20px;
      overflow-y: auto;
    }

    .setup-steps-footer {
      padding: 12px 20px;
      border-top: 1px solid #E2E8F0;
      background: white;
    }

    .setup-steps-footer-link {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: #A855F7;
      text-decoration: none;
      font-weight: 500;
    }

    .setup-steps-footer-link:hover {
      text-decoration: underline;
    }

    .setup-steps-footer-avatars {
      display: flex;
      margin-right: 4px;
    }

    .setup-steps-footer-avatars img {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 2px solid white;
      object-fit: cover;
    }

    /* Wizard Navigation (Modern B2B) */
    .wizard-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      background: white;
      border-bottom: 1px solid #E2E8F0;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .wizard-nav-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .wizard-logo {
      height: 32px;
    }

    .wizard-nav-progress {
      display: flex;
      align-items: center;
      gap: 12px;
      padding-left: 20px;
      border-left: 1px solid #E2E8F0;
    }

    .wizard-step-counter {
      font-size: 13px;
      color: #64748B;
      font-weight: 500;
    }

    .wizard-progress-bar {
      width: 120px;
      height: 4px;
      background: #E2E8F0;
      border-radius: 2px;
      overflow: hidden;
    }

    .wizard-progress-fill {
      height: 100%;
      background: #A855F7;
      border-radius: 2px;
      transition: width 0.3s ease;
    }

    .wizard-nav-right a {
      font-size: 13px;
      color: #64748B;
      text-decoration: none;
      font-weight: 500;
    }

    .wizard-nav-right a:hover {
      color: #1E293B;
    }

    /* Wizard Layout */
    .wizard-layout {
      display: grid;
      grid-template-columns: 300px 1fr;
      min-height: calc(100vh - 65px);
      position: relative;
    }

    /* Wizard Sidebar (Modern B2B) */
    .wizard-sidebar {
      background: #F8FAFC;
      border-right: 1px solid #E2E8F0;
      padding: 24px;
      display: flex;
      flex-direction: column;
    }

    .wizard-steps {
      flex: 1;
    }

    .wizard-step-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .wizard-step-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 10px 0;
      position: relative;
    }

    .wizard-step-item:not(:last-child)::after {
      content: '';
      position: absolute;
      left: 13px;
      top: 36px;
      bottom: -10px;
      width: 2px;
      background: #E2E8F0;
      z-index: 0;
    }

    .wizard-step-item.completed:not(:last-child)::after {
      background: #A855F7;
    }

    .wizard-step-number {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 500;
      flex-shrink: 0;
      background: white;
      border: 2px solid #E2E8F0;
      color: #94A3B8;
      position: relative;
      z-index: 1;
    }

    .wizard-step-item.active .wizard-step-number {
      background: #A855F7;
      border-color: #A855F7;
      color: white;
    }

    .wizard-step-item.completed .wizard-step-number {
      background: #A855F7;
      border-color: #A855F7;
      color: white;
    }

    .wizard-step-content {
      flex: 1;
      padding-top: 2px;
    }

    .wizard-step-title {
      font-size: 15px;
      font-weight: 500;
      color: #94A3B8;
    }

    .wizard-step-item.active .wizard-step-title {
      color: #1E293B;
    }

    .wizard-step-item.completed .wizard-step-title {
      color: #1E293B;
    }

    /* Help Panel - Floating Persistent Card */
    .wizard-help-panel {
      position: fixed;
      right: 24px;
      top: 89px;
      width: 320px;
      z-index: 50;
    }

    .wizard-help-card {
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.04), 0 10px 24px rgba(0,0,0,0.08);
    }

    .wizard-help-header {
      margin-bottom: 16px;
    }

    .wizard-help-title {
      font-size: 16px;
      font-weight: 600;
      color: #1E293B;
    }

    .wizard-help-description {
      font-size: 14px;
      color: #64748B;
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .wizard-help-actions {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .wizard-help-btn {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 16px;
      background: #F8FAFC;
      border: 1px solid #E2E8F0;
      border-radius: 12px;
      text-decoration: none;
      transition: all 0.15s ease;
    }

    .wizard-help-btn:hover {
      background: white;
      border-color: #CBD5E1;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transform: translateY(-1px);
    }

    .wizard-help-btn-icon {
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
      flex-shrink: 0;
    }

    .wizard-help-btn-icon svg {
      width: 22px;
      height: 22px;
      color: #A855F7;
    }

    .wizard-help-btn-content {
      flex: 1;
      text-align: left;
    }

    .wizard-help-btn-title {
      font-size: 15px;
      font-weight: 500;
      color: #1E293B;
      display: block;
      margin-bottom: 3px;
    }

    .wizard-help-btn-subtitle {
      font-size: 13px;
      color: #64748B;
      display: block;
    }

    .wizard-help-btn-arrow {
      color: #94A3B8;
      font-size: 16px;
    }

    .wizard-help-btn.primary {
      background: #A855F7;
      border-color: #A855F7;
    }

    .wizard-help-btn.primary:hover {
      background: #9333EA;
      border-color: #9333EA;
    }

    .wizard-help-btn.primary .wizard-help-btn-icon {
      background: rgba(255,255,255,0.2);
      border-color: rgba(255,255,255,0.3);
    }

    .wizard-help-btn.primary .wizard-help-btn-icon svg {
      color: white;
    }

    .wizard-help-btn-icon img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
    }

    .wizard-help-btn.primary .wizard-help-btn-title {
      color: white;
    }

    .wizard-help-btn.primary .wizard-help-btn-subtitle {
      color: rgba(255,255,255,0.8);
    }

    .wizard-help-btn.primary .wizard-help-btn-arrow {
      color: rgba(255,255,255,0.6);
    }

    .wizard-help-footer {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid #E2E8F0;
    }

    .wizard-help-footer-link {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: #A855F7;
      text-decoration: none;
      font-weight: 500;
    }

    .wizard-help-footer-link:hover {
      color: #9333EA;
    }

    .wizard-help-footer-link svg {
      width: 16px;
      height: 16px;
    }

    /* Wizard Main Content (Modern B2B) */
    .wizard-main {
      background: #FFFFFF;
      border: 1px solid #E2E8F0;
      border-radius: 12px;
      padding: 24px 32px;
      flex: 1;
      max-width: 900px;
      display: flex;
      flex-direction: column;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
      overflow-x: hidden;
    }

    .wizard-content-header {
      margin-bottom: 28px;
    }

    .wizard-content-header h1 {
      font-size: 26px;
      font-weight: 600;
      color: #1E293B;
      margin: 0 0 8px;
      letter-spacing: -0.02em;
    }

    .wizard-content-header p {
      font-size: 16px;
      color: #64748B;
      margin: 0;
      line-height: 1.5;
    }

    .wizard-content-body {
      margin-bottom: 32px;
      flex: 1;
    }

    /* Step Content Panels */
    .step-panel {
      display: none;
      height: 100%;
    }

    .step-panel.active {
      display: flex;
      flex-direction: column;
    }

    /* Wizard Footer / Navigation (Modern B2B) */
    .wizard-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-top: 24px;
      border-top: 1px solid #E2E8F0;
      margin-top: auto;
    }

    .wizard-footer-left {
      display: flex;
      gap: 12px;
    }

    .wizard-footer-right {
      display: flex;
      gap: 12px;
    }

    .wizard-btn {
      padding: 12px 24px;
      font-size: 15px;
      font-weight: 500;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .wizard-btn-primary {
      background: #A855F7;
      color: white;
      border: none;
      box-shadow: 0 1px 2px rgba(168, 85, 247, 0.2);
    }

    .wizard-btn-primary:hover {
      background: #9333EA;
      box-shadow: 0 2px 4px rgba(168, 85, 247, 0.3);
    }

    .wizard-btn-primary:disabled {
      background: #E2E8F0;
      color: #94A3B8;
      cursor: not-allowed;
      box-shadow: none;
    }

    .wizard-btn-secondary {
      background: white;
      color: #1E293B;
      border: 1px solid #E2E8F0;
    }

    .wizard-btn-secondary:hover {
      background: #F8FAFC;
      border-color: #CBD5E1;
    }

    .wizard-btn-text {
      background: none;
      border: none;
      color: #64748B;
      padding: 10px 12px;
    }

    .wizard-btn-text:hover {
      color: #1E293B;
    }

    /* ============================================
       STEP 1: PRODUCT TYPE SELECTION (Modern B2B)
       ============================================ */
    .product-type-grid {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .product-type-card {
      display: block;
      cursor: pointer;
    }

    .product-type-input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .product-type-content {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px 20px;
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
      transition: all 0.15s ease;
    }

    .product-type-card:hover .product-type-content {
      border-color: #CBD5E1;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }

    .product-type-input:checked + .product-type-content {
      border-color: #A855F7;
      background: #FAF5FF;
      box-shadow: 0 0 0 1px #A855F7;
    }

    .product-type-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #F1F5F9;
      border-radius: 8px;
      flex-shrink: 0;
    }

    .product-type-icon svg {
      width: 20px;
      height: 20px;
      color: #64748B;
    }

    .product-type-input:checked + .product-type-content .product-type-icon {
      background: #F3E8FF;
    }

    .product-type-input:checked + .product-type-content .product-type-icon svg {
      color: #A855F7;
    }

    .product-type-text {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .product-type-title {
      font-size: 16px;
      font-weight: 500;
      color: #1E293B;
    }

    .product-type-description {
      font-size: 14px;
      color: #64748B;
    }

    .product-type-indicator {
      width: 20px;
      height: 20px;
      border: 2px solid #CBD5E1;
      border-radius: 50%;
      flex-shrink: 0;
      position: relative;
      transition: all 0.15s ease;
    }

    .product-type-input:checked + .product-type-content .product-type-indicator {
      border-color: #A855F7;
      background: #A855F7;
    }

    .product-type-input:checked + .product-type-content .product-type-indicator::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
    }

    /* Tooltip (Modern) */
    .tooltip-trigger {
      position: relative;
      display: inline-flex;
      align-items: center;
      margin-left: 4px;
    }

    .tooltip-icon {
      color: #94A3B8;
      cursor: help;
      font-size: 14px;
    }

    .tooltip-content {
      position: absolute;
      bottom: calc(100% + 8px);
      left: 50%;
      transform: translateX(-50%);
      background: #1E293B;
      color: white;
      font-size: 13px;
      padding: 10px 14px;
      border-radius: 8px;
      width: 260px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.15s ease, visibility 0.15s ease;
      z-index: 100;
      line-height: 1.5;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .tooltip-content::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: #1E293B;
    }

    .tooltip-trigger:hover .tooltip-content {
      opacity: 1;
      visibility: visible;
    }

    /* Unrestricted Banner (Modern) */
    .unrestricted-banner {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 16px;
      margin-top: 16px;
      background: #FFFBEB;
      border: 1px solid #FDE68A;
      border-radius: 10px;
    }

    .unrestricted-banner.hidden {
      display: none;
    }

    .unrestricted-banner-icon {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #FEF3C7;
      border-radius: 8px;
      flex-shrink: 0;
    }

    .unrestricted-banner-icon svg {
      width: 18px;
      height: 18px;
      color: #D97706;
    }

    .unrestricted-banner-content {
      flex: 1;
    }

    .unrestricted-banner-title {
      font-size: 14px;
      font-weight: 500;
      color: #92400E;
      margin-bottom: 4px;
    }

    .unrestricted-banner-text {
      font-size: 13px;
      color: #A16207;
      margin-bottom: 8px;
      line-height: 1.5;
    }

    .unrestricted-banner-link {
      font-size: 13px;
      color: #A855F7;
      font-weight: 500;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .unrestricted-banner-link:hover {
      color: #9333EA;
    }

    /* Meta Celebration Modal */
    .meta-celebration-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .meta-celebration-overlay.active {
      display: flex;
    }

    .meta-celebration-modal {
      background: white;
      border-radius: 16px;
      padding: 48px;
      max-width: 800px;
      width: 94%;
      max-height: 90vh;
      overflow-y: auto;
      text-align: center;
    }

    .meta-celebration-flow {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0;
      padding: 32px 0 40px;
    }

    .meta-celebration-flow .flow-node {
      width: 80px;
      height: 80px;
    }

    .meta-celebration-flow .flow-node img {
      width: 80px;
      height: 80px;
    }

    .meta-celebration-flow .flow-node.shopify img {
      width: 80px;
      height: auto;
      border-radius: 0;
    }

    .meta-celebration-flow .flow-node-label {
      font-size: 14px;
      margin-top: 12px;
    }

    .meta-celebration-header h2 {
      font-size: 30px;
      font-weight: 700;
      background: linear-gradient(135deg, #A855F7, #6366F1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 0;
    }

    .meta-celebration-divider {
      height: 1px;
      background: #E2E8F0;
      margin: 32px 0;
    }

    .meta-celebration-section {
      text-align: left;
    }

    .meta-celebration-section-title {
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #A855F7;
      margin-bottom: 10px;
    }

    .meta-celebration-section-body {
      font-size: 16px;
      color: #475569;
      line-height: 1.6;
    }

    .meta-celebration-emq-img {
      width: 100%;
      border-radius: 8px;
      border: 1px solid #E2E8F0;
      margin-top: 20px;
    }

    .meta-celebration-actions {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 36px;
    }

    .meta-celebration-actions .wizard-btn-secondary {
      background: none;
      border: none;
      color: #64748B;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      padding: 8px;
    }

    .meta-celebration-actions .wizard-btn-secondary:hover {
      color: #1E293B;
    }

    /* Unrestricted Modal */
    .unrestricted-modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .unrestricted-modal-overlay.active {
      display: flex;
    }

    .unrestricted-modal {
      background: white;
      border-radius: 16px;
      padding: 32px;
      max-width: 480px;
      width: 90%;
      position: relative;
      box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    }

    .unrestricted-modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      font-size: 24px;
      color: #94A3B8;
      cursor: pointer;
    }

    .unrestricted-modal-icon {
      width: 64px;
      height: 64px;
      margin: 0 auto 20px;
      background: #F3E8FF;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .unrestricted-modal-icon svg {
      width: 32px;
      height: 32px;
      color: #A855F7;
    }

    .unrestricted-modal-title {
      font-size: 22px;
      font-weight: 600;
      color: #1E293B;
      text-align: center;
      margin: 0 0 12px;
    }

    .unrestricted-modal-message {
      font-size: 15px;
      color: #64748B;
      text-align: center;
      line-height: 1.6;
      margin: 0 0 24px;
    }

    .unrestricted-benefits {
      background: #F8FAFC;
      border-radius: 12px;
      padding: 16px 20px;
      margin-bottom: 20px;
    }

    .unrestricted-benefit {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      color: #1E293B;
      padding: 8px 0;
    }

    .unrestricted-benefit svg {
      width: 20px;
      height: 20px;
      color: #10B981;
      flex-shrink: 0;
    }

    .unrestricted-cta-card {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 16px;
      background: #FFFFFF;
      border: 1px solid #E2E8F0;
      border-radius: 12px;
      margin-bottom: 12px;
      cursor: pointer;
      transition: all 0.15s ease;
      text-decoration: none;
    }

    .unrestricted-cta-card:hover {
      border-color: #A855F7;
      background: #FAF5FF;
      text-decoration: none;
    }

    .unrestricted-cta-icon {
      width: 44px;
      height: 44px;
      background: #F3E8FF;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .unrestricted-cta-icon img {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      object-fit: cover;
    }

    .unrestricted-cta-icon svg {
      width: 22px;
      height: 22px;
      color: #A855F7;
    }

    .unrestricted-cta-content {
      flex: 1;
    }

    .unrestricted-cta-title {
      font-size: 15px;
      font-weight: 600;
      color: #1E293B;
      margin-bottom: 2px;
    }

    .unrestricted-cta-desc {
      font-size: 13px;
      color: #64748B;
    }

    .unrestricted-modal-actions {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .unrestricted-btn-secondary {
      flex: 1;
      padding: 14px 20px;
      font-size: 15px;
      font-weight: 500;
      color: #64748B;
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .unrestricted-btn-secondary:hover {
      background: #F8FAFC;
      border-color: #CBD5E1;
    }

    .unrestricted-btn-primary {
      flex: 1;
      padding: 14px 20px;
      font-size: 15px;
      font-weight: 500;
      color: white;
      background: #A855F7;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.15s ease;
      text-decoration: none;
      text-align: center;
    }

    .unrestricted-btn-primary:hover {
      background: #9333EA;
      color: white;
      text-decoration: none;
    }

    /* ============================================
       OVERVIEW/WELCOME PAGE
       ============================================ */
    .overview-panel {
      display: flex;
      flex-direction: column;
      justify-content: center;
      min-height: 100%;
      padding: 20px 0;
    }

    .overview-hero {
      text-align: center;
      padding: 0;
      margin-bottom: 24px;
    }

    .overview-icon {
      width: 64px;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
    }

    .overview-icon img {
      width: 64px;
      height: 64px;
      object-fit: contain;
    }

    .overview-hero h1 {
      font-size: 32px;
      font-weight: 600;
      color: #1E293B;
      margin: 0 0 12px;
      letter-spacing: -0.02em;
    }

    .overview-hero p {
      font-size: 18px;
      color: #64748B;
      margin: 0;
      line-height: 1.6;
      max-width: 520px;
      margin: 0 auto;
    }

    .overview-video {
      margin: 20px 0;
      border-radius: 12px;
      overflow: hidden;
      background: linear-gradient(135deg, #1E293B 0%, #334155 100%);
      min-height: 220px;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
      transition: all 0.2s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .overview-video:hover {
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }

    .overview-video-play {
      width: 100px;
      height: 100px;
      background: rgba(255,255,255,0.95);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 16px rgba(0,0,0,0.3);
      transition: all 0.2s ease;
    }

    .overview-video:hover .overview-video-play {
      transform: scale(1.1);
      background: white;
    }

    .overview-video-play svg {
      width: 44px;
      height: 44px;
      color: #A855F7;
      margin-left: 6px;
    }

    .overview-video-label {
      position: absolute;
      bottom: 20px;
      left: 20px;
      background: rgba(0,0,0,0.6);
      color: white;
      padding: 10px 16px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
    }

    .overview-steps {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 32px;
    }

    .overview-step {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px 20px;
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 12px;
    }

    .overview-step-number {
      width: 36px;
      height: 36px;
      background: #F1F5F9;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      font-weight: 600;
      color: #64748B;
      flex-shrink: 0;
    }

    .overview-step-text {
      flex: 1;
    }

    .overview-step-title {
      font-size: 16px;
      font-weight: 500;
      color: #1E293B;
      margin-bottom: 2px;
    }

    .overview-step-desc {
      font-size: 14px;
      color: #64748B;
    }

    .overview-step-time {
      font-size: 13px;
      color: #94A3B8;
      font-weight: 500;
    }

    .overview-cta {
      text-align: center;
    }

    .overview-cta-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 16px 36px;
      background: #A855F7;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 17px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
      box-shadow: 0 2px 4px rgba(168, 85, 247, 0.2);
    }

    .overview-cta-btn:hover {
      background: #9333EA;
      box-shadow: 0 4px 8px rgba(168, 85, 247, 0.3);
    }

    .overview-time-estimate {
      margin-top: 12px;
      font-size: 15px;
      color: #64748B;
    }

    .overview-time-estimate svg {
      width: 16px;
      height: 16px;
      vertical-align: -2px;
      margin-right: 4px;
    }

    /* ============================================
       STEP 2: PIXEL SETUP
       ============================================ */

    /* Education Accordion */
    .pixel-education {
      margin-bottom: 24px;
    }

    .pixel-accordion {
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
      overflow: hidden;
    }

    .pixel-accordion-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 20px;
      cursor: pointer;
      transition: background 0.15s ease;
    }

    .pixel-accordion-header:hover {
      background: #F8FAFC;
    }

    .pixel-accordion-title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 15px;
      font-weight: 500;
      color: #1E293B;
    }

    .pixel-accordion-title svg {
      width: 20px;
      height: 20px;
      color: #A855F7;
    }

    .pixel-accordion-icon {
      color: #94A3B8;
      transition: transform 0.2s ease;
    }

    .pixel-accordion.open .pixel-accordion-icon {
      transform: rotate(180deg);
    }

    .pixel-accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .pixel-accordion.open .pixel-accordion-content {
      max-height: 500px;
    }

    .pixel-accordion-body {
      padding: 0 20px 20px;
      border-top: 1px solid #E2E8F0;
    }

    .pixel-explanation {
      padding-top: 16px;
    }

    .pixel-explanation p {
      font-size: 15px;
      color: #64748B;
      line-height: 1.6;
      margin: 0 0 16px;
    }

    .pixel-flow-diagram {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 20px;
      background: #F8FAFC;
      border-radius: 8px;
      margin-top: 16px;
    }

    .pixel-flow-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .pixel-flow-icon {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
    }

    .pixel-flow-icon svg {
      width: 24px;
      height: 24px;
      color: #64748B;
    }

    .pixel-flow-icon.purple {
      background: #FAF5FF;
      border-color: #E9D5FF;
    }

    .pixel-flow-icon.purple svg {
      color: #A855F7;
    }

    .pixel-flow-label {
      font-size: 12px;
      color: #64748B;
      font-weight: 500;
    }

    .pixel-flow-arrow {
      color: #CBD5E1;
      font-size: 20px;
    }

    /* Setup Instructions Card */
    .pixel-setup-card {
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
      padding: 24px;
      margin-bottom: 20px;
    }

    .pixel-setup-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .pixel-setup-title {
      font-size: 18px;
      font-weight: 600;
      color: #1E293B;
      margin-bottom: 4px;
    }

    .pixel-setup-subtitle {
      font-size: 14px;
      color: #64748B;
    }

    .pixel-setup-badge {
      font-size: 12px;
      font-weight: 500;
      color: #A855F7;
      background: #FAF5FF;
      padding: 4px 10px;
      border-radius: 12px;
    }

    .pixel-setup-steps {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 20px;
    }

    .pixel-setup-step {
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .pixel-setup-step-number {
      width: 26px;
      height: 26px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #F1F5F9;
      border-radius: 50%;
      font-size: 13px;
      font-weight: 600;
      color: #64748B;
      flex-shrink: 0;
    }

    .pixel-setup-step-text {
      font-size: 15px;
      color: #1E293B;
      line-height: 1.5;
      padding-top: 2px;
    }

    .pixel-setup-actions {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .pixel-open-editor-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      background: #A855F7;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .pixel-open-editor-btn:hover {
      background: #9333EA;
    }

    .pixel-open-editor-btn svg {
      width: 16px;
      height: 16px;
    }

    .pixel-show-how-link {
      font-size: 13px;
      color: #A855F7;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .pixel-show-how-link:hover {
      color: #9333EA;
    }

    /* Status Badge (in instruction card) */
    .pixel-status-badge {
      position: absolute;
      top: 16px;
      right: 16px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      border-radius: 20px;
      font-size: 15px;
      font-weight: 600;
      white-space: nowrap;
    }

    .pixel-status-badge .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    .pixel-status-badge.status-not-detected {
      background: #F1F5F9;
      color: #64748B;
    }

    .pixel-status-badge.status-not-detected .status-dot {
      background: #94A3B8;
    }

    .pixel-status-badge.status-not-detected.checked {
      background: #FEF2F2;
      color: #DC2626;
    }

    .pixel-status-badge.status-not-detected.checked .status-dot {
      background: #EF4444;
    }

    .pixel-status-badge.status-enabled {
      background: #ECFDF5;
      color: #059669;
    }

    .pixel-status-badge.status-enabled .status-dot {
      background: #10B981;
    }

    /* Connection Test Status Badge */
    .connection-test-badge {
      position: absolute;
      top: 0;
      right: 0;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 18px;
      border-radius: 100px;
      font-size: 16px;
      font-weight: 600;
      white-space: nowrap;
    }

    .connection-test-badge .status-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }

    .connection-test-badge.status-pending {
      background: #F1F5F9;
      color: #64748B;
    }

    .connection-test-badge.status-pending .status-dot {
      background: #94A3B8;
    }

    .connection-test-badge.status-testing {
      background: #FAF5FF;
      color: #A855F7;
    }

    .connection-test-badge.status-testing .status-dot {
      background: #A855F7;
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .connection-test-badge.status-success {
      background: #ECFDF5;
      color: #059669;
    }

    .connection-test-badge.status-success .status-dot {
      background: #10B981;
    }

    .connection-test-badge.status-failed {
      background: #FEF2F2;
      color: #DC2626;
    }

    .connection-test-badge.status-failed .status-dot {
      background: #EF4444;
    }

    /* Demo Controls */
    .pixel-demo-controls {
      margin-top: 20px;
      padding: 16px;
      background: #F1F5F9;
      border-radius: 8px;
      border: 1px dashed #CBD5E1;
    }

    .pixel-demo-controls-label {
      font-size: 11px;
      font-weight: 600;
      color: #64748B;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }

    .pixel-demo-controls-buttons {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .pixel-demo-btn {
      padding: 6px 12px;
      font-size: 12px;
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 6px;
      cursor: pointer;
    }

    .pixel-demo-btn:hover {
      background: #F8FAFC;
    }

    /* ============================================
       STEP 3: SPECIAL CASES
       ============================================ */
    .special-cases-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .special-case-item {
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
      padding: 16px 20px;
      transition: all 0.15s ease;
    }

    .special-case-item:hover {
      border-color: #CBD5E1;
    }

    .special-case-item.selected {
      border-color: #A855F7;
      background: #FAF5FF;
    }

    .special-case-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .special-case-info {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .special-case-icon {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #F1F5F9;
      border-radius: 8px;
      flex-shrink: 0;
    }

    .special-case-icon svg {
      width: 18px;
      height: 18px;
      color: #64748B;
    }

    .special-case-item.selected .special-case-icon {
      background: #F3E8FF;
    }

    .special-case-item.selected .special-case-icon svg {
      color: #A855F7;
    }

    .special-case-text {
      flex: 1;
    }

    .special-case-title {
      font-size: 16px;
      font-weight: 500;
      color: #1E293B;
      margin-bottom: 2px;
    }

    .special-case-description {
      font-size: 14px;
      color: #1E293B;
    }

    /* Toggle Switch */
    .special-case-toggle {
      position: relative;
      width: 44px;
      height: 24px;
      flex-shrink: 0;
    }

    .special-case-toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .special-case-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #E2E8F0;
      border-radius: 24px;
      transition: all 0.2s ease;
    }

    .special-case-toggle-slider::before {
      content: '';
      position: absolute;
      width: 18px;
      height: 18px;
      left: 3px;
      bottom: 3px;
      background: white;
      border-radius: 50%;
      transition: all 0.2s ease;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .special-case-toggle input:checked + .special-case-toggle-slider {
      background: #A855F7;
    }

    .special-case-toggle input:checked + .special-case-toggle-slider::before {
      transform: translateX(20px);
    }

    .special-case-learn-more {
      font-size: 12px;
      color: #A855F7;
      font-weight: 500;
      cursor: pointer;
      margin-top: 8px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .special-case-learn-more:hover {
      color: #9333EA;
    }

    .special-cases-note {
      margin-top: 16px;
      padding: 12px 16px;
      background: #F8FAFC;
      border-radius: 8px;
      font-size: 13px;
      color: #1E293B;
    }

    .special-case-url-input {
      margin-top: 12px;
      padding: 12px 16px;
      background: #F8FAFC;
      border-radius: 6px;
      border-top: 1px solid #E2E8F0;
    }

    .special-case-url-input label {
      display: block;
      font-size: 12px;
      font-weight: 500;
      color: #64748B;
      margin-bottom: 6px;
    }

    .url-input-field {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #E2E8F0;
      border-radius: 6px;
      font-size: 14px;
      color: #1E293B;
      background: white;
      box-sizing: border-box;
    }

    .url-input-field:focus {
      outline: none;
      border-color: #A855F7;
      box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
    }

    .url-input-field::placeholder {
      color: #94A3B8;
    }

    /* Debug Panel */
    .debug-panel {
      position: fixed;
      bottom: 100px;
      right: 24px;
      background: #1E293B;
      border-radius: 8px;
      padding: 12px;
      z-index: 9999;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      display: flex;
      flex-direction: column;
      gap: 6px;
      min-width: 140px;
    }

    .debug-panel-header {
      color: #94A3B8;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
      padding-bottom: 6px;
      border-bottom: 1px solid #334155;
    }

    .debug-btn {
      background: #334155;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      text-align: left;
      transition: background 0.15s;
    }

    .debug-btn:hover {
      background: #475569;
    }

    .debug-btn-reset {
      background: #7F1D1D;
      margin-top: 4px;
    }

    .debug-btn-reset:hover {
      background: #991B1B;
    }

    /* Live Chat Button */
    .live-chat-button {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 56px;
      height: 56px;
      background: #A855F7;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4);
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      z-index: 9999;
      border: none;
    }

    .live-chat-button:hover {
      transform: scale(1.05);
      background: #9333EA;
      box-shadow: 0 6px 16px rgba(168, 85, 247, 0.5);
    }

    .live-chat-button:active {
      transform: scale(0.98);
    }

    .live-chat-icon {
      font-size: 24px;
      line-height: 1;
    }

    /* Step 4: Review Configuration */
    .review-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .review-item {
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 8px;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .review-item-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .review-item-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: #F1F5F9;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #64748B;
    }

    .review-item-icon svg {
      width: 20px;
      height: 20px;
    }

    .review-item-icon.success {
      background: #ECFDF5;
      color: #10B981;
    }

    .review-item-content {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .review-item-label {
      font-size: 13px;
      color: #64748B;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .review-item-value {
      font-size: 16px;
      color: #1E293B;
      font-weight: 500;
    }

    .review-item-edit {
      font-size: 14px;
      color: #A855F7;
      font-weight: 500;
      cursor: pointer;
      text-decoration: none;
    }

    .review-item-edit:hover {
      color: #9333EA;
      text-decoration: underline;
    }

    .review-summary {
      margin-top: 20px;
      padding: 16px;
      background: #F0FDF4;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .review-summary-icon {
      color: #10B981;
      font-size: 20px;
    }

    .review-summary-text {
      font-size: 14px;
      color: #1E293B;
    }

    /* Step 5: Data Flow Visual - BIGGER */
    .data-flow-visual {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 60px 32px;
      margin-bottom: 24px;
      min-height: 450px;
      gap: 0;
    }

    .flow-source, .flow-hub {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }

    .flow-node {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
    }

    .flow-node.shopify {
      background: transparent;
      box-shadow: none;
    }

    .flow-node.popsixle {
      background: transparent;
      box-shadow: none;
    }

    .flow-node img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }

    .flow-node.shopify img {
      width: 100px;
      height: auto;
      object-fit: contain;
      border-radius: 0;
    }

    .flow-node-label {
      font-size: 15px;
      color: #1E293B;
      font-weight: 600;
      position: absolute;
      top: 100%;
      margin-top: 12px;
      white-space: nowrap;
    }

    /* Dashed lines using SVG */
    .flow-line-svg {
      overflow: visible;
    }

    .dashed-line {
      stroke-dasharray: 12, 10;
      stroke-width: 3;
      fill: none;
      stroke-linecap: round;
    }

    .dashed-line.green {
      stroke: #95BF47;
      animation: dash-flow 0.8s linear infinite;
    }

    /* Branch lines - Ghost (faded) by default */
    .dashed-line.purple {
      stroke: #A855F7;
      opacity: 0.15;
      stroke-dasharray: 12, 10;
    }

    .dashed-line.purple.connected {
      opacity: 1;
      animation: dash-appear 0.5s ease-out, dash-flow 0.8s linear infinite 0.5s;
    }

    @keyframes dash-appear {
      from {
        opacity: 0;
        stroke-dashoffset: 100;
      }
      to {
        opacity: 1;
        stroke-dashoffset: 0;
      }
    }

    @keyframes dash-flow {
      to { stroke-dashoffset: -22; }
    }

    /* Sublabel under nodes - same as label */
    .flow-node-sublabel {
      font-size: 15px;
      color: #1E293B;
      font-weight: 600;
      position: absolute;
      top: 100%;
      margin-top: 12px;
      white-space: nowrap;
    }

    /* Destinations column */
    .flow-destinations {
      display: flex;
      flex-direction: column;
      gap: 28px;
    }

    .flow-destination-wrapper {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .flow-destination-wrapper.connected .flow-destination-card {
      border-color: #A855F7;
      box-shadow: 0 0 0 1px #A855F7;
    }

    .flow-destination-card {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px 20px;
      background: white;
      border-radius: 12px;
      border: 1.5px solid #94A3B8;
      min-width: 260px;
    }

    .destination-icon {
      width: 64px;
      height: 64px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      overflow: hidden;
      background: #F8FAFC;
      border: 1px solid #E2E8F0;
    }

    .destination-icon img {
      width: 40px;
      height: 40px;
      object-fit: contain;
    }

    .destination-icon svg {
      width: 36px;
      height: 36px;
    }

    .destination-icon.meta {
      background: #F3F4F6;
    }

    .destination-icon.google {
      background: #F8FAFC;
    }

    .destination-icon.tiktok {
      background: #000;
      border-color: #000;
    }

    .destination-info {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .destination-name {
      font-size: 16px;
      font-weight: 600;
      color: #1E293B;
    }

    /* Channel Status Badge */
    .channel-status-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
      background: #F1F5F9;
      color: #64748B;
    }

    .channel-status-badge .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #94A3B8;
    }

    .channel-status-badge.connected {
      background: #ECFDF5;
      color: #059669;
    }

    .channel-status-badge.connected .status-dot {
      background: #10B981;
    }

    .flow-connect-btn {
      padding: 10px 24px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      background: #A855F7;
      color: white;
      border: none;
      transition: all 0.2s ease;
      flex-shrink: 0;
    }

    .flow-connect-btn:hover {
      background: #9333EA;
    }

    .flow-connect-btn.connected {
      background: #ECFDF5;
      color: #059669;
      cursor: default;
    }

    .flow-connect-btn.connected:hover {
      background: #ECFDF5;
    }

    /* Dashboard button tooltip */
    .dashboard-btn-wrapper {
      position: relative;
      display: inline-block;
    }

    .dashboard-tooltip {
      visibility: hidden;
      opacity: 0;
      position: absolute;
      bottom: calc(100% + 8px);
      right: 0;
      background: #1E293B;
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 13px;
      white-space: nowrap;
      transition: opacity 0.2s, visibility 0.2s;
      z-index: 10;
    }

    .dashboard-tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      right: 20px;
      border: 6px solid transparent;
      border-top-color: #1E293B;
    }

    .dashboard-btn-wrapper:hover .dashboard-tooltip {
      visibility: visible;
      opacity: 1;
    }

    .dashboard-btn-wrapper.connected .dashboard-tooltip {
      display: none;
    }

    /* ============================================
       RESPONSIVE: Smaller Laptop Screens
       ============================================ */
    @media (max-height: 900px) {
      /* Shrink setup steps sidebar */
      .wizard-inner-layout {
        grid-template-columns: 220px 1fr;
      }

      .setup-steps-title {
        font-size: 15px;
      }

      .setup-steps-progress {
        font-size: 12px;
      }

      .wizard-step-title {
        font-size: 13px;
      }

      .wizard-step-number {
        width: 24px;
        height: 24px;
        font-size: 12px;
      }

      .wizard-step-item {
        gap: 8px;
      }

      .wizard-step-item:not(:last-child)::after {
        left: 11px;
      }

      .wizard-content-area {
        padding: 16px;
      }

      .wizard-main {
        padding: 16px 20px;
      }

      /* Overview page - shrink main content */
      .overview-icon {
        width: 48px;
        height: 48px;
        margin-bottom: 16px;
      }

      .overview-icon img {
        width: 48px;
        height: 48px;
      }

      .overview-hero h1 {
        font-size: 26px;
        margin-bottom: 8px;
      }

      .overview-hero p {
        font-size: 15px;
        margin-bottom: 16px;
      }

      .overview-video {
        margin-bottom: 16px;
      }

      .overview-video-placeholder {
        height: 160px;
      }

      .overview-steps {
        gap: 8px;
      }

      .overview-step {
        padding: 10px 14px;
      }

      .overview-step-number {
        width: 28px;
        height: 28px;
        font-size: 13px;
      }

      .overview-step-title {
        font-size: 14px;
      }

      .overview-step-desc {
        font-size: 12px;
      }

      .overview-step-time {
        font-size: 11px;
      }

      /* Explanation panel */
      .explanation-wrapper {
        gap: 12px;
        top: 16px;
        max-height: calc(100vh - 32px);
      }

      .explanation-panel {
        padding: 16px;
      }

      .explanation-label {
        margin-bottom: 6px;
        font-size: 11px;
      }

      .explanation-title {
        font-size: 17px;
        margin-bottom: 8px;
      }

      .explanation-body {
        font-size: 13px;
        line-height: 1.5;
      }

      .faq-section-title {
        font-size: 12px;
        margin-bottom: 8px;
      }

      .faq-item {
        margin-bottom: 8px;
        padding-bottom: 8px;
      }

      .faq-question {
        font-size: 13px;
        margin-bottom: 4px;
      }

      .faq-answer {
        font-size: 12px;
      }

      /* Assistance card */
      .assistance-card {
        padding: 12px 14px;
      }

      .assistance-card-label {
        margin-bottom: 8px;
        font-size: 10px;
      }

      .assistance-card-link {
        padding: 8px 10px;
        margin-bottom: 4px;
        font-size: 13px;
        gap: 10px;
      }

      .assistance-card-icon {
        width: 32px;
        height: 32px;
      }

      .assistance-card-icon img {
        width: 32px;
        height: 32px;
      }

      .assistance-card-icon svg {
        width: 18px;
        height: 18px;
      }

      /* Setup steps sidebar */
      .setup-steps-header {
        padding: 12px 16px 8px;
      }

      .setup-steps-list {
        padding: 0 16px;
      }

      .wizard-step-item {
        padding: 8px 0;
      }

      .wizard-step-item:not(:last-child)::after {
        top: 32px;
        bottom: -8px;
      }

      .setup-steps-footer {
        padding: 10px 16px;
      }

      /* Connect Channels page - shrink flow visual */
      .wizard-content-area {
        gap: 16px;
      }

      .flow-node {
        width: 80px;
        height: 80px;
      }

      .flow-node.shopify img {
        width: 80px;
      }

      .flow-node.popsixle img {
        width: 80px;
        height: 80px;
      }

      .flow-node-label,
      .flow-node-sublabel {
        font-size: 13px;
        margin-top: 10px;
      }

      .channels-flow {
        min-height: 380px;
        gap: 0;
      }

      .flow-destinations {
        gap: 20px;
      }

      .flow-destination-card {
        padding: 12px 14px;
        min-width: 200px;
        gap: 12px;
      }

      .destination-icon {
        width: 48px;
        height: 48px;
        border-radius: 10px;
      }

      .destination-icon img {
        width: 30px;
        height: 30px;
      }

      .destination-icon svg {
        width: 28px;
        height: 28px;
      }

      .destination-name {
        font-size: 14px;
      }

      .channel-status-badge {
        font-size: 11px;
        padding: 3px 8px;
      }

      .flow-connect-btn {
        padding: 8px 18px;
        font-size: 13px;
      }
    }

    @media (max-height: 850px) {
      /* Even smaller sidebar */
      .wizard-inner-layout {
        grid-template-columns: 180px 1fr;
      }

      .setup-steps-header {
        padding: 10px 12px 6px;
      }

      .setup-steps-title {
        font-size: 14px;
      }

      .setup-steps-list {
        padding: 0 12px;
      }

      .wizard-step-item {
        padding: 6px 0;
        gap: 6px;
      }

      .wizard-step-number {
        width: 22px;
        height: 22px;
        font-size: 11px;
      }

      .wizard-step-title {
        font-size: 12px;
      }

      .wizard-step-item:not(:last-child)::after {
        left: 10px;
        top: 26px;
        bottom: -6px;
      }

      .setup-steps-footer {
        padding: 8px 12px;
      }

      /* Overview - keep steps but smaller */
      .overview-hero h1 {
        font-size: 22px;
      }

      .overview-hero p {
        font-size: 14px;
        margin-bottom: 12px;
      }

      .overview-video {
        min-height: 140px;
        margin: 12px 0;
      }

      .overview-steps {
        gap: 6px;
      }

      .overview-step {
        padding: 8px 10px;
      }

      .overview-step-number {
        width: 24px;
        height: 24px;
        font-size: 12px;
      }

      .overview-step-title {
        font-size: 13px;
      }

      .overview-step-desc {
        font-size: 11px;
      }

      .overview-step-time {
        font-size: 10px;
      }

      /* Explanation panel even tighter */
      .explanation-wrapper {
        width: 280px;
        min-width: 280px;
      }

      .explanation-panel {
        padding: 12px;
      }

      .explanation-title {
        font-size: 16px;
      }

      .explanation-body {
        font-size: 12px;
      }

      .faq-question {
        font-size: 12px;
      }

      .faq-answer {
        font-size: 11px;
      }

      .assistance-card {
        padding: 10px 12px;
      }

      .assistance-card-link {
        padding: 6px 8px;
        font-size: 12px;
      }

      /* Connect Channels page - even more compact */
      .wizard-content-area {
        gap: 12px;
      }

      .flow-node {
        width: 60px;
        height: 60px;
      }

      .flow-node.shopify img {
        width: 60px;
      }

      .flow-node.popsixle img {
        width: 60px;
        height: 60px;
      }

      .flow-node-label,
      .flow-node-sublabel {
        font-size: 12px;
        margin-top: 8px;
      }

      .channels-flow {
        min-height: 300px;
      }

      .flow-destinations {
        gap: 12px;
      }

      .flow-destination-card {
        padding: 8px 10px;
        min-width: 160px;
        gap: 8px;
      }

      .destination-icon {
        width: 36px;
        height: 36px;
        border-radius: 8px;
      }

      .destination-icon img {
        width: 22px;
        height: 22px;
      }

      .destination-icon svg {
        width: 22px;
        height: 22px;
      }

      .destination-name {
        font-size: 13px;
      }

      .channel-status-badge {
        font-size: 10px;
        padding: 2px 6px;
        gap: 4px;
      }

      .flow-destination-wrapper {
        gap: 8px;
      }

      .flow-connect-btn {
        padding: 6px 14px;
        font-size: 12px;
        border-radius: 6px;
      }

      .destination-name {
        font-size: 12px;
      }

      .channel-status-badge {
        font-size: 9px;
        padding: 2px 5px;
      }
    }

    /* ============================================
       CHANNEL CONNECTION FORM STYLES
       ============================================ */

    /* Inner Sidebar - Connection Steps variant */
    .connection-steps-sidebar {
      display: none;
    }

    .connection-steps-sidebar.active {
      display: block;
    }

    .connection-steps-header {
      padding: 20px 24px 16px;
      border-bottom: 1px solid #E2E8F0;
    }

    .connection-steps-title {
      font-size: 15px;
      font-weight: 600;
      color: #1E293B;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .connection-steps-title img {
      width: 24px;
      height: 24px;
      border-radius: 6px;
    }

    .connection-steps-list {
      padding: 16px 24px;
    }

    .connection-step-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 10px 0;
      position: relative;
    }

    .connection-step-item:not(:last-child)::after {
      content: '';
      position: absolute;
      left: 11px;
      top: 34px;
      bottom: -10px;
      width: 2px;
      background: #E2E8F0;
    }

    .connection-step-item.completed:not(:last-child)::after {
      background: #A855F7;
    }

    .connection-step-number {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
      flex-shrink: 0;
      background: #F1F5F9;
      color: #94A3B8;
      border: 2px solid #E2E8F0;
    }

    .connection-step-item.active .connection-step-number {
      background: #A855F7;
      color: white;
      border-color: #A855F7;
    }

    .connection-step-item.completed .connection-step-number {
      background: #A855F7;
      color: white;
      border-color: #A855F7;
    }

    .connection-step-content {
      padding-top: 2px;
    }

    .connection-step-title {
      font-size: 14px;
      font-weight: 500;
      color: #64748B;
    }

    .connection-step-item.active .connection-step-title {
      color: #1E293B;
      font-weight: 600;
    }

    .connection-step-item.completed .connection-step-title {
      color: #A855F7;
    }

    /* Data Flow Visual - Single Channel Variant */
    .channel-connect-flow {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 24px;
      background: #F8FAFC;
      border-radius: 12px;
      margin-bottom: 24px;
    }

    .channel-connect-flow .flow-node {
      width: 64px;
      height: 64px;
    }

    .channel-connect-flow .flow-node img {
      width: 64px;
      height: 64px;
    }

    .channel-connect-flow .flow-node-label {
      font-size: 12px;
      margin-top: 8px;
    }

    .channel-connect-flow .flow-line-svg {
      width: 48px;
      height: 20px;
    }

    /* Channel Form Container - fills available space */
    .channel-form-container {
      width: 100%;
      max-width: 680px;
    }

    /* Help link - positioned below header */
    .channel-form-help-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 15px;
      color: #A855F7;
      margin-bottom: 24px;
      text-decoration: none;
    }

    .channel-form-help-link:hover {
      text-decoration: underline;
    }

    .channel-form-help-link svg {
      width: 18px;
      height: 18px;
    }

    /* Individual card for each form field */
    .channel-connect-card {
      background: white;
      border: 1px solid #E2E8F0;
      border-radius: 10px;
      padding: 20px 24px;
      margin-bottom: 16px;
    }

    .channel-connect-card:last-child {
      margin-bottom: 0;
    }

    .channel-form-label {
      display: block;
      font-size: 16px;
      font-weight: 600;
      color: #1E293B;
      margin-bottom: 8px;
    }

    .channel-form-helper {
      font-size: 15px;
      color: #1E293B;
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .channel-form-input {
      width: 100%;
      padding: 14px 16px;
      border: 1px solid #E2E8F0;
      border-radius: 8px;
      font-size: 15px;
      color: #1E293B;
      background: white;
      box-sizing: border-box;
      transition: border-color 0.15s ease, box-shadow 0.15s ease;
    }

    .channel-form-input:focus {
      outline: none;
      border-color: #A855F7;
      box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
    }

    .channel-form-input::placeholder {
      color: #94A3B8;
    }

    .channel-form-input.error {
      border-color: #EF4444;
    }

    .channel-form-hint {
      font-size: 14px;
      color: #475569;
      margin-top: 8px;
      font-style: italic;
    }

    .channel-form-error {
      font-size: 14px;
      color: #EF4444;
      margin-top: 8px;
      display: none;
    }

    .channel-form-input.error + .channel-form-hint + .channel-form-error,
    .channel-form-input.error ~ .channel-form-error {
      display: block;
    }

    /* Primary Action Button */
    .channel-form-submit {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 28px;
      background: #A855F7;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.15s ease;
      margin-top: 8px;
    }

    .channel-form-submit:hover {
      background: #9333EA;
    }

    .channel-form-submit:disabled {
      background: #CBD5E1;
      cursor: not-allowed;
    }

    .channel-form-submit svg {
      width: 18px;
      height: 18px;
    }

    /* Spinner animation */
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .animate-spin {
      animation: spin 1s linear infinite;
    }

    /* Meta flow node in connection form */
    .flow-node.meta {
      width: 64px;
      height: 64px;
      background: #F3F4F6;
      border: 1px solid #E2E8F0;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .flow-destination {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* ============================================
       META DATA SHARING STEP STYLES
       ============================================ */

    .meta-credentials-section,
    .meta-data-sharing-section {
      animation: fadeInSection 0.25s ease;
    }

    @keyframes fadeInSection {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .data-sharing-kb-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: #A855F7;
      text-decoration: none;
      font-weight: 500;
    }

    .data-sharing-kb-link:hover {
      text-decoration: underline;
    }

    .data-sharing-confirmation {
      margin-top: 24px;
      display: flex;
      justify-content: flex-end;
    }

    /* ============================================
       SIDEBAR OPTIONAL BADGE
       ============================================ */
    .wizard-step-optional {
      display: block;
      font-size: 11px;
      color: #94A3B8;
      font-weight: 400;
      margin-top: 2px;
    }

    /* ============================================
       AD ACCOUNT STEP STYLES
       ============================================ */
    .meta-ad-account-section {
      animation: fadeInSection 0.25s ease;
    }

    .demo-version-btn {
      padding: 4px 12px;
      border-radius: 4px;
      border: 1px solid #E2E8F0;
      background: white;
      cursor: pointer;
      font-size: 12px;
      font-weight: 500;
    }

    .demo-version-btn.active {
      background: #A855F7;
      color: white;
      border-color: #A855F7;
    }

    .ad-account-optional-badge {
      display: inline-block;
      background: #F1F5F9;
      color: #64748B;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 500;
    }

    .ad-account-actions {
      margin-top: 24px;
      display: flex;
      justify-content: flex-end;
      gap: 12px;
    }

    .oauth-connect-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      width: 100%;
      padding: 14px 24px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: background 0.2s ease;
    }

    .oauth-connect-btn svg {
      width: 20px;
      height: 20px;
    }

    .oauth-connect-btn.meta-oauth {
      background: #1877F2;
      color: white;
    }

    .oauth-connect-btn.meta-oauth:hover {
      background: #166FE5;
    }

    /* Google Sign-in Button (Google brand guidelines) */
    .google-signin-btn {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      padding: 10px 24px;
      background: #fff;
      border: 1px solid #747775;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      color: #1F1F1F;
      cursor: pointer;
      transition: background 0.15s ease;
    }
    .google-signin-btn:hover { background: #F2F2F2; }
    .google-signin-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Google Error Alert */
    .google-error-alert {
      display: flex;
      gap: 12px;
      padding: 14px 16px;
      background: #FEF2F2;
      border: 1px solid #FECACA;
      border-radius: 8px;
      margin-top: 16px;
    }
    .google-error-alert-icon { flex-shrink: 0; padding-top: 1px; }
    .google-error-alert-title {
      font-size: 14px;
      font-weight: 600;
      color: #991B1B;
      margin-bottom: 4px;
    }
    .google-error-alert-body {
      font-size: 13px;
      color: #7F1D1D;
      line-height: 1.5;
    }
    .google-error-alert-body a {
      color: #991B1B;
      text-decoration: underline;
    }
    .google-error-retry {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-top: 10px;
      padding: 6px 14px;
      background: white;
      border: 1px solid #FECACA;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
      color: #991B1B;
      cursor: pointer;
      transition: background 0.15s ease;
    }
    .google-error-retry:hover { background: #FEF2F2; }

    /* ===== TikTok Connection Styles ===== */

    /* TikTok flow node border */
    .flow-node.tiktok { border-color: #000000; }

    /* TikTok black dashed flow line */
    .dashed-line.tiktok-black { stroke: #000000; stroke-width: 2; stroke-dasharray: 6 4; }

    /* TikTok setup steps list */
    .tiktok-steps-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
      margin-top: 16px;
    }

    .tiktok-step {
      display: flex;
      gap: 12px;
      align-items: flex-start;
    }

    .tiktok-step-number {
      width: 24px;
      height: 24px;
      background: #000;
      color: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
      flex-shrink: 0;
    }

    .tiktok-step-content strong {
      display: block;
      color: #111827;
      font-size: 14px;
    }

    .tiktok-step-content p {
      margin: 4px 0 0 0;
      color: #6B7280;
      font-size: 14px;
    }

    /* Copy field for Business ID */
    .tiktok-copy-field {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
      padding: 8px 12px;
      background: #F9FAFB;
      border: 1px solid #E5E7EB;
      border-radius: 6px;
    }

    .tiktok-copy-field code {
      font-family: monospace;
      font-size: 14px;
      color: #111827;
    }

    .tiktok-copy-btn {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      background: #fff;
      border: 1px solid #D1D5DB;
      border-radius: 4px;
      font-size: 12px;
      color: #374151;
      cursor: pointer;
    }

    .tiktok-copy-btn:hover { background: #F3F4F6; }

    /* TikTok error alert */
    .tiktok-error-alert {
      display: flex;
      gap: 12px;
      padding: 16px;
      background: #FEF2F2;
      border: 1px solid #FECACA;
      border-radius: 8px;
      margin-top: 16px;
    }

    .tiktok-error-icon {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      color: #DC2626;
    }

    .tiktok-error-content {
      flex: 1;
    }

    .tiktok-error-title {
      font-weight: 600;
      color: #991B1B;
      margin-bottom: 4px;
    }

    .tiktok-error-body {
      color: #7F1D1D;
      font-size: 14px;
    }

    .tiktok-error-alert ul {
      margin: 8px 0 12px 0;
      padding-left: 20px;
    }

    .tiktok-error-alert li {
      margin: 4px 0;
      color: #7F1D1D;
    }

    /* Success celebration banner */
    .channel-success-banner {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 20px;
      background: linear-gradient(135deg, #ECFDF5 0%, #D1FAE5 100%);
      border: 1px solid #10B981;
      border-radius: 12px;
      margin-bottom: 24px;
    }

    .channel-success-banner .success-icon {
      width: 48px;
      height: 48px;
      background: #10B981;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .channel-success-banner .success-icon svg {
      width: 24px;
      height: 24px;
      color: #fff;
    }

    .channel-success-banner strong {
      font-size: 18px;
      color: #065F46;
      display: block;
    }

    .channel-success-banner p {
      color: #047857;
      margin: 4px 0 0 0;
      font-size: 14px;
    }

    /* Connect another channel CTA */
    .channel-next-cta {
      background: linear-gradient(135deg, #F5F3FF 0%, #FDF2F8 100%);
      border: 1px solid #E9D5FF;
      padding: 24px;
      border-radius: 12px;
      margin-top: 24px;
    }

    .channel-next-cta .cta-buttons {
      display: flex;
      gap: 12px;
      margin-top: 16px;
    }

    /* Screenshot container */
    .tiktok-screenshot {
      margin: 12px 0;
      border: 1px solid #E5E7EB;
      border-radius: 8px;
      overflow: hidden;
    }

    .tiktok-screenshot img {
      width: 100%;
      display: block;
    }

    .tiktok-screenshot-placeholder {
      background: #F3F4F6;
      padding: 40px;
      text-align: center;
      color: #9CA3AF;
      font-size: 14px;
    }

  </style>
  <!-- Confetti library for celebration -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
  <!-- ============================================
       PRICING SCREEN (Pre-Step) - Clean Style
       ============================================ -->
  <div id="pricing-screen" class="pricing-screen">
    <!-- Navigation -->
    <nav class="pricing-nav">
      <img src="popsixle_logo_gradient_circle_500 (1).png" alt="Popsixle" class="pricing-logo">
    </nav>

    <!-- Main Content -->
    <main class="pricing-main">
      <div class="pricing-header">
        <h1>Start Tracking All Your Conversions</h1>
        <p>Join the hundreds of brands using Popsixle to get 20% better ad performance</p>
      </div>

      <!-- Two Column Layout -->
      <div class="pricing-layout">
        <!-- Left Column - Pricing Card -->
        <div class="pricing-left">
          <div class="pricing-card">
            <div class="pricing-plan-name">Popsixle Core</div>
            <div class="pricing-amount">
              <span class="pricing-amount-value">$95</span>
              <span class="pricing-amount-period">/month</span>
            </div>

            <ul class="pricing-features">
              <li class="pricing-feature">
                <span class="pricing-feature-icon">&#10003;</span>
                <span>Includes the first $10,000/month in revenue</span>
              </li>
              <li class="pricing-feature">
                <span class="pricing-feature-plus">+</span>
                <span>$1 per $1,000 after that</span>
              </li>
              <li class="pricing-feature">
                <span class="pricing-feature-icon">&#10003;</span>
                <span>Setup in 10 minutes, no engineer required</span>
              </li>
              <li class="pricing-feature">
                <span class="pricing-feature-icon">&#10003;</span>
                <span>Send all your conversion data to Meta, Google & TikTok</span>
              </li>
            </ul>

            <button id="start-trial-btn" class="pricing-cta">
              Start 14-Day Free Trial
            </button>
          </div>
        </div>

        <!-- Right Column - Two Stacked Cards -->
        <div class="pricing-right">
          <!-- Why Brands Choose -->
          <div class="pricing-trust">
            <div class="pricing-trust-label">Why brands choose Popsixle</div>
            <ul class="pricing-trust-list">
              <li class="pricing-trust-item">
                <span class="pricing-trust-icon">&#10003;</span>
                <span>20% performance lift</span>
              </li>
              <li class="pricing-trust-item">
                <span class="pricing-trust-icon">&#10003;</span>
                <span>Easy install</span>
              </li>
              <li class="pricing-trust-item">
                <span class="pricing-trust-icon">&#10003;</span>
                <span>Real support from real people</span>
              </li>
            </ul>
          </div>

          <!-- Customer Testimonial -->
          <div class="pricing-quote">
            <p class="pricing-quote-text">"Popsixle has demystified our Facebook attribution. We're seeing higher quality event matches, site metrics and ad performance."</p>
            <p class="pricing-quote-author"> Cozy Earth, Popsixle customer since 2023</p>
          </div>
        </div>
      </div>

      <!-- Pricing Details - Below Layout -->
      <div class="pricing-details-section">
        <div class="pricing-details" id="pricing-details">
          <span class="pricing-details-link" onclick="togglePricingDetails()">
            View Pricing Details
            <span class="pricing-details-icon">&#9660;</span>
          </span>
          <div class="pricing-details-content">
            <div class="pricing-details-body">
              <p><strong>How pricing works:</strong></p>
              <ul>
                <li><strong>Base fee:</strong> $95/month after your 14-day trial</li>
                <li><strong>Usage fee:</strong> $1 per $1,000 in purchase revenue processed</li>
                <li><strong>Free tier:</strong> First $10,000/month in revenue is always free</li>
                <li><strong>Billing:</strong> 30-day billing cycles, charged in USD</li>
              </ul>
              <p><strong>Example:</strong> Processing $50,000/month = $95 + (40  $1) = <strong>$135/month</strong></p>
              <p style="margin-top: var(--space-3); color: var(--color-text-muted);">Cancel anytime. No long-term contract.</p>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- ============================================
       WIZARD SCREEN (Steps 1-5)
       ============================================ -->
  <div id="wizard-screen" class="wizard-screen">
    <!-- Two-Sidebar Layout (Elevar-style) -->
    <div class="wizard-app-layout">

      <!-- OUTER SIDEBAR (Elevar-style App Navigation) -->
      <aside class="outer-sidebar">
        <!-- Store Header -->
        <div class="outer-sidebar-header">
          <div class="outer-sidebar-store">
            <div class="outer-sidebar-store-icon">
              <img src="popsixle_logo_gradient_circle_500 (1).png" alt="Popsixle">
            </div>
            <div class="outer-sidebar-store-info">
              <span class="outer-sidebar-store-name">Zach's Shop</span>
            </div>
          </div>
        </div>

        <!-- Main Navigation -->
        <nav class="outer-sidebar-nav">
          <a href="#" class="outer-sidebar-nav-item active">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
            </svg>
            Popsixle Setup
          </a>
        </nav>

        <!-- Skip to Dashboard Section -->
        <div class="outer-sidebar-skip-section">
          <a href="#" class="outer-sidebar-skip-btn" id="skip-dashboard-trigger">
            Skip to Dashboard
          </a>
        </div>

        </aside>

      <!-- INNER LAYOUT (Setup Steps + Main Content) -->
      <div class="wizard-inner-layout">

        <!-- Setup Steps Panel -->
        <aside class="setup-steps-panel">
          <div class="setup-steps-header">
            <span class="setup-steps-title">Setup Steps</span>
            <span class="setup-steps-progress" id="setup-progress">0/5</span>
          </div>
          <div class="setup-steps-list">
            <ul class="wizard-step-list">
            <li class="wizard-step-item active" data-step="0">
              <span class="wizard-step-number">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" style="width:14px;height:14px;">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                </svg>
              </span>
              <div class="wizard-step-content">
                <span class="wizard-step-title">Overview</span>
              </div>
            </li>
            <li class="wizard-step-item" data-step="1">
              <span class="wizard-step-number">1</span>
              <div class="wizard-step-content">
                <span class="wizard-step-title">Product Category</span>
              </div>
            </li>
            <li class="wizard-step-item" data-step="2">
              <span class="wizard-step-number">2</span>
              <div class="wizard-step-content">
                <span class="wizard-step-title">Pixel Setup</span>
              </div>
            </li>
            <li class="wizard-step-item" data-step="3">
              <span class="wizard-step-number">3</span>
              <div class="wizard-step-content">
                <span class="wizard-step-title">Special Cases</span>
              </div>
            </li>
            <li class="wizard-step-item" data-step="4">
              <span class="wizard-step-number">4</span>
              <div class="wizard-step-content">
                <span class="wizard-step-title">Review</span>
              </div>
            </li>
            <li class="wizard-step-item" data-step="5">
              <span class="wizard-step-number">5</span>
              <div class="wizard-step-content">
                <span class="wizard-step-title">Connect Channels</span>
              </div>
            </li>
            </ul>
          </div>
          <!-- Connection Steps (shown when on channel form, replaces setup steps list) -->
          <div class="connection-steps-list" id="connection-steps-list" style="display: none;">
            <ul class="wizard-step-list">
              <li class="wizard-step-item active" id="connection-step-1">
                <span class="wizard-step-number">1</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">Add credentials</span>
                </div>
              </li>
              <li class="wizard-step-item" id="connection-step-2">
                <span class="wizard-step-number">2</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">Verify connection</span>
                </div>
              </li>
              <li class="wizard-step-item" id="connection-step-3">
                <span class="wizard-step-number">3</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">Optimize data quality</span>
                </div>
              </li>
              <li class="wizard-step-item" id="connection-step-4">
                <span class="wizard-step-number">4</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">Enable reporting</span>
                  <span class="wizard-step-optional">(optional)</span>
                </div>
              </li>
            </ul>
          </div>
          <!-- Google Connection Steps (shown when on Google form) -->
          <div class="connection-steps-list" id="google-connection-steps-list" style="display: none;">
            <ul class="wizard-step-list">
              <li class="wizard-step-item active" id="google-step-1">
                <span class="wizard-step-number">1</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">Connect account</span>
                </div>
              </li>
              <li class="wizard-step-item" id="google-step-2">
                <span class="wizard-step-number">2</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">Set up tracking</span>
                </div>
              </li>
              <li class="wizard-step-item" id="google-step-3">
                <span class="wizard-step-number">3</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">What's next</span>
                </div>
              </li>
            </ul>
          </div>
          <!-- TikTok Connection Steps (shown when on TikTok form) -->
          <div class="connection-steps-list" id="tiktok-connection-steps-list" style="display: none;">
            <ul class="wizard-step-list">
              <li class="wizard-step-item active" id="tiktok-step-1">
                <span class="wizard-step-number">1</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">Add Popsixle as partner</span>
                </div>
              </li>
              <li class="wizard-step-item" id="tiktok-step-2">
                <span class="wizard-step-number">2</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">Enter credentials</span>
                </div>
              </li>
              <li class="wizard-step-item" id="tiktok-step-3">
                <span class="wizard-step-number">3</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">Test connection</span>
                </div>
              </li>
              <li class="wizard-step-item" id="tiktok-step-4">
                <span class="wizard-step-number">4</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">Turn off Shopify</span>
                </div>
              </li>
              <li class="wizard-step-item" id="tiktok-step-5">
                <span class="wizard-step-number">5</span>
                <div class="wizard-step-content">
                  <span class="wizard-step-title">What's next</span>
                </div>
              </li>
            </ul>
          </div>
        </aside>

        <!-- Content Area (Main + Explanation side by side) -->
        <div class="wizard-content-area">
          <main class="wizard-main">
        <!-- Step 0: Overview -->
        <div class="step-panel active" data-step="0">
          <div class="overview-panel">
            <div class="overview-hero">
              <div class="overview-icon">
                <img src="popsixle_logo_gradient_circle_500 (1).png" alt="Popsixle">
              </div>
              <h1>Let's set up your conversion tracking</h1>
              <p>In just a few minutes, you'll have server-side tracking that sends accurate conversion data to ad platforms.</p>
            </div>

            <div class="overview-video">
              <div class="overview-video-play">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path fill-rule="evenodd" d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z" clip-rule="evenodd" />
                </svg>
              </div>
              <span class="overview-video-label">Watch: 2 min overview</span>
            </div>

            <div class="overview-steps">
              <div class="overview-step">
                <div class="overview-step-number">1</div>
                <div class="overview-step-text">
                  <div class="overview-step-title">Tell us about your store</div>
                  <div class="overview-step-desc">Select your product category</div>
                </div>
                <div class="overview-step-time">~1 min</div>
              </div>
              <div class="overview-step">
                <div class="overview-step-number">2</div>
                <div class="overview-step-text">
                  <div class="overview-step-title">Enable the Popsixle pixel</div>
                  <div class="overview-step-desc">Track 100% of your Shopify store conversion data</div>
                </div>
                <div class="overview-step-time">~4 min</div>
              </div>
              <div class="overview-step">
                <div class="overview-step-number">3</div>
                <div class="overview-step-text">
                  <div class="overview-step-title">Connect your ad channels</div>
                  <div class="overview-step-desc">Connect to Meta, Google, and/or TikTok</div>
                </div>
                <div class="overview-step-time">~5 min</div>
              </div>
            </div>

            <div class="overview-cta">
              <button class="overview-cta-btn" id="overview-start-btn">
                Get Started
              </button>
              <p class="overview-time-estimate">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Takes about 10 minutes to complete
              </p>
            </div>
          </div>
        </div>

        <!-- Step 1: Product Type -->
        <div class="step-panel" data-step="1">
          <div class="wizard-content-header">
            <h1>What type of products do you sell?</h1>
            <p>This helps us configure your tracking correctly.
              <span class="tooltip-trigger">
                <span class="tooltip-icon">&#9432;</span>
                <span class="tooltip-content">Different product categories have different tracking requirements and platform policies. Selecting the correct type ensures optimal setup.</span>
              </span>
            </p>
          </div>
          <div class="wizard-content-body">
            <!-- Product Type Radio Cards -->
            <div class="product-type-grid">
              <label class="product-type-card">
                <input type="radio" name="product-type" value="regular" class="product-type-input">
                <div class="product-type-content">
                  <div class="product-type-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                    </svg>
                  </div>
                  <div class="product-type-text">
                    <span class="product-type-title">Everyday Retail Products</span>
                    <span class="product-type-description">Clothing, home goods, electronics, accessories, etc</span>
                  </div>
                  <span class="product-type-indicator"></span>
                </div>
              </label>

              <label class="product-type-card">
                <input type="radio" name="product-type" value="health" class="product-type-input">
                <div class="product-type-content">
                  <div class="product-type-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" />
                    </svg>
                  </div>
                  <div class="product-type-text">
                    <span class="product-type-title">Health & Wellness</span>
                    <span class="product-type-description">Supplements, pain relief, health care, personal care, etc</span>
                  </div>
                  <span class="product-type-indicator"></span>
                </div>
              </label>

              <label class="product-type-card">
                <input type="radio" name="product-type" value="cbd" class="product-type-input">
                <div class="product-type-content">
                  <div class="product-type-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                    </svg>
                  </div>
                  <div class="product-type-text">
                    <span class="product-type-title">CBD or Hemp Products</span>
                    <span class="product-type-description">CBD-containing products, hemp-derived products, etc</span>
                  </div>
                  <span class="product-type-indicator"></span>
                </div>
              </label>

              <label class="product-type-card">
                <input type="radio" name="product-type" value="restricted" class="product-type-input">
                <div class="product-type-content">
                  <div class="product-type-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" />
                    </svg>
                  </div>
                  <div class="product-type-text">
                    <span class="product-type-title">Other Restricted Category</span>
                    <span class="product-type-description">Alcohol, firearms, adult content, gambling sites, other restricted products</span>
                  </div>
                  <span class="product-type-indicator"></span>
                </div>
              </label>
            </div>

            <!-- Unrestricted Info Banner (Hidden by default) -->
            <div id="unrestricted-banner" class="unrestricted-banner hidden">
              <div class="unrestricted-banner-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                </svg>
              </div>
              <div class="unrestricted-banner-content">
                <div class="unrestricted-banner-title">Your product category may require Popsixle Unrestricted</div>
                <div class="unrestricted-banner-text">
                  Health, wellness, CBD, and restricted products often face platform limitations.
                  Our Unrestricted offering was purpose built to provide compliant tracking solutions to these businesses.
                </div>
                <a href="https://unrestricted.popsixle.com" target="_blank" class="unrestricted-banner-link">
                  Learn about Popsixle Unrestricted
                </a>
              </div>
            </div>
          </div>
          <div class="wizard-footer">
            <div class="wizard-footer-left">
              <!-- No back button on step 1 -->
            </div>
            <div class="wizard-footer-right">
              <button class="wizard-btn wizard-btn-primary" id="step1-continue" disabled>Continue</button>
            </div>
          </div>
        </div>

        <!-- Step 2: Pixel Setup -->
        <div class="step-panel" data-step="2">
          <div class="wizard-content-header">
            <h1>Enable the Popsixle Pixel</h1>
            <p style="color: #1E293B;">The Popsixle Pixel tracks all activity on your site and sends conversion data back to ad platforms.</p>
          </div>
          <div class="wizard-content-body">
            <!-- Setup Instructions Card -->
            <div class="pixel-setup-card" style="padding: 20px; position: relative;">
              <!-- Status Badge - Top Right of Card -->
              <div class="pixel-status-badge status-not-detected" id="pixel-status-badge">
                <span class="status-dot"></span>
                <span class="status-text">Pixel Not Connected</span>
              </div>

              <div class="pixel-setup-steps" style="margin-bottom: 20px;">
                <div class="pixel-setup-step">
                  <span class="pixel-setup-step-number">1</span>
                  <span class="pixel-setup-step-text">Click the button below to open your Shopify Theme Editor</span>
                </div>
                <div class="pixel-setup-step">
                  <span class="pixel-setup-step-number">2</span>
                  <span class="pixel-setup-step-text">Find Popsixle in the <strong>"App embeds"</strong> left sidebar</span>
                </div>
                <div class="pixel-setup-step">
                  <span class="pixel-setup-step-number">3</span>
                  <span class="pixel-setup-step-text">Click to toggle <strong>"Popsixle"</strong> on and enable the Popsixle Pixel</span>
                </div>
                <div class="pixel-setup-step">
                  <span class="pixel-setup-step-number">4</span>
                  <span class="pixel-setup-step-text">Click <strong>Save</strong> in the top right of the screen</span>
                </div>
              </div>
              <div class="pixel-setup-actions">
                <button class="pixel-open-editor-btn" id="open-theme-editor-btn">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
                  </svg>
                  Open Theme Editor
                </button>
                <span class="pixel-show-how-link" id="show-how-link">Show me how</span>
              </div>
            </div>

            <!-- Demo Controls (for prototype testing) -->
            <div class="pixel-demo-controls">
              <div class="pixel-demo-controls-label">Demo Controls (preview states)</div>
              <div class="pixel-demo-controls-buttons">
                <button class="pixel-demo-btn" onclick="showPixelStatus('not-detected')">Not Connected (gray)</button>
                <button class="pixel-demo-btn" onclick="showPixelStatus('not-detected-checked')">Not Detected (red)</button>
                <button class="pixel-demo-btn" onclick="showPixelStatus('enabled')">Enabled (green)</button>
              </div>
            </div>
          </div>
          <div class="wizard-footer">
            <div class="wizard-footer-left">
              <button class="wizard-btn wizard-btn-secondary" id="back-btn-2">Back</button>
            </div>
            <div class="wizard-footer-right">
              <button class="wizard-btn wizard-btn-primary" id="step2-continue" disabled>Continue</button>
            </div>
          </div>
        </div>

        <!-- Step 3: Special Cases -->
        <div class="step-panel" data-step="3">
          <div class="wizard-content-header">
            <h1>Any Special Setup Needs?</h1>
            <p style="color: #1E293B;">Alert our team if any of these uncommon conditions apply to your store. Most merchants can skip this step.</p>
          </div>
          <div class="wizard-content-body">
            <div class="special-cases-list">
              <!-- Landing Pages Outside of Shopify -->
              <div class="special-case-item" id="special-case-landing">
                <div class="special-case-header">
                  <div class="special-case-info">
                    <div class="special-case-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418" />
                      </svg>
                    </div>
                    <div class="special-case-text">
                      <div class="special-case-title">Landing Pages Outside of Shopify</div>
                      <div class="special-case-description">Track conversions from external landing pages</div>
                    </div>
                  </div>
                  <label class="special-case-toggle">
                    <input type="checkbox" id="toggle-landing">
                    <span class="special-case-toggle-slider"></span>
                  </label>
                </div>
                <div class="special-case-url-input" id="landing-url-input" style="display: none;">
                  <label for="landing-url">Enter the landing page URL below (use commas if there are multiple)</label>
                  <input type="text" id="landing-url" placeholder="https://your-landing-page.com" class="url-input-field">
                </div>
              </div>

              <!-- Headless Storefront -->
              <div class="special-case-item" id="special-case-headless">
                <div class="special-case-header">
                  <div class="special-case-info">
                    <div class="special-case-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M14.25 9.75L16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z" />
                      </svg>
                    </div>
                    <div class="special-case-text">
                      <div class="special-case-title">Headless Storefront</div>
                      <div class="special-case-description">Using Hydrogen, custom React/Next.js, or other headless setup</div>
                    </div>
                  </div>
                  <label class="special-case-toggle">
                    <input type="checkbox" id="toggle-headless">
                    <span class="special-case-toggle-slider"></span>
                  </label>
                </div>
              </div>

              <!-- Custom Cart -->
              <div class="special-case-item" id="special-case-cart">
                <div class="special-case-header">
                  <div class="special-case-info">
                    <div class="special-case-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
                      </svg>
                    </div>
                    <div class="special-case-text">
                      <div class="special-case-title">Custom Cart Implementation</div>
                      <div class="special-case-description">Using a third-party cart like Rebuy, Slide Cart, or custom AJAX cart</div>
                    </div>
                  </div>
                  <label class="special-case-toggle">
                    <input type="checkbox" id="toggle-cart">
                    <span class="special-case-toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>

            <div class="special-cases-note">
              Not sure? Chat with one of our team members now
            </div>
          </div>
          <div class="wizard-footer">
            <div class="wizard-footer-left">
              <button class="wizard-btn wizard-btn-secondary" id="back-btn-3">Back</button>
            </div>
            <div class="wizard-footer-right">
              <button class="wizard-btn wizard-btn-primary" id="step3-continue">Continue</button>
            </div>
          </div>
        </div>

        <!-- Step 4: Review -->
        <div class="step-panel" data-step="4">
          <div class="wizard-content-header">
            <h1>Review Your Setup</h1>
            <p style="color: #1E293B;">Confirm your configuration before connecting channels.</p>
          </div>
          <div class="wizard-content-body">
            <div class="review-list">
              <!-- Product Type -->
              <div class="review-item">
                <div class="review-item-left">
                  <div class="review-item-icon success">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
                    </svg>
                  </div>
                  <div class="review-item-content">
                    <span class="review-item-label">Product Category</span>
                    <span class="review-item-value" id="review-product-type">Regular Products</span>
                  </div>
                </div>
                <a href="#" class="review-item-edit" data-edit-step="1">Edit</a>
              </div>

              <!-- Pixel Status -->
              <div class="review-item">
                <div class="review-item-left">
                  <div class="review-item-icon success">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  </div>
                  <div class="review-item-content">
                    <span class="review-item-label">Popsixle Pixel</span>
                    <span class="review-item-value" id="review-pixel-status">Enabled</span>
                  </div>
                </div>
                <a href="#" class="review-item-edit" data-edit-step="2">Edit</a>
              </div>

              <!-- Special Cases -->
              <div class="review-item">
                <div class="review-item-left">
                  <div class="review-item-icon" id="review-special-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" />
                    </svg>
                  </div>
                  <div class="review-item-content">
                    <span class="review-item-label">Special Cases</span>
                    <span class="review-item-value" id="review-special-cases">None selected</span>
                  </div>
                </div>
                <a href="#" class="review-item-edit" data-edit-step="3">Edit</a>
              </div>
            </div>

            <div class="review-summary">
              <span class="review-summary-icon"></span>
              <span class="review-summary-text">You're ready to connect your ad channels</span>
            </div>
          </div>
          <div class="wizard-footer">
            <div class="wizard-footer-left">
              <button class="wizard-btn wizard-btn-secondary" id="back-btn-4">Back</button>
            </div>
            <div class="wizard-footer-right">
              <button class="wizard-btn wizard-btn-primary" id="step4-continue">Continue</button>
            </div>
          </div>
        </div>

        <!-- Step 5: Connect Channels -->
        <div class="step-panel" data-step="5">
          <div class="wizard-content-header">
            <h1>Connect Your Channels</h1>
            <p style="color: #1E293B;">Send your conversion data to ad platforms to improve your ad performance</p>
          </div>
          <div class="wizard-content-body">
            <!-- Data Flow Visual -->
            <div class="data-flow-visual">
              <!-- Source: Shopify (store name pulled dynamically) -->
              <div class="flow-source">
                <div class="flow-node shopify">
                  <img src="assets/Shopify_Logo.png" alt="Shopify">
                </div>
                <span class="flow-node-label" id="flow-store-name">Zach's Shop</span>
              </div>

              <!-- Line: Shopify to Popsixle (green dashed - always visible) -->
              <svg class="flow-line-svg" width="60" height="20" style="margin: 0 8px;">
                <path class="dashed-line green" d="M 0,10 L 60,10" />
              </svg>

              <!-- Hub: Popsixle (actual logo image) -->
              <div class="flow-hub">
                <div class="flow-node popsixle">
                  <img src="popsixle_logo_gradient_circle_500 (1).png" alt="Popsixle">
                </div>
                <span class="flow-node-sublabel">Popsixle Pixel</span>
              </div>

              <!-- Branching lines to destinations (purple dashed - HIDDEN initially) -->
              <svg class="flow-line-svg branch-lines" width="80" height="420" viewBox="0 0 80 420" style="margin: 0 8px;">
                <!-- Main trunk line (shared) -->
                <path class="dashed-line purple trunk" d="M 0,210 L 30,210" />
                <!-- Individual branches - no overlap -->
                <path class="dashed-line purple" id="line-meta" d="M 30,210 L 30,56 L 80,56" />
                <path class="dashed-line purple" id="line-google" d="M 30,210 L 80,210" />
                <path class="dashed-line purple" id="line-tiktok" d="M 30,210 L 30,364 L 80,364" />
              </svg>

              <!-- Destinations -->
              <div class="flow-destinations">
                <!-- Meta -->
                <div class="flow-destination-wrapper" data-channel="meta">
                  <div class="flow-destination-card">
                    <div class="destination-icon meta">
                      <img src="assets/meta-color.png" alt="Meta">
                    </div>
                    <div class="destination-info">
                      <span class="destination-name">Meta</span>
                      <span class="channel-status-badge" id="dest-meta-status">
                        <span class="status-dot"></span>
                        Not Connected
                      </span>
                    </div>
                  </div>
                  <button class="flow-connect-btn" id="connect-meta">Connect</button>
                </div>

                <!-- Google -->
                <div class="flow-destination-wrapper" data-channel="google">
                  <div class="flow-destination-card">
                    <div class="destination-icon google">
                      <svg width="36" height="36" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                      </svg>
                    </div>
                    <div class="destination-info">
                      <span class="destination-name">Google Ads</span>
                      <span class="channel-status-badge" id="dest-google-status">
                        <span class="status-dot"></span>
                        Not Connected
                      </span>
                    </div>
                  </div>
                  <button class="flow-connect-btn" id="connect-google">Connect</button>
                </div>

                <!-- TikTok -->
                <div class="flow-destination-wrapper" data-channel="tiktok">
                  <div class="flow-destination-card">
                    <div class="destination-icon tiktok">
                      <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
                        <path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"/>
                      </svg>
                    </div>
                    <div class="destination-info">
                      <span class="destination-name">TikTok</span>
                      <span class="channel-status-badge" id="dest-tiktok-status">
                        <span class="status-dot"></span>
                        Not Connected
                      </span>
                    </div>
                  </div>
                  <button class="flow-connect-btn" id="connect-tiktok" onclick="navigateToStep('5-tiktok'); showTikTokSection('tiktok-partner-section');">Connect</button>
                </div>
              </div>
            </div>

          </div>
          <div class="wizard-footer">
            <div class="wizard-footer-left">
              <button class="wizard-btn wizard-btn-secondary" id="back-btn-5">Back</button>
            </div>
            <div class="wizard-footer-right">
              <div class="dashboard-btn-wrapper" id="dashboard-btn-wrapper">
                <button class="wizard-btn wizard-btn-primary" id="go-to-dashboard" disabled>Go to Dashboard</button>
                <span class="dashboard-tooltip">Connect at least one channel to continue</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Step 5-Meta: Meta Connection Form -->
        <div class="step-panel" data-step="5-meta">
          <div class="wizard-content-header" style="position: relative;">
            <!-- Status Badge - Top Right of Header -->
            <div class="connection-test-badge status-pending" id="meta-test-badge">
              <span class="status-dot"></span>
              <span class="status-text">Not Connected</span>
            </div>
            <h1>Connect to Meta</h1>
            <p style="color: #1E293B;">Send your conversion data to Meta to improve your ad performance</p>
            <!-- Help Link - below header -->
            <a href="https://info.popsixle.com/knowledge/popsixle-onboarding-fb-pixel-dataset" target="_blank" class="channel-form-help-link" style="margin-top: 12px;">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
              </svg>
              Need help? Read our step-by-step guide
            </a>
          </div>
          <div class="wizard-content-body">
            <!-- Data Flow Visual - Single Channel -->
            <div class="channel-connect-flow">
              <div class="flow-source">
                <div class="flow-node shopify">
                  <img src="assets/Shopify_Logo.png" alt="Shopify">
                </div>
                <span class="flow-node-label">Your Store</span>
              </div>
              <svg class="flow-line-svg" width="48" height="20">
                <path class="dashed-line green" d="M 0,10 L 48,10" />
              </svg>
              <div class="flow-hub">
                <div class="flow-node popsixle">
                  <img src="popsixle_logo_gradient_circle_500 (1).png" alt="Popsixle">
                </div>
                <span class="flow-node-label">Popsixle Pixel</span>
              </div>
              <svg class="flow-line-svg" width="48" height="20">
                <path class="dashed-line purple" d="M 0,10 L 48,10" />
              </svg>
              <div class="flow-destination">
                <div class="flow-node meta">
                  <img src="assets/meta-color.png" alt="Meta" style="width: 40px; height: 40px;">
                </div>
              </div>
            </div>

            <!-- Step 1: Credentials Section -->
            <div class="meta-credentials-section" id="meta-credentials-section">
              <!-- Form Container -->
              <div class="channel-form-container">
                <!-- Intro Card -->
                <div class="channel-connect-card">
                  <label class="channel-form-label">Add your Meta credentials</label>
                  <div class="channel-form-helper">
                    Enter the three values below from your Meta Events Manager. These let Popsixle send conversion events directly to your Meta Ad Account.
                  </div>
                </div>

                <!-- Pixel/Dataset ID Card -->
                <div class="channel-connect-card">
                  <label class="channel-form-label">Pixel/Dataset ID</label>
                  <div class="channel-form-helper">Found in Meta Events Manager: Select your Dataset  Settings Tab  Top of page</div>
                  <input type="text" id="meta-pixel-id" class="channel-form-input" placeholder="Paste the Pixel/Dataset ID here">
                  <div class="channel-form-hint">Your Pixel/Dataset ID will appear as a number like 1234567890</div>
                  <div class="channel-form-error">Please enter a valid Pixel/Dataset ID</div>
                </div>

                <!-- CAPI Token Card -->
                <div class="channel-connect-card">
                  <label class="channel-form-label">Conversions API Access Token</label>
                  <div class="channel-form-helper">Generate in Meta Events Manager  Settings  Conversions API  Generate Token</div>
                  <input type="text" id="meta-capi-token" class="channel-form-input" placeholder="Paste the generated CAPI token here">
                  <div class="channel-form-hint">Your CAPI token will appear as a long alpha-numeric string</div>
                  <div class="channel-form-error">Please enter a valid CAPI token</div>
                </div>

                <!-- Test Event Code Card -->
                <div class="channel-connect-card">
                  <label class="channel-form-label">Test Event Code</label>
                  <div class="channel-form-helper">Found in Meta Events Manager  Test Events tab</div>
                  <input type="text" id="meta-test-code" class="channel-form-input" placeholder="Paste the Test Event Code here">
                  <div class="channel-form-hint">Starts with TEST followed by numbers like TEST12345</div>
                  <div class="channel-form-error">Please enter a valid Test Event Code</div>
                </div>

                <!-- Demo Controls (for prototype testing) -->
                <div class="pixel-demo-controls">
                  <div class="pixel-demo-controls-label">Demo Controls (preview states)</div>
                  <div class="pixel-demo-controls-buttons">
                    <button class="pixel-demo-btn" onclick="showMetaTestStatus('pending')">Not Connected</button>
                    <button class="pixel-demo-btn" onclick="showMetaTestStatus('testing')">Testing</button>
                    <button class="pixel-demo-btn" onclick="showMetaTestStatus('success')">Connected</button>
                    <button class="pixel-demo-btn" onclick="showMetaTestStatus('failed')">Failed</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Step 3: Data Sharing Section (shown after successful connection test) -->
            <div class="meta-data-sharing-section" id="meta-data-sharing-section" style="display: none;">
              <div class="channel-form-container">
                <!-- Card 1: Why -->
                <div class="channel-connect-card">
                  <label class="channel-form-label">Optimize your data quality</label>
                  <div class="channel-form-helper">
                    You're connected to Meta! But there's one important step: Shopify's built-in Meta connection will send duplicate events alongside Popsixle, which hurts your attribution accuracy. Disable it to keep your data clean.
                  </div>
                </div>

                <!-- Card 2: How -->
                <div class="channel-connect-card">
                  <label class="channel-form-label">How to disable</label>
                  <div class="channel-form-helper">
                    In your Shopify Admin, go to <strong>Sales Channels &rarr; Facebook &amp; Instagram &rarr; Settings</strong>. In the <strong>Share data</strong> section, click <strong>Change</strong> and toggle off data sharing.
                  </div>
                  <div class="data-sharing-screenshot" style="margin-top: 16px;">
                    <img src="assets/Data_Sharing2.PNG" alt="Shopify Data Sharing toggle" class="data-sharing-screenshot-img" style="max-width: 80%; border-radius: 8px; border: 1px solid #E2E8F0;">
                  </div>
                </div>

              </div>

              <div class="data-sharing-confirmation">
                <button type="button" class="wizard-btn wizard-btn-primary" id="meta-data-sharing-confirm" onclick="showMetaAdAccountStep()">
                  I've disabled Data Sharing
                </button>
              </div>
            </div>

            <!-- Step 4: Ad Account Section (shown after Data Sharing) -->
            <div class="meta-ad-account-section" id="meta-ad-account-section" style="display: none;">
              <!-- Manual Version -->
              <div class="ad-account-version" id="ad-account-manual">
                <div class="channel-form-container">
                  <!-- Card 1: Why -->
                  <div class="channel-connect-card">
                    <label class="channel-form-label">Add your Ad Account <span class="ad-account-optional-badge">Optional</span></label>
                    <div class="channel-form-helper">
                      Enables Pre/Post Performance Reports and Attribution Accuracy Reports in your Popsixle dashboard.
                    </div>
                  </div>

                  <!-- Card 2: Steps + Input -->
                  <div class="channel-connect-card">
                    <label class="channel-form-label">How to add</label>
                    <ol style="margin: 8px 0 0 0; padding-left: 20px; color: #475569; font-size: 14px; line-height: 1.8;">
                      <li>In Meta Business Manager, go to <strong>Accounts  Ad Accounts</strong></li>
                      <li>Find your ad account and click <strong>Assign Partners</strong></li>
                      <li>Enter Popsixle's Business ID: <strong>600470493346123</strong></li>
                      <li>Select <strong>"View performance"</strong> access level</li>
                      <li>Enter your Ad Account ID below</li>
                    </ol>
                    <div style="margin-top: 16px;">
                      <input type="text" id="meta-ad-account-id" class="channel-form-input" placeholder="Enter your Ad Account ID">
                      <div class="channel-form-hint">Found in Meta Business Manager under Accounts  Ad Accounts</div>
                      <div class="channel-form-hint" style="margin-top: 8px; font-style: normal; color: #64748B;">
                        <strong>Note:</strong> Business accounts only. Personal ad accounts cannot be connected.
                      </div>
                    </div>
                  </div>
                </div>

                <div class="ad-account-actions">
                  <button type="button" class="wizard-btn wizard-btn-secondary" id="meta-skip-ad-account">
                    Skip for now
                  </button>
                  <button type="button" class="wizard-btn wizard-btn-primary" id="meta-confirm-ad-account">
                    Confirm Ad Account
                  </button>
                </div>
              </div>

              <!-- OAuth Version (pending Facebook approval) -->
              <div class="ad-account-version" id="ad-account-oauth" style="display: none;">
                <div class="channel-form-container">
                  <div class="channel-connect-card">
                    <label class="channel-form-label">Add your Ad Account <span class="ad-account-optional-badge">Optional</span></label>
                    <div class="channel-form-helper">
                      Enables Pre/Post Performance Reports and Attribution Accuracy Reports in your Popsixle dashboard.
                    </div>
                    <button type="button" class="oauth-connect-btn meta-oauth" id="meta-ad-account-oauth" style="margin-top: 16px;">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                      </svg>
                      Connect with Facebook
                    </button>
                  </div>
                </div>

                <div class="ad-account-actions">
                  <button type="button" class="wizard-btn wizard-btn-secondary" id="meta-skip-ad-account-oauth">
                    Skip for now
                  </button>
                </div>
              </div>

              <!-- Demo toggle for team review -->
              <div class="pixel-demo-controls">
                <div class="pixel-demo-controls-label">Demo Controls (preview version)</div>
                <div class="pixel-demo-controls-buttons">
                  <button class="pixel-demo-btn demo-version-btn active" data-version="manual">Manual</button>
                  <button class="pixel-demo-btn demo-version-btn" data-version="oauth">OAuth</button>
                </div>
              </div>
            </div>
          </div>
          <div class="wizard-footer" id="meta-wizard-footer">
            <div class="wizard-footer-left">
              <button type="button" class="wizard-btn wizard-btn-secondary" id="meta-back-btn">Back</button>
            </div>
            <div class="wizard-footer-right">
              <button type="button" class="wizard-btn wizard-btn-primary" id="meta-submit-btn" onclick="testMetaConnection()">Test Meta Connection</button>
            </div>
          </div>
        </div>

        <!-- Step 5-Google: Google Ads Connection Form -->
        <div class="step-panel" data-step="5-google">
          <div class="wizard-content-header" style="position: relative;">
            <!-- Status Badge - Top Right of Header -->
            <div class="connection-test-badge status-pending" id="google-test-badge">
              <span class="status-dot"></span>
              <span class="status-text">Not Connected</span>
            </div>
            <h1>Connect to Google Ads</h1>
            <p style="color: #1E293B;">Send your conversion data to Google to improve your ad targeting and campaign performance</p>
            <!-- Help Link - below header -->
            <a href="https://info.popsixle.com/knowledge/adding-a-popsixle-google-data-connection" target="_blank" class="channel-form-help-link" style="margin-top: 12px;">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
              </svg>
              Need help? Read our step-by-step guide
            </a>
          </div>
          <div class="wizard-content-body">
            <!-- Data Flow Visual - Single Channel -->
            <div class="channel-connect-flow">
              <div class="flow-source">
                <div class="flow-node shopify">
                  <img src="assets/Shopify_Logo.png" alt="Shopify">
                </div>
                <span class="flow-node-label">Your Store</span>
              </div>
              <svg class="flow-line-svg" width="48" height="20">
                <path class="dashed-line green" d="M 0,10 L 48,10" />
              </svg>
              <div class="flow-hub">
                <div class="flow-node popsixle">
                  <img src="popsixle_logo_gradient_circle_500 (1).png" alt="Popsixle">
                </div>
                <span class="flow-node-label">Popsixle Pixel</span>
              </div>
              <svg class="flow-line-svg" width="48" height="20">
                <path class="dashed-line" style="stroke: #4285F4; stroke-width: 3; stroke-dasharray: 12, 10; fill: none; stroke-linecap: round;" d="M 0,10 L 48,10" />
              </svg>
              <div class="flow-destination">
                <div class="flow-node" style="border: 2px solid #4285F4; background: white;">
                  <svg width="40" height="40" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                  </svg>
                </div>
              </div>
            </div>

            <!-- Phase 1: Account ID + OAuth -->
            <div class="google-connect-section" id="google-connect-section">
              <div class="channel-form-container">
                <!-- Account ID Card -->
                <div class="channel-connect-card">
                  <label class="channel-form-label">Enter your Google Ads Account ID</label>
                  <div class="channel-form-helper">
                    Found in Google Ads: click the Settings gear icon, then Account Settings. Your Customer ID is displayed at the top of the page.
                  </div>
                  <input type="text" id="google-account-id" class="channel-form-input" placeholder="Paste your Account ID (xxx-xxx-xxxx)">
                  <div class="channel-form-hint">Format: xxx-xxx-xxxx (10 digits with dashes)</div>
                  <div class="channel-form-error">Please enter a valid Google Ads Account ID</div>
                </div>

                <!-- Google OAuth Card -->
                <div class="channel-connect-card">
                  <label class="channel-form-label">Authenticate with Google</label>
                  <div class="channel-form-helper">
                    Sign in with your Google account to authorize Popsixle to send conversion data to your Google Ads account.
                  </div>
                  <button type="button" class="google-signin-btn" id="google-signin-btn" onclick="startGoogleOAuth()">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                      <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                      <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                      <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                      <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Sign in with Google
                  </button>
                  <!-- OAuth Error (hidden by default) -->
                  <div class="google-error-alert" id="google-oauth-error" style="display: none;">
                    <div class="google-error-alert-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="#DC2626" style="width: 20px; height: 20px;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" /></svg>
                    </div>
                    <div class="google-error-alert-content">
                      <div class="google-error-alert-title">Unable to connect your Google account</div>
                      <div class="google-error-alert-body">The sign-in window was closed or access wasn't granted. Popsixle needs permission to send conversion data to your Google Ads account.</div>
                      <button type="button" class="google-error-retry" onclick="retryGoogleOAuth()">Try again</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Phase 2: Create Conversion Action (shown after OAuth success) -->
            <div class="google-conversion-section" id="google-conversion-section" style="display: none;">
              <div class="channel-form-container">
                <div class="channel-connect-card">
                  <label class="channel-form-label">Set up conversion tracking</label>
                  <div class="channel-form-helper">
                    Popsixle needs a conversion action in your Google Ads account to send purchase data. It starts as Secondary (reporting-only) so your existing campaigns won't be affected.
                  </div>
                  <button type="button" class="wizard-btn wizard-btn-primary" id="google-create-conversion-btn" onclick="createGoogleConversionAction()" style="margin-top: 12px;">
                    Create Conversion Action
                  </button>
                  <!-- Conversion Action Error (hidden by default) -->
                  <div class="google-error-alert" id="google-conversion-error" style="display: none;">
                    <div class="google-error-alert-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="#DC2626" style="width: 20px; height: 20px;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" /></svg>
                    </div>
                    <div class="google-error-alert-content">
                      <div class="google-error-alert-title">Couldn't create conversion action</div>
                      <div class="google-error-alert-body">The connected Google account doesn't have the right permissions. You need <strong>Standard</strong> or <strong>Admin</strong> access to the Google Ads account to create conversion actions. <a href="https://support.google.com/google-ads/answer/9978556" target="_blank">Learn about access levels</a></div>
                      <button type="button" class="google-error-retry" onclick="retryGoogleConversionAction()">Try again</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Phase 3: Verify Connection (shown after conversion action created) -->
            <div class="google-verify-section" id="google-verify-section" style="display: none;">
              <div class="channel-form-container">
                <div class="channel-connect-card">
                  <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="#10B981" style="width: 24px; height: 24px;"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <label class="channel-form-label" style="margin: 0;">Connection Verified</label>
                  </div>
                  <div class="channel-form-helper">
                    Your Google Ads account is now connected and a Purchase conversion action has been created. Popsixle will automatically start sending conversion data within approximately 6 hours.
                  </div>
                </div>

                <div class="channel-connect-card">
                  <label class="channel-form-label">What to expect</label>
                  <div class="channel-form-helper">
                    Google Ads needs approximately 6 hours to propagate your new conversion action. After that, Popsixle will automatically begin sending server events  no action needed from you.
                  </div>
                  <div class="channel-form-helper" style="margin-top: 8px;">
                    To confirm data is flowing, check Google Ads tomorrow: go to Goals, then Conversions, and look for "purchase-popsixle-yourstore" with Secondary status.
                  </div>
                </div>
              </div>
            </div>

            <!-- Phase 4: What's Next (shown after verify) -->
            <div class="google-whatsnext-section" id="google-whatsnext-section" style="display: none;">
              <div class="channel-form-container">
                <div class="channel-connect-card">
                  <label class="channel-form-label">Secondary to primary</label>
                  <div class="channel-form-helper">
                    Your Popsixle conversion action starts as Secondary (reporting-only), running alongside your existing Google Ads tracking. After 2 or more weeks and at least 20-30 tracked conversions, you can upgrade it to Primary status for maximum attribution accuracy.
                  </div>
                </div>

                <div class="channel-connect-card">
                  <label class="channel-form-label">Monitor your performance</label>
                  <div class="channel-form-helper">
                    Check your Google Ads Conversions page to compare Popsixle-attributed conversions against your existing tracking. Look for improved match rates and conversion counts.
                  </div>
                </div>
              </div>
            </div>

            <!-- Demo Controls -->
            <div class="pixel-demo-controls">
              <div class="pixel-demo-controls-label">Demo Controls (preview version)</div>
              <div class="pixel-demo-controls-buttons" id="google-demo-buttons">
                <button class="pixel-demo-btn" onclick="resetGoogleForm()">Reset</button>
                <!-- Phase-specific buttons swapped by showGoogleSection() -->
              </div>
            </div>
          </div>
          <div class="wizard-footer" id="google-wizard-footer">
            <div class="wizard-footer-left">
              <button type="button" class="wizard-btn wizard-btn-secondary" id="google-back-btn">Back</button>
            </div>
            <div class="wizard-footer-right">
              <button type="button" class="wizard-btn wizard-btn-primary" id="google-continue-btn" style="display: none;" onclick="navigateGoogleStep('next')">Continue</button>
              <button type="button" class="wizard-btn wizard-btn-primary" id="google-done-btn" style="display: none;" onclick="completeChannelConnection('google')">Done  Return to Channels</button>
            </div>
          </div>
        </div>

        <!-- ===== STEP 5 - TIKTOK CONNECTION ===== -->
        <div class="step-panel" data-step="5-tiktok">
          <div class="wizard-content-header" style="position: relative;">
            <!-- Status Badge - Top Right of Header -->
            <div class="connection-test-badge status-pending" id="tiktok-status-badge">
              <span class="status-dot"></span>
              <span class="status-text">Not Connected</span>
            </div>
            <h1>Connect to TikTok</h1>
            <p style="color: #1E293B;">Send your conversion data to TikTok to improve ad targeting and campaign performance</p>
            <a href="https://popsixle.frontkb.com/en/articles/7938177" target="_blank" class="channel-form-help-link" style="margin-top: 12px;">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
              </svg>
              Need help? Read our step-by-step guide
            </a>
          </div>
          <div class="wizard-content-body">
            <!-- Data Flow Visual - Single Channel -->
            <div class="channel-connect-flow">
              <div class="flow-source">
                <div class="flow-node shopify">
                  <img src="assets/Shopify_Logo.png" alt="Shopify">
                </div>
                <span class="flow-node-label">Your Store</span>
              </div>
              <svg class="flow-line-svg" width="48" height="20">
                <path class="dashed-line green" d="M 0,10 L 48,10" />
              </svg>
              <div class="flow-hub">
                <div class="flow-node popsixle">
                  <img src="popsixle_logo_gradient_circle_500 (1).png" alt="Popsixle">
                </div>
                <span class="flow-node-label">Popsixle Pixel</span>
              </div>
              <svg class="flow-line-svg" width="48" height="20">
                <path class="dashed-line tiktok-black" d="M 0,10 L 48,10" />
              </svg>
              <div class="flow-destination">
                <div class="flow-node" style="border: 2px solid #000000; background: white;">
                  <svg width="40" height="40" viewBox="0 0 24 24">
                    <path fill="#000000" d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"/>
                  </svg>
                </div>
              </div>
            </div>
                <!-- Section 1: Partner Setup -->
                <div id="tiktok-partner-section">
                  <div class="channel-connect-card">
                    <label class="channel-form-label">Add Popsixle as a Partner</label>
                    <div class="channel-form-helper">
                      Before connecting, you need to add Popsixle as a partner in your TikTok Business Center.
                      This gives Popsixle permission to send conversion events to your TikTok Pixel.
                    </div>

                    <div class="tiktok-steps-list">
                      <div class="tiktok-step">
                        <span class="tiktok-step-number">1</span>
                        <div class="tiktok-step-content">
                          <strong>Open TikTok Business Center</strong>
                          <p>Go to <a href="https://business.tiktok.com" target="_blank">business.tiktok.com</a> and sign in</p>
                        </div>
                      </div>
                      <div class="tiktok-step">
                        <span class="tiktok-step-number">2</span>
                        <div class="tiktok-step-content">
                          <strong>Navigate to Partners</strong>
                          <p>Click Users  Partners  Add Partner</p>
                        </div>
                      </div>
                      <div class="tiktok-step">
                        <span class="tiktok-step-number">3</span>
                        <div class="tiktok-step-content">
                          <strong>Enter Popsixle's Business ID</strong>
                          <div class="tiktok-copy-field">
                            <code id="popsixle-business-id">7306194182450888705</code>
                            <button type="button" class="tiktok-copy-btn" onclick="copyBusinessId()">
                              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                              </svg>
                              Copy
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="tiktok-step">
                        <span class="tiktok-step-number">4</span>
                        <div class="tiktok-step-content">
                          <strong>Assign Events Manager access</strong>
                          <p>Select "Events Manager" as the asset type, then grant "Manage" permission</p>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>

                <!-- Section 2: Credentials -->
                <div id="tiktok-credentials-section" style="display: none;">
                  <div class="channel-connect-card">
                    <label class="channel-form-label">Enter your TikTok Pixel ID</label>
                    <div class="channel-form-helper">
                      Found in TikTok Events Manager: click your pixel name, then copy the Pixel ID from the overview page.
                    </div>
                    <input type="text" id="tiktok-pixel-id" class="channel-form-input" placeholder="e.g., CXXXXXXXXXXXXXXX">
                    <div class="channel-form-error" id="tiktok-pixel-id-error" style="display: none;">Please enter a valid Pixel ID</div>
                  </div>

                  <div class="channel-connect-card">
                    <label class="channel-form-label">Enter your Access Token</label>
                    <div class="channel-form-helper">
                      Generate this in TikTok: Events Manager  Settings  System Users  Generate Token  select your pixel.
                    </div>
                    <input type="text" id="tiktok-access-token" class="channel-form-input" placeholder="Paste your access token">
                    <div class="channel-form-error" id="tiktok-access-token-error" style="display: none;">Please enter a valid Access Token</div>
                  </div>

                  <div class="channel-connect-card">
                    <label class="channel-form-label">Enter your Server Events Test Code</label>
                    <div class="channel-form-helper">
                      Found in TikTok: Events Manager  your pixel  Test Events tab. Look for "Server events test code".
                    </div>
                    <input type="text" id="tiktok-test-code" class="channel-form-input" placeholder="e.g., TEST12345">
                    <div class="channel-form-error" id="tiktok-test-code-error" style="display: none;">Please enter a valid Test Code</div>
                  </div>

                </div>

                <!-- Section 3: Test Connection -->
                <div id="tiktok-test-section" style="display: none;">
                  <div class="channel-connect-card" id="tiktok-test-card">
                    <label class="channel-form-label">Send a test event</label>
                    <div class="channel-form-helper">
                      Click the button below to send a test conversion event to TikTok. Then check your
                      TikTok Events Manager  Test Events tab to confirm it arrived.
                    </div>
                    <button type="button" class="wizard-btn wizard-btn-primary" id="tiktok-send-test-btn" onclick="sendTikTokTestEvent()">
                      Confirm & Send Test Event
                    </button>
                  </div>

                  <div class="channel-connect-card" id="tiktok-test-success" style="display: none;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="10" fill="#10B981"/>
                        <path d="M8 12l3 3 5-6" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                      <label class="channel-form-label" style="margin: 0;">Test Event Sent</label>
                    </div>
                    <div class="channel-form-helper">
                      A test event has been sent to TikTok. Check your Events Manager  Test Events tab
                      to confirm it arrived. Events typically appear within 1-2 minutes.
                    </div>
                  </div>

                  <div class="tiktok-error-alert" id="tiktok-test-error" style="display: none;">
                    <div class="tiktok-error-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="10" fill="#DC2626"/>
                        <path d="M12 8v4M12 16h.01" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
                      </svg>
                    </div>
                    <div class="tiktok-error-content">
                      <div class="tiktok-error-title">Test event failed</div>
                      <div class="tiktok-error-body">
                        We couldn't send a test event to TikTok. Please check that:
                        <ul>
                          <li>Your Pixel ID is correct</li>
                          <li>Your Access Token hasn't expired</li>
                          <li>Popsixle has been added as a partner with "Manage" permission</li>
                        </ul>
                      </div>
                      <button type="button" class="wizard-btn wizard-btn-secondary" onclick="retryTikTokTest()">
                        Try Again
                      </button>
                    </div>
                  </div>

                </div>

                <!-- Section 4: Turn Off Shopify -->
                <div id="tiktok-shopify-section" style="display: none;">
                  <div class="channel-connect-card">
                    <label class="channel-form-label">Optimize your data quality</label>
                    <div class="channel-form-helper">
                      You're connected to TikTok! But there's one important step: Shopify's built-in TikTok connection
                      sends duplicate events alongside Popsixle, causing TikTok to count each sale twice. This hurts
                      your attribution accuracy and wastes ad spend.
                    </div>
                  </div>

                  <div class="channel-connect-card">
                    <label class="channel-form-label">How to fix this</label>

                    <div class="tiktok-steps-list" style="margin-top: 12px;">
                      <div class="tiktok-step">
                        <span class="tiktok-step-number">1</span>
                        <div class="tiktok-step-content">
                          <strong>Open your Shopify TikTok settings</strong>
                          <p>In Shopify Admin, go to <strong>Settings  Apps and sales channels  TikTok</strong></p>
                          <div class="tiktok-screenshot">
                            <img src="https://info.popsixle.com/hs-fs/hubfs/image-png-Feb-14-2024-09-43-37-2060-PM.png" alt="Shopify TikTok Settings"
                                 onerror="this.parentElement.innerHTML = '<div class=\'tiktok-screenshot-placeholder\'>[Screenshot: Shopify  Settings  Apps and sales channels  TikTok]</div>';">
                          </div>
                        </div>
                      </div>

                      <div class="tiktok-step">
                        <span class="tiktok-step-number">2</span>
                        <div class="tiktok-step-content">
                          <strong>Disconnect your pixel</strong>
                          <p>Click <strong>Disconnect</strong> to stop Shopify from sending duplicate events to TikTok.</p>
                          <div class="tiktok-screenshot">
                            <img src="https://info.popsixle.com/hs-fs/hubfs/image-png-Feb-14-2024-09-45-27-5993-PM.png" alt="Disconnect TikTok Pixel"
                                 onerror="this.parentElement.innerHTML = '<div class=\'tiktok-screenshot-placeholder\'>[Screenshot: Click Disconnect to remove pixel]</div>';">
                          </div>
                        </div>
                      </div>
                    </div>

                    <a href="https://info.popsixle.com/knowledge/how-to-turn-off-the-shopify-tiktok-capi-connection"
                       target="_blank" class="channel-form-help-link" style="margin-top: 16px; display: inline-block;">
                      Read the full guide 
                    </a>
                  </div>

                </div>

                <!-- Section 5: What's Next -->
                <div id="tiktok-whatsnext-section" style="display: none;">
                  <!-- Success Celebration Banner -->
                  <div class="channel-success-banner">
                    <div class="success-icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                        <polyline points="20 6 9 17 4 12"></polyline>
                      </svg>
                    </div>
                    <div>
                      <strong>TikTok Connected!</strong>
                      <p>Your store is now sending conversion data to TikTok</p>
                    </div>
                  </div>

                  <div class="channel-connect-card">
                    <label class="channel-form-label">What to expect</label>
                    <div class="channel-form-helper">
                      Popsixle will now send server-side conversion events to TikTok in real-time.
                      You should start seeing events in your TikTok Events Manager within a few hours.
                    </div>
                    <div class="channel-form-helper" style="margin-top: 8px;">
                      Monitor your TikTok Ads reporting over the next 1-2 weeks to compare
                      Popsixle-attributed conversions against your previous tracking.
                    </div>
                  </div>

                  <!-- Connect Another Channel CTA -->
                  <div class="channel-next-cta">
                    <label class="channel-form-label">Ready to maximize your data coverage?</label>
                    <div class="channel-form-helper">
                      Connect more channels to improve attribution across all your ad platforms.
                    </div>
                    <div class="cta-buttons">
                      <button class="wizard-btn wizard-btn-primary" onclick="navigateToStep('5')">
                        Connect Another Channel
                      </button>
                      <button class="wizard-btn wizard-btn-secondary" onclick="navigateToStep('6')">
                        Finish Setup
                      </button>
                    </div>
                  </div>

                </div>

            <!-- Demo Controls (global for TikTok) -->
            <div class="pixel-demo-controls">
              <div class="pixel-demo-controls-label">Demo Controls (preview version)</div>
              <div class="pixel-demo-controls-buttons" id="tiktok-demo-buttons">
                <button class="pixel-demo-btn" onclick="resetTikTokForm()">Reset</button>
                <!-- Phase-specific buttons swapped by showTikTokSection() -->
              </div>
            </div>
          </div>
          <div class="wizard-footer" id="tiktok-wizard-footer">
            <div class="wizard-footer-left">
              <button type="button" class="wizard-btn wizard-btn-secondary" id="tiktok-back-btn" onclick="navigateToStep('5')">Back</button>
            </div>
            <div class="wizard-footer-right">
              <button type="button" class="wizard-btn wizard-btn-primary" id="tiktok-continue-btn" onclick="showTikTokSection('tiktok-credentials-section')">I've Added the Partner</button>
            </div>
          </div>
        </div>
      </main>

      <!-- Right Side Container (Explanation + Assistance) -->
      <div class="explanation-wrapper">
      <aside class="explanation-panel">
        <!-- Step 0: Overview Explanation -->
        <div class="explanation-content active" data-explanation="0">
          <div class="explanation-header">
            <div class="explanation-label">Getting Started</div>
            <h3 class="explanation-title">Why Popsixle?</h3>
          </div>
          <div class="explanation-body">
            <p>Browser-based tracking has become unreliable due to ad blockers, iOS privacy changes, and cookie restrictions.</p>
            <p>Popsixle ensures your conversion data is captured and sent to ad channels, bypassing browser limitations and giving ad platforms the accurate data they need.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">How long does setup take?</div>
              <div class="faq-answer">Most merchants complete setup in under 10 minutes. No coding or developer required.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Will this affect my site speed?</div>
              <div class="faq-answer">No. Popsixle's single line of code runs server-side and has zero impact on your storefront performance.</div>
            </div>
          </div>
        </div>

        <!-- Step 1: Product Type Explanation -->
        <div class="explanation-content" data-explanation="1">
          <div class="explanation-header">
            <div class="explanation-label">Step 1</div>
            <h3 class="explanation-title">Why We Ask About Product Category</h3>
          </div>
          <div class="explanation-body">
            <p>Different product categories have different tracking requirements due to ad platform policies.</p>
            <p>Selecting the correct category ensures your tracking is configured properly and compliant with platform guidelines.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">What if I sell multiple product categories?</div>
              <div class="faq-answer">Select the category that represents the majority of your products. You can adjust this later in settings.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What are "restricted" categories?</div>
              <div class="faq-answer">Products that have been deemed restricted by Meta's Health and Wellness policies. These product categories (like CBD and supplements) have special tracking requirements</div>
            </div>
          </div>
        </div>

        <!-- Step 2: Pixel Setup Explanation -->
        <div class="explanation-content" data-explanation="2">
          <div class="explanation-header">
            <div class="explanation-label">Step 2</div>
            <h3 class="explanation-title">Why the Pixel Matters</h3>
          </div>
          <div class="explanation-body">
            <p>The Popsixle pixel captures conversion events directly from your store and sends them to our servers.</p>
            <p>This is the foundation of server-side tracking - without it, we can't capture the data your ads need.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">Is this different from the Meta/Google pixel?</div>
              <div class="faq-answer">Yes. Popsixle replaces standard web pixels, providing full conversion data via server-side tracking.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What if the pixel isn't detected?</div>
              <div class="faq-answer">Make sure you've saved your theme after enabling it. If issues persist, reach out to our support team for help.</div>
            </div>
          </div>
        </div>

        <!-- Step 3: Special Cases Explanation -->
        <div class="explanation-content" data-explanation="3">
          <div class="explanation-header">
            <div class="explanation-label">Step 3</div>
            <h3 class="explanation-title">Special Configurations</h3>
          </div>
          <div class="explanation-body">
            <p>These options help us ensure accurate tracking for shops with uncommon setups.</p>
            <p>Most merchants can skip this step, but if you have a custom implementation, these settings ensure accurate tracking.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">What is a headless storefront?</div>
              <div class="faq-answer">A custom frontend that doesn't use Shopify's standard theme system (e.g., Next.js, Hydrogen).</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Do I need landing page tracking?</div>
              <div class="faq-answer">Only if you use separate landing pages outside your Shopify store for marketing campaigns.</div>
            </div>
          </div>
        </div>

        <!-- Step 4: Review Explanation -->
        <div class="explanation-content" data-explanation="4">
          <div class="explanation-header">
            <div class="explanation-label">Step 4</div>
            <h3 class="explanation-title">Review Your Setup</h3>
          </div>
          <div class="explanation-body">
            <p>Take a moment to verify your configuration before connecting your ad platforms.</p>
            <p>You can always change these settings later from your Popsixle dashboard.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">Can I change settings later?</div>
              <div class="faq-answer">Yes, all settings can be modified from your dashboard at any time.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What happens next?</div>
              <div class="faq-answer">After confirming, you'll connect your ad platforms so Popsixle can start sending conversion data.</div>
            </div>
          </div>
        </div>

        <!-- Step 5: Channel Connect Explanation -->
        <div class="explanation-content" data-explanation="5">
          <div class="explanation-header">
            <div class="explanation-label">Step 5</div>
            <h3 class="explanation-title">Connect Your Ad Channels</h3>
          </div>
          <div class="explanation-body">
            <p>Connecting to your ad channels allows Popsixle to send tracked conversion data directly to each platform.</p>
            <p>This will enable improved attribution and event match quality that boost your ad performance.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">Do I need to connect all platforms?</div>
              <div class="faq-answer">No, just connect the ones you actively advertise on. You can add more later.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Is my data secure?</div>
              <div class="faq-answer">Yes. Data is secured and de-identified in the Popsixle server and is GDPR and CCPA compliant</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">When will I see results?</div>
              <div class="faq-answer">Once a channel is connected data will start flowing immediately. Most merchants see improved attribution within 48-72 hours or after 100 tracked conversions.</div>
            </div>
          </div>
        </div>

        <!-- Step 5-Meta: Meta Connection Explanation -->
        <div class="explanation-content" data-explanation="5-meta">
          <div class="explanation-header">
            <div class="explanation-label">Step 5</div>
            <h3 class="explanation-title">Connect to Meta</h3>
          </div>
          <div class="explanation-body">
            <p>Connecting to Meta allows Popsixle to send conversion data directly to your Meta Ad Account via the Conversions API.</p>
            <p>This bypasses browser limitations and ensures accurate attribution for your ad campaigns.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">Where do I find my Pixel/Dataset ID?</div>
              <div class="faq-answer">In Meta Events Manager, select your Dataset, go to the Settings tab, and find the ID at the top of the page.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">How do I generate a CAPI token?</div>
              <div class="faq-answer">In Events Manager  Settings  Conversions API section, click "Generate Access Token" and copy the generated token.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What is a Test Event Code?</div>
              <div class="faq-answer">A temporary code from Meta's Test Events tab that lets you verify your connection is working before going live.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Why do I need all three values?</div>
              <div class="faq-answer">The Pixel ID identifies your dataset, the CAPI token authenticates Popsixle to send events, and the Test Code verifies the connection.</div>
            </div>
          </div>
        </div>

        <!-- Step 5-Meta-DataSharing: Data Sharing Explanation -->
        <div class="explanation-content" data-explanation="5-meta-datasharing">
          <div class="explanation-header">
            <div class="explanation-label">Step 5</div>
            <h3 class="explanation-title">Disable Data Sharing</h3>
          </div>
          <div class="explanation-body">
            <p>Popsixle sends both browser and server-side events to Meta, so Shopify's native Meta connection is no longer needed.</p>
            <p>Disable Shopify's data sharing to avoid sending duplicate events.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">Will this affect my tracking?</div>
              <div class="faq-answer">No. Popsixle handles both browser and server-side events, fully replacing Shopify's Meta integration.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What if I don't disable it?</div>
              <div class="faq-answer">Meta will receive duplicate events from both Shopify and Popsixle, which skews your attribution data.</div>
            </div>
          </div>
        </div>

        <!-- Step 5-Meta-AdAccount: Ad Account Explanation -->
        <div class="explanation-content" data-explanation="5-meta-adaccount">
          <div class="explanation-header">
            <div class="explanation-label">Step 5</div>
            <h3 class="explanation-title">Add Ad Account (Optional)</h3>
          </div>
          <div class="explanation-body">
            <p>Connecting your ad account enables Popsixle's advanced reporting features.</p>
            <p>This is optional - you can skip this step and add it later from your dashboard.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">What reports does this enable?</div>
              <div class="faq-answer">Pre/Post Performance Reports compare your ad performance before and after Popsixle. Attribution Accuracy Reports show match quality.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Why "View performance" access only?</div>
              <div class="faq-answer">Popsixle only needs read-only access to pull metrics. We never modify your ad campaigns or settings.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Can I use a personal ad account?</div>
              <div class="faq-answer">No. Popsixle requires a Business account. Contact support if you need help setting one up.</div>
            </div>
          </div>
        </div>

        <!-- Step 5-Google: Google Ads Connection Explanation -->
        <div class="explanation-content" data-explanation="5-google">
          <div class="explanation-header">
            <div class="explanation-label">Google Ads</div>
            <h3 class="explanation-title">Connect to Google Ads</h3>
          </div>
          <div class="explanation-body">
            <p>Connecting to Google Ads allows Popsixle to send conversion data directly to your ad account, improving campaign optimization and attribution accuracy.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">Where do I find my Ad Account ID?</div>
              <div class="faq-answer">In Google Ads, click the Settings gear icon, then Account Settings. Your Customer ID is at the top of the page.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Do I need admin access?</div>
              <div class="faq-answer">Yes, you need admin or standard access to the Google Ads account to authorize the connection.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What is the conversion action?</div>
              <div class="faq-answer">A Purchase conversion action in Google Ads that receives data from Popsixle. It starts as Secondary (reporting-only) so it won't disrupt your existing tracking.</div>
            </div>
          </div>
        </div>

        <!-- Step 5-Google-Verify: Verify Connection Explanation -->
        <div class="explanation-content" data-explanation="5-google-verify">
          <div class="explanation-header">
            <div class="explanation-label">Google Ads</div>
            <h3 class="explanation-title">Verify Your Connection</h3>
          </div>
          <div class="explanation-body">
            <p>Popsixle has created a conversion action and will automatically begin sending data after the 6-hour propagation window. No manual toggle required.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">How long until I see data in Google Ads?</div>
              <div class="faq-answer">The conversion action appears immediately, but event data takes approximately 6 hours to begin flowing. Full attribution data within 24-48 hours.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What if I see "Needs Action" in Google Ads?</div>
              <div class="faq-answer">This can appear briefly during the 6-hour propagation window. If it persists after 24 hours, contact support@popsixle.com.</div>
            </div>
          </div>
        </div>

        <!-- Step 5-Google-WhatsNext: What's Next Explanation -->
        <div class="explanation-content" data-explanation="5-google-whatsnext">
          <div class="explanation-header">
            <div class="explanation-label">Google Ads</div>
            <h3 class="explanation-title">What's Next</h3>
          </div>
          <div class="explanation-body">
            <p>Your Google Ads connection is active. Here's what to expect in the coming weeks.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">When should I switch to primary?</div>
              <div class="faq-answer">After 2+ weeks of running side-by-side with at least 20-30 conversions tracked, once you've confirmed Popsixle matches or exceeds your current attribution accuracy.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Can I disconnect later?</div>
              <div class="faq-answer">Yes, from your Popsixle dashboard under Channel Settings.</div>
            </div>
          </div>
        </div>

        <!-- TikTok Connection Explanation (Step 1 - Partner Setup) -->
        <div class="explanation-content" data-explanation="5-tiktok">
          <div class="explanation-header">
            <div class="explanation-label">TikTok</div>
            <h3 class="explanation-title">Connect to TikTok</h3>
          </div>
          <div class="explanation-body">
            <p>Connecting to TikTok allows Popsixle to send server-side conversion data directly to your TikTok Pixel, improving attribution accuracy and campaign optimization.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">Why do I need to add Popsixle as a partner?</div>
              <div class="faq-answer">TikTok requires partner authorization before external systems can send events to your Pixel. This is a security measure to protect your ad account.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Where do I find my TikTok Business Center?</div>
              <div class="faq-answer">Go to business.tiktok.com and sign in with the account that manages your TikTok Ads.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What permission level does Popsixle need?</div>
              <div class="faq-answer">Popsixle needs "Manage" permission on your Events Manager asset to send conversion events.</div>
            </div>
          </div>
        </div>

        <!-- TikTok Credentials Explanation -->
        <div class="explanation-content" data-explanation="5-tiktok-credentials">
          <div class="explanation-header">
            <div class="explanation-label">TikTok</div>
            <h3 class="explanation-title">Enter Your Credentials</h3>
          </div>
          <div class="explanation-body">
            <p>These three pieces of information allow Popsixle to securely send conversion events to your TikTok Pixel.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">Where is my Pixel ID?</div>
              <div class="faq-answer">In TikTok Events Manager, click on your pixel name. The Pixel ID is shown at the top of the overview page (starts with 'C').</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">How do I generate an Access Token?</div>
              <div class="faq-answer">In Events Manager, go to Settings  System Users  Generate Token. Select your pixel when prompted.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What is the Test Event Code for?</div>
              <div class="faq-answer">It lets you verify that Popsixle is successfully sending events before going live.</div>
            </div>
          </div>
        </div>

        <!-- TikTok Test Explanation -->
        <div class="explanation-content" data-explanation="5-tiktok-test">
          <div class="explanation-header">
            <div class="explanation-label">TikTok</div>
            <h3 class="explanation-title">Test Your Connection</h3>
          </div>
          <div class="explanation-body">
            <p>Sending a test event verifies that Popsixle can successfully communicate with your TikTok Pixel before you go live.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">How long until I see the test event?</div>
              <div class="faq-answer">Test events typically appear in TikTok within 1-2 minutes. Refresh the Test Events tab if you don't see it immediately.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What if my test event doesn't appear?</div>
              <div class="faq-answer">Double-check your credentials, ensure Popsixle is added as a partner, and verify your Access Token hasn't expired.</div>
            </div>
          </div>
        </div>

        <!-- TikTok Shopify Explanation -->
        <div class="explanation-content" data-explanation="5-tiktok-shopify">
          <div class="explanation-header">
            <div class="explanation-label">TikTok</div>
            <h3 class="explanation-title">Turn Off Shopify Connection</h3>
          </div>
          <div class="explanation-body">
            <p>Popsixle sends both browser and server-side events to TikTok, so Shopify's native TikTok connection is no longer needed.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">Why disconnect Shopify's TikTok integration?</div>
              <div class="faq-answer">Shopify's built-in TikTok connection sends duplicate events alongside Popsixle, which causes TikTok to count each sale twice and hurts your attribution accuracy.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What if I skip this step?</div>
              <div class="faq-answer">TikTok will receive duplicate events from both Shopify and Popsixle, which inflates your conversion counts and wastes ad spend on over-attributed conversions.</div>
            </div>
          </div>
        </div>

        <!-- TikTok What's Next Explanation -->
        <div class="explanation-content" data-explanation="5-tiktok-whatsnext">
          <div class="explanation-header">
            <div class="explanation-label">TikTok</div>
            <h3 class="explanation-title">What's Next</h3>
          </div>
          <div class="explanation-body">
            <p>Your TikTok connection is active. Here's what to expect in the coming weeks.</p>
          </div>
          <div class="explanation-section">
            <div class="explanation-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
              Common Questions
            </div>
            <div class="faq-item">
              <div class="faq-question">When will I see improved results?</div>
              <div class="faq-answer">TikTok typically needs 1-2 weeks of data to optimize. Monitor your Events Manager to confirm events are flowing correctly.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Can I disconnect Popsixle later?</div>
              <div class="faq-answer">Yes, from your Popsixle dashboard under Channel Settings.</div>
            </div>
          </div>
        </div>

      </aside>

        <!-- Setup Assistance Card (persistent across all steps) -->
        <aside class="assistance-card">
          <div class="assistance-card-label">Setup Assistance</div>
          <a href="#" class="assistance-card-link">
            <img src="assets/omar.jpeg" alt="Omar">
            Free Onboarding Call
          </a>
          <a href="#" class="assistance-card-link">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" />
            </svg>
            <span id="assistance-video-text">Meta Setup Overview</span>
          </a>
          <a href="#" class="assistance-card-link">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
            </svg>
            Explore Setup Guides
          </a>
        </aside>
      </div><!-- /.explanation-wrapper -->
        </div><!-- /.wizard-content-area -->

      </div><!-- /.wizard-inner-layout -->
    </div><!-- /.wizard-app-layout -->
  </div><!-- /#wizard-screen -->

  <!-- Skip to Dashboard Warning Popup -->
  <div class="skip-popup-overlay" id="skip-popup-overlay">
    <div class="skip-popup">
      <button class="skip-popup-close" id="skip-popup-close">&times;</button>
      <div class="skip-popup-icon"></div>
      <h3 class="skip-popup-title">Setup Not Complete</h3>
      <p class="skip-popup-message">You haven't finished setting up Popsixle. Your tracking won't work until setup is complete.</p>

      <div class="skip-popup-help">
        <div class="skip-popup-help-label">Need Help?</div>
        <a href="#" class="skip-popup-help-link">
          <span class="skip-popup-help-icon">
            <img src="assets/omar.jpeg" alt="Omar">
          </span>
          <span class="skip-popup-help-text">Free Onboarding Call</span>
        </a>
        <a href="#" class="skip-popup-help-link">
          <span class="skip-popup-help-icon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" />
            </svg>
          </span>
          <span class="skip-popup-help-text">Popsixle Setup Overview</span>
        </a>
        <a href="#" class="skip-popup-help-link">
          <span class="skip-popup-help-icon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
            </svg>
          </span>
          <span class="skip-popup-help-text">Explore Setup Guides</span>
        </a>
      </div>

      <div class="skip-popup-actions">
        <a href="dashboard.html" class="skip-popup-btn-secondary">Skip Anyway</a>
        <button class="skip-popup-btn-primary" id="skip-popup-cancel">Continue Setup</button>
      </div>
    </div>
  </div>

  <!-- Unrestricted Modal -->
  <div class="unrestricted-modal-overlay" id="unrestricted-modal-overlay">
    <div class="unrestricted-modal">
      <button class="unrestricted-modal-close" id="unrestricted-modal-close">&times;</button>

      <div class="unrestricted-modal-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
        </svg>
      </div>

      <h3 class="unrestricted-modal-title">You May Need Popsixle Unrestricted</h3>
      <p class="unrestricted-modal-message">
        Health, wellness, and CBD brands often face ad account restrictions and domain flagging on Meta. Popsixle Unrestricted was purpose-built to solve this.
      </p>

      <div class="unrestricted-benefits">
        <div class="unrestricted-benefit">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
          </svg>
          <span>Compliant tracking that won't trigger flags</span>
        </div>
        <div class="unrestricted-benefit">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
          </svg>
          <span>Domain masking to protect your main site</span>
        </div>
        <div class="unrestricted-benefit">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
          </svg>
          <span>Keyword cleansing from event data</span>
        </div>
      </div>

      <a href="#" class="unrestricted-cta-card">
        <div class="unrestricted-cta-icon">
          <img src="assets/omar.jpeg" alt="Omar">
        </div>
        <div class="unrestricted-cta-content">
          <div class="unrestricted-cta-title">Talk to our team</div>
          <div class="unrestricted-cta-desc">Book a free call to see if Unrestricted is right for you</div>
        </div>
      </a>

      <a href="https://unrestricted.popsixle.com" target="_blank" class="unrestricted-cta-card">
        <div class="unrestricted-cta-icon">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
          </svg>
        </div>
        <div class="unrestricted-cta-content">
          <div class="unrestricted-cta-title">Learn more about Unrestricted</div>
          <div class="unrestricted-cta-desc">See how it works and view pricing</div>
        </div>
      </a>

      <div class="unrestricted-modal-actions">
        <button class="unrestricted-btn-secondary" id="unrestricted-continue-core">Continue with Core</button>
        <a href="#" class="unrestricted-btn-primary">Book a Call</a>
      </div>
    </div>
  </div>

  <!-- Meta Celebration Modal -->
  <div class="meta-celebration-overlay" id="meta-celebration-modal">
    <div class="meta-celebration-modal">
      <!-- Flow visual  fully connected -->
      <div class="meta-celebration-flow">
        <div class="flow-source">
          <div class="flow-node shopify">
            <img src="assets/Shopify_Logo.png" alt="Shopify">
          </div>
          <span class="flow-node-label">Your Store</span>
        </div>
        <svg class="flow-line-svg" width="56" height="20" style="margin: 0 8px;">
          <path class="dashed-line green" d="M 0,10 L 56,10" />
        </svg>
        <div class="flow-hub">
          <div class="flow-node popsixle">
            <img src="popsixle_logo_gradient_circle_500 (1).png" alt="Popsixle">
          </div>
          <span class="flow-node-label">Popsixle Pixel</span>
        </div>
        <svg class="flow-line-svg" width="56" height="20" style="margin: 0 8px;">
          <path class="dashed-line purple connected" d="M 0,10 L 56,10" />
        </svg>
        <div class="flow-destination">
          <div class="flow-node meta">
            <img src="assets/meta-color.png" alt="Meta" style="width: 44px; height: 44px;">
          </div>
          <span class="flow-node-label">Meta</span>
        </div>
      </div>

      <!-- Title -->
      <div class="meta-celebration-header">
        <h2>Popsixle is connected to Meta!</h2>
      </div>

      <div class="meta-celebration-divider"></div>

      <!-- Section 1: Now -->
      <div class="meta-celebration-section">
        <div class="meta-celebration-section-title">What's happening now</div>
        <div class="meta-celebration-section-body">
          Server-side tracking is active. Every conversion event from your store is being sent directly to Meta, bypassing browser blockers and iOS restrictions.
        </div>
      </div>

      <div class="meta-celebration-divider"></div>

      <!-- Section 2: Next -->
      <div class="meta-celebration-section">
        <div class="meta-celebration-section-title">What to expect next</div>
        <div class="meta-celebration-section-body">
          Most brands see improved ad performance within 7 days. Take a screenshot of your Event Match Quality (EMQ) in <a href="https://www.facebook.com/events_manager" target="_blank" style="color: #A855F7; font-weight: 600;">Meta Events Manager</a> now so you can track your improvement.
        </div>
        <img src="assets/EMQ.png" alt="Event Match Quality scores" class="meta-celebration-emq-img">
      </div>

      <!-- CTAs -->
      <div class="meta-celebration-actions">
        <button type="button" class="wizard-btn wizard-btn-primary" onclick="closeMetaCelebration()" style="width: 100%;">
          Connect More Channels
        </button>
        <button type="button" class="wizard-btn wizard-btn-secondary" onclick="closeMetaCelebrationToDashboard()">
          Go to Dashboard
        </button>
      </div>
    </div>
  </div>

  <script>
    // Toggle pricing details accordion
    function togglePricingDetails() {
      const details = document.getElementById('pricing-details');
      details.classList.toggle('open');
    }

    // Wizard State
    let currentStep = 0; // Start at Overview (step 0)
    const totalSteps = 5; // Steps 1-5 (not counting Overview)
    let currentChannelStep = null; // Track channel sub-step (e.g., "5-meta")
    let currentMetaStep = 1; // Track Meta sub-step: 1=credentials, 2=testing, 3=data-sharing
    let currentGoogleStep = 1; // Track Google sub-step: 1=connect, 2=verify, 3=whatsnext

    // Start trial - transition to wizard
    document.getElementById('start-trial-btn').addEventListener('click', function() {
      document.getElementById('pricing-screen').style.display = 'none';
      document.getElementById('wizard-screen').classList.add('active');
      updateWizardUI();
    });

    // Navigate to a specific step
    function goToStep(step) {
      if (step < 0 || step > totalSteps) return;
      currentStep = step;
      updateWizardUI();
    }

    // Update wizard UI based on current step
    function updateWizardUI() {
      // Update setup progress counter in the setup-steps-panel
      const setupProgress = document.getElementById('setup-progress');
      if (setupProgress) {
        // Count completed steps (steps 1-5, not including overview)
        const completedSteps = Math.max(0, currentStep);
        setupProgress.textContent = `${completedSteps}/${totalSteps}`;
      }

      // Update sidebar steps
      document.querySelectorAll('.wizard-step-item').forEach(item => {
        const stepNum = parseInt(item.dataset.step);
        item.classList.remove('active', 'completed');

        if (stepNum < currentStep) {
          item.classList.add('completed');
        } else if (stepNum === currentStep) {
          item.classList.add('active');
        }
      });

      // Update step panels (skip if we're on a channel sub-step)
      if (!currentChannelStep) {
        document.querySelectorAll('.step-panel').forEach(panel => {
          const stepData = panel.dataset.step;
          // Only match exact numeric steps, not sub-steps like "5-meta"
          const stepNum = parseInt(stepData);
          const isExactMatch = stepData === String(stepNum);
          panel.classList.toggle('active', isExactMatch && stepNum === currentStep);
        });

        // Update explanation panel
        document.querySelectorAll('.explanation-content').forEach(content => {
          const explanationData = content.dataset.explanation;
          const explanationStep = parseInt(explanationData);
          const isExactMatch = explanationData === String(explanationStep);
          content.classList.toggle('active', isExactMatch && explanationStep === currentStep);
        });
      }

      // Update flow lines when on step 5 (Connect Channels)
      if (currentStep === 5) {
        setTimeout(updateFlowLines, 50);
      }
    }

    // Overview "Get Started" button
    document.getElementById('overview-start-btn').addEventListener('click', function() {
      goToStep(1);
    });

    // Navigation button handlers
    document.querySelectorAll('.wizard-btn-primary').forEach(btn => {
      // Skip buttons that have their own onclick handlers OR are inside channel connection UI
      if (btn.hasAttribute('onclick') || btn.closest('[data-step="5-meta"]') || btn.closest('[data-step="5-google"]')) return;

      btn.addEventListener('click', function() {
        if (currentStep < totalSteps) {
          goToStep(currentStep + 1);
        } else {
          // Go to dashboard
          window.location.href = 'dashboard.html';
        }
      });
    });

    document.querySelectorAll('.wizard-btn-secondary').forEach(btn => {
      // Skip buttons inside channel connection UI
      if (btn.closest('[data-step="5-meta"]') || btn.closest('[data-step="5-google"]')) return;

      btn.addEventListener('click', function() {
        if (currentStep > 0) {
          goToStep(currentStep - 1);
        }
      });
    });

    // Skip button
    document.querySelectorAll('.wizard-btn-text').forEach(btn => {
      btn.addEventListener('click', function() {
        if (currentStep < totalSteps) {
          goToStep(currentStep + 1);
        }
      });
    });

    // Sidebar step clicks (for navigation)
    document.querySelectorAll('.wizard-step-item').forEach(item => {
      item.addEventListener('click', function() {
        const stepNum = parseInt(this.dataset.step);
        // Only allow clicking on completed steps or current step
        if (stepNum <= currentStep) {
          goToStep(stepNum);
        }
      });
      item.style.cursor = 'pointer';
    });

    // ============================================
    // STEP 1: Product Type Selection
    // ============================================
    const wizardState = {
      productType: null,
      pixelEnabled: false,
      specialCases: {
        landingPage: false,
        landingPageUrl: '',
        headless: false,
        customCart: false
      },
      channels: {
        meta: false,
        google: false,
        tiktok: false
      }
    };

    // Sync store name from sidebar to flow visual
    const sidebarStoreName = document.querySelector('.outer-sidebar-store-name');
    const flowStoreName = document.getElementById('flow-store-name');
    if (sidebarStoreName && flowStoreName) {
      flowStoreName.textContent = sidebarStoreName.textContent;
    }

    // Product type selection
    const productTypeInputs = document.querySelectorAll('.product-type-input');
    const unrestrictedBanner = document.getElementById('unrestricted-banner');
    const step1Continue = document.getElementById('step1-continue');

    productTypeInputs.forEach(input => {
      input.addEventListener('change', function() {
        wizardState.productType = this.value;

        // Show unrestricted modal for restricted categories
        const restrictedTypes = ['health', 'cbd', 'restricted'];
        if (restrictedTypes.includes(this.value)) {
          document.getElementById('unrestricted-modal-overlay').classList.add('active');
          unrestrictedBanner.classList.remove('hidden');
        } else {
          unrestrictedBanner.classList.add('hidden');
        }

        // Enable continue button
        step1Continue.disabled = false;
      });
    });

    // Step 1 Continue button
    step1Continue.addEventListener('click', function() {
      if (wizardState.productType) {
        goToStep(2);
      }
    });

    // ============================================
    // STEP 2: Pixel Setup
    // ============================================

    // Pixel status elements
    const pixelStatusBadge = document.getElementById('pixel-status-badge');
    const step2Continue = document.getElementById('step2-continue');
    let hasClickedButton = false;

    // Function to show a specific pixel status (simplified 2-state system)
    function showPixelStatus(status) {
      const statusText = pixelStatusBadge.querySelector('.status-text');

      // Remove all status classes
      pixelStatusBadge.classList.remove('status-not-detected', 'status-enabled', 'checked');

      switch(status) {
        case 'not-detected':
          // Gray state (before clicking button)
          pixelStatusBadge.classList.add('status-not-detected');
          statusText.textContent = 'Pixel Not Connected';
          step2Continue.disabled = true;
          break;
        case 'not-detected-checked':
          // Red state (after clicking button but pixel not found)
          pixelStatusBadge.classList.add('status-not-detected', 'checked');
          statusText.textContent = 'Pixel Not Detected';
          hasClickedButton = true;
          step2Continue.disabled = true;
          break;
        case 'enabled':
          // Green state (pixel found)
          pixelStatusBadge.classList.add('status-enabled');
          statusText.textContent = 'Enabled';
          wizardState.pixelEnabled = true;
          step2Continue.disabled = false;
          break;
      }
    }

    // Function to show Meta test status (for channel connection)
    function showMetaTestStatus(status) {
      const badge = document.getElementById('meta-test-badge');
      if (!badge) return;
      const statusText = badge.querySelector('.status-text');

      // Remove all status classes
      badge.classList.remove('status-pending', 'status-testing', 'status-success', 'status-failed');

      switch(status) {
        case 'pending':
          badge.classList.add('status-pending');
          statusText.textContent = 'Not Connected';
          break;
        case 'testing':
          badge.classList.add('status-testing');
          statusText.textContent = 'Testing Connection';
          break;
        case 'success':
          badge.classList.add('status-success');
          statusText.textContent = 'Connection Verified';
          break;
        case 'failed':
          badge.classList.add('status-failed');
          statusText.textContent = 'Connection Failed';
          break;
      }
    }

    // Update Meta connection sidebar steps (1=credentials, 2=testing, 3=data-sharing, 4=ad-account)
    function updateMetaConnectionStep(step) {
      currentMetaStep = step;

      const step1 = document.getElementById('connection-step-1');
      const step2 = document.getElementById('connection-step-2');
      const step3 = document.getElementById('connection-step-3');
      const step4 = document.getElementById('connection-step-4');

      // Reset all steps
      [step1, step2, step3, step4].forEach(s => {
        if (s) {
          s.classList.remove('active', 'completed');
        }
      });

      // Update based on current step
      if (step >= 1) {
        if (step1) step1.classList.add(step > 1 ? 'completed' : 'active');
      }
      if (step >= 2) {
        if (step2) step2.classList.add(step > 2 ? 'completed' : 'active');
      }
      if (step >= 3) {
        if (step3) step3.classList.add(step > 3 ? 'completed' : 'active');
      }
      if (step >= 4) {
        if (step4) step4.classList.add('active');
      }
    }

    // Show Meta Data Sharing step (after successful connection test)
    function showMetaDataSharingStep() {
      // Update sidebar to show step 2 complete, step 3 active
      updateMetaConnectionStep(3);

      // Hide credentials section, show data sharing section
      var credentialsSection = document.getElementById('meta-credentials-section');
      var dataSharingSection = document.getElementById('meta-data-sharing-section');
      var adAccountSection = document.getElementById('meta-ad-account-section');
      var metaFooter = document.getElementById('meta-wizard-footer');

      if (credentialsSection) credentialsSection.style.display = 'none';
      if (dataSharingSection) dataSharingSection.style.display = 'block';
      if (adAccountSection) adAccountSection.style.display = 'none';
      if (metaFooter) metaFooter.style.display = 'none';

      // Update the status badge to show verified
      showMetaTestStatus('success');

      // Update explanation panel
      updateExplanationPanel('5-meta-datasharing');
    }

    // Show Meta Ad Account step (after Data Sharing confirmed)
    function showMetaAdAccountStep() {
      updateMetaConnectionStep(4);

      const credentialsSection = document.getElementById('meta-credentials-section');
      const dataSharingSection = document.getElementById('meta-data-sharing-section');
      const adAccountSection = document.getElementById('meta-ad-account-section');
      const metaFooter = document.getElementById('meta-wizard-footer');

      if (credentialsSection) credentialsSection.style.display = 'none';
      if (dataSharingSection) dataSharingSection.style.display = 'none';
      if (adAccountSection) adAccountSection.style.display = 'block';
      if (metaFooter) metaFooter.style.display = 'none';

      updateExplanationPanel('5-meta-adaccount');
    }

    // Test Meta Connection (called from button onclick)
    function testMetaConnection() {
      var pixelId = document.getElementById('meta-pixel-id').value.trim();
      var capiToken = document.getElementById('meta-capi-token').value.trim();
      var testCode = document.getElementById('meta-test-code').value.trim();
      var metaSubmitBtn = document.getElementById('meta-submit-btn');

      // Basic validation
      var isValid = true;

      if (!pixelId) {
        document.getElementById('meta-pixel-id').classList.add('error');
        isValid = false;
      } else {
        document.getElementById('meta-pixel-id').classList.remove('error');
      }

      if (!capiToken) {
        document.getElementById('meta-capi-token').classList.add('error');
        isValid = false;
      } else {
        document.getElementById('meta-capi-token').classList.remove('error');
      }

      if (!testCode) {
        document.getElementById('meta-test-code').classList.add('error');
        isValid = false;
      } else {
        document.getElementById('meta-test-code').classList.remove('error');
      }

      if (!isValid) return;

      // Update sidebar to step 2
      updateMetaConnectionStep(2);
      showMetaTestStatus('testing');

      if (metaSubmitBtn) {
        metaSubmitBtn.disabled = true;
        metaSubmitBtn.textContent = 'Testing...';
      }

      // Show success then data sharing
      window.setTimeout(function() {
        showMetaTestStatus('success');
        updateMetaConnectionStep(3);
        window.setTimeout(function() {
          showMetaDataSharingStep();
        }, 800);
      }, 1200);
    }

    // Helper function to update explanation panel
    function updateExplanationPanel(panelId) {
      document.querySelectorAll('.explanation-content').forEach(content => {
        content.classList.remove('active');
      });
      const panel = document.querySelector(`.explanation-content[data-explanation="${panelId}"]`);
      if (panel) {
        panel.classList.add('active');
      }
    }

    // Reset Meta form to initial state
    function resetMetaForm() {
      currentMetaStep = 1;
      showMetaTestStatus('pending');

      // Reset section visibility
      const credentialsSection = document.getElementById('meta-credentials-section');
      const dataSharingSection = document.getElementById('meta-data-sharing-section');
      const adAccountSection = document.getElementById('meta-ad-account-section');
      const metaFooter = document.getElementById('meta-wizard-footer');

      if (credentialsSection) credentialsSection.style.display = 'block';
      if (dataSharingSection) dataSharingSection.style.display = 'none';
      if (adAccountSection) adAccountSection.style.display = 'none';
      if (metaFooter) metaFooter.style.display = 'flex';

      // Reset sidebar steps
      updateMetaConnectionStep(1);

      // Reset submit button
      const metaSubmitBtn = document.getElementById('meta-submit-btn');
      if (metaSubmitBtn) {
        metaSubmitBtn.disabled = false;
        metaSubmitBtn.textContent = 'Test Meta Connection';
      }

      // Reset ad account form
      const adAccountInput = document.getElementById('meta-ad-account-id');
      if (adAccountInput) {
        adAccountInput.value = '';
        adAccountInput.classList.remove('error');
      }

      // Reset version toggle to manual
      document.querySelectorAll('.demo-version-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.version === 'manual') btn.classList.add('active');
      });
      const manualVersion = document.getElementById('ad-account-manual');
      const oauthVersion = document.getElementById('ad-account-oauth');
      if (manualVersion) manualVersion.style.display = 'block';
      if (oauthVersion) oauthVersion.style.display = 'none';

      // Reset OAuth button
      const oauthBtn = document.getElementById('meta-ad-account-oauth');
      if (oauthBtn) {
        oauthBtn.disabled = false;
        oauthBtn.innerHTML = '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg> Connect with Facebook';
      }

      // Update explanation panel back to default
      updateExplanationPanel('5-meta');
    }

    // ============================================
    // GOOGLE ADS CONNECTION FUNCTIONS
    // ============================================

    function showGoogleTestStatus(status) {
      var badge = document.getElementById('google-test-badge');
      if (!badge) return;
      var statusText = badge.querySelector('.status-text');

      badge.classList.remove('status-pending', 'status-testing', 'status-success', 'status-failed');

      switch(status) {
        case 'pending':
          badge.classList.add('status-pending');
          statusText.textContent = 'Not Connected';
          break;
        case 'testing':
          badge.classList.add('status-testing');
          statusText.textContent = 'Connecting...';
          break;
        case 'success':
          badge.classList.add('status-success');
          statusText.textContent = 'Connected';
          break;
        case 'failed':
          badge.classList.add('status-failed');
          statusText.textContent = 'Connection Failed';
          break;
      }
    }

    function updateGoogleConnectionStep(step) {
      currentGoogleStep = step;

      var gs1 = document.getElementById('google-step-1');
      var gs2 = document.getElementById('google-step-2');
      var gs3 = document.getElementById('google-step-3');

      [gs1, gs2, gs3].forEach(function(s) {
        if (s) s.classList.remove('active', 'completed');
      });

      if (step >= 1 && gs1) gs1.classList.add(step > 1 ? 'completed' : 'active');
      if (step >= 2 && gs2) gs2.classList.add(step > 2 ? 'completed' : 'active');
      if (step >= 3 && gs3) gs3.classList.add('active');
    }

    function showGoogleSection(sectionId) {
      // Hide all Google sections
      var sections = ['google-connect-section', 'google-conversion-section', 'google-verify-section', 'google-whatsnext-section'];
      sections.forEach(function(id) {
        var el = document.getElementById(id);
        if (el) el.style.display = 'none';
      });

      // Show requested section
      var target = document.getElementById(sectionId);
      if (target) target.style.display = 'block';

      // Update footer buttons
      var continueBtn = document.getElementById('google-continue-btn');
      var doneBtn = document.getElementById('google-done-btn');

      if (continueBtn) continueBtn.style.display = (sectionId === 'google-verify-section') ? 'inline-flex' : 'none';
      if (doneBtn) doneBtn.style.display = (sectionId === 'google-whatsnext-section') ? 'inline-flex' : 'none';

      // Swap demo controls per section
      var demoBtns = document.getElementById('google-demo-buttons');
      if (demoBtns) {
        var resetBtn = '<button class="pixel-demo-btn" onclick="resetGoogleForm()">Reset</button>';
        var demoMap = {
          'google-connect-section': resetBtn + '<button class="pixel-demo-btn" onclick="simulateGoogleOAuth()">After OAuth</button><button class="pixel-demo-btn" onclick="simulateGoogleOAuthError()">OAuth Error</button>',
          'google-conversion-section': resetBtn + '<button class="pixel-demo-btn" onclick="simulateGoogleFullConnect()">Full Connect</button><button class="pixel-demo-btn" onclick="simulateGoogleConversionError()">Permission Error</button>',
          'google-verify-section': resetBtn,
          'google-whatsnext-section': resetBtn
        };
        demoBtns.innerHTML = demoMap[sectionId] || resetBtn;
      }
    }

    function startGoogleOAuth() {
      var accountId = document.getElementById('google-account-id').value.trim();
      if (!accountId) {
        document.getElementById('google-account-id').classList.add('error');
        return;
      }
      document.getElementById('google-account-id').classList.remove('error');

      // Disable button, show loading
      var signinBtn = document.getElementById('google-signin-btn');
      if (signinBtn) {
        signinBtn.disabled = true;
        signinBtn.innerHTML = '<svg style="width:20px;height:20px;animation:spin 1s linear infinite" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle style="opacity:0.25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path style="opacity:0.75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Connecting...';
      }

      showGoogleTestStatus('testing');

      // Simulate OAuth return after delay
      setTimeout(function() {
        showGoogleTestStatus('success');
        showGoogleSection('google-conversion-section');
      }, 1500);
    }

    function createGoogleConversionAction() {
      var btn = document.getElementById('google-create-conversion-btn');
      if (btn) {
        btn.disabled = true;
        btn.textContent = 'Creating...';
      }

      setTimeout(function() {
        if (btn) {
          btn.textContent = 'Conversion action created';
          btn.style.background = '#10B981';
          btn.style.color = '#fff';
        }

        // Advance to verify step
        updateGoogleConnectionStep(2);
        updateExplanationPanel('5-google-verify');

        setTimeout(function() {
          showGoogleSection('google-verify-section');
        }, 800);
      }, 1200);
    }

    function navigateGoogleStep(direction) {
      if (direction === 'next') {
        if (currentGoogleStep === 2) {
          // Move from verify to what's next
          currentGoogleStep = 3;
          updateGoogleConnectionStep(3);
          showGoogleSection('google-whatsnext-section');
          updateExplanationPanel('5-google-whatsnext');
        }
      }
    }

    function resetGoogleForm() {
      currentGoogleStep = 1;
      showGoogleTestStatus('pending');

      // Reset section visibility
      showGoogleSection('google-connect-section');

      // Reset connection steps
      updateGoogleConnectionStep(1);

      // Reset sign-in button
      var signinBtn = document.getElementById('google-signin-btn');
      if (signinBtn) {
        signinBtn.disabled = false;
        signinBtn.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> Sign in with Google';
      }

      // Reset conversion action button
      var convBtn = document.getElementById('google-create-conversion-btn');
      if (convBtn) {
        convBtn.disabled = false;
        convBtn.textContent = 'Create Conversion Action';
        convBtn.style.background = '';
        convBtn.style.color = '';
      }

      // Reset account ID input
      var accountInput = document.getElementById('google-account-id');
      if (accountInput) {
        accountInput.value = '';
        accountInput.classList.remove('error');
      }

      // Hide error alerts
      var oauthError = document.getElementById('google-oauth-error');
      var convError = document.getElementById('google-conversion-error');
      if (oauthError) oauthError.style.display = 'none';
      if (convError) convError.style.display = 'none';

      // Update explanation
      updateExplanationPanel('5-google');
    }

    // Demo controls
    function simulateGoogleOAuth() {
      // Pre-fill account ID and jump to Phase 2
      var accountInput = document.getElementById('google-account-id');
      if (accountInput) accountInput.value = '123-456-7890';
      showGoogleTestStatus('success');
      showGoogleSection('google-conversion-section');
    }

    function simulateGoogleFullConnect() {
      var accountInput = document.getElementById('google-account-id');
      if (accountInput) accountInput.value = '123-456-7890';
      showGoogleTestStatus('success');
      updateGoogleConnectionStep(2);
      showGoogleSection('google-verify-section');
      updateExplanationPanel('5-google-verify');
    }

    // Error retry functions
    function retryGoogleOAuth() {
      var oauthError = document.getElementById('google-oauth-error');
      if (oauthError) oauthError.style.display = 'none';

      // Re-enable sign-in button
      var signinBtn = document.getElementById('google-signin-btn');
      if (signinBtn) {
        signinBtn.disabled = false;
        signinBtn.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> Sign in with Google';
      }
      showGoogleTestStatus('pending');
    }

    function retryGoogleConversionAction() {
      var convError = document.getElementById('google-conversion-error');
      if (convError) convError.style.display = 'none';

      // Re-enable conversion button
      var convBtn = document.getElementById('google-create-conversion-btn');
      if (convBtn) {
        convBtn.disabled = false;
        convBtn.textContent = 'Create Conversion Action';
        convBtn.style.background = '';
        convBtn.style.color = '';
      }
    }

    // Error demo controls
    function simulateGoogleOAuthError() {
      var accountInput = document.getElementById('google-account-id');
      if (accountInput) accountInput.value = '123-456-7890';

      showGoogleTestStatus('failed');
      showGoogleSection('google-connect-section');

      // Show loading briefly then error
      var signinBtn = document.getElementById('google-signin-btn');
      if (signinBtn) {
        signinBtn.disabled = true;
        signinBtn.innerHTML = '<svg style="width:20px;height:20px;animation:spin 1s linear infinite" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle style="opacity:0.25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path style="opacity:0.75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Connecting...';
      }

      setTimeout(function() {
        showGoogleTestStatus('failed');
        if (signinBtn) {
          signinBtn.disabled = true;
          signinBtn.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> Sign in with Google';
        }
        var oauthError = document.getElementById('google-oauth-error');
        if (oauthError) oauthError.style.display = 'flex';
      }, 800);
    }

    function simulateGoogleConversionError() {
      var accountInput = document.getElementById('google-account-id');
      if (accountInput) accountInput.value = '123-456-7890';

      showGoogleTestStatus('success');
      showGoogleSection('google-conversion-section');

      // Show the conversion card in error state
      var convBtn = document.getElementById('google-create-conversion-btn');
      if (convBtn) {
        convBtn.disabled = true;
        convBtn.textContent = 'Create Conversion Action';
        convBtn.style.background = '';
        convBtn.style.color = '';
      }

      var convError = document.getElementById('google-conversion-error');
      if (convError) convError.style.display = 'flex';
    }

    // ===== TikTok Connection Functions =====

    let currentTikTokStep = 1;

    function showTikTokTestStatus(status) {
      var badge = document.getElementById('tiktok-status-badge');
      if (!badge) return;

      badge.className = 'connection-test-badge';

      switch(status) {
        case 'pending':
          badge.className += ' status-pending';
          badge.innerHTML = '<span class="status-dot"></span>Not Connected';
          break;
        case 'testing':
          badge.className += ' status-testing';
          badge.innerHTML = '<span class="status-dot"></span>Testing...';
          break;
        case 'success':
          badge.className += ' status-success';
          badge.innerHTML = '<span class="status-dot"></span>Connected';
          break;
        case 'failed':
          badge.className += ' status-failed';
          badge.innerHTML = '<span class="status-dot"></span>Failed';
          break;
      }
    }

    function updateTikTokConnectionStep(step) {
      currentTikTokStep = step;
      for (var i = 1; i <= 5; i++) {
        var stepEl = document.getElementById('tiktok-step-' + i);
        if (stepEl) {
          stepEl.classList.remove('active', 'completed');
          if (i < step) {
            stepEl.classList.add('completed');
            var numEl = stepEl.querySelector('.wizard-step-number');
            if (numEl) numEl.innerHTML = '<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>';
          } else if (i === step) {
            stepEl.classList.add('active');
            var numEl = stepEl.querySelector('.wizard-step-number');
            if (numEl) numEl.textContent = i;
          } else {
            var numEl = stepEl.querySelector('.wizard-step-number');
            if (numEl) numEl.textContent = i;
          }
        }
      }
    }

    function showTikTokSection(sectionId) {
      // Hide all sections
      var sections = ['tiktok-partner-section', 'tiktok-credentials-section', 'tiktok-test-section', 'tiktok-shopify-section', 'tiktok-whatsnext-section'];
      sections.forEach(function(id) {
        var el = document.getElementById(id);
        if (el) el.style.display = 'none';
      });

      // Show target section
      var target = document.getElementById(sectionId);
      if (target) target.style.display = 'block';

      // Update step indicator and explanation panel
      var stepMap = {
        'tiktok-partner-section': { step: 1, explanation: '5-tiktok' },
        'tiktok-credentials-section': { step: 2, explanation: '5-tiktok-credentials' },
        'tiktok-test-section': { step: 3, explanation: '5-tiktok-test' },
        'tiktok-shopify-section': { step: 4, explanation: '5-tiktok-shopify' },
        'tiktok-whatsnext-section': { step: 5, explanation: '5-tiktok-whatsnext' }
      };

      var config = stepMap[sectionId];
      if (config) {
        updateTikTokConnectionStep(config.step);
        updateExplanationPanel(config.explanation);
      }

      // Update footer buttons
      var footer = document.querySelector('[data-step="5-tiktok"] .wizard-footer');
      if (footer) {
        if (sectionId === 'tiktok-partner-section') {
          footer.innerHTML = '<button class="wizard-btn wizard-btn-secondary" onclick="navigateToStep(\'5\')">Back</button>' +
            '<button class="wizard-btn wizard-btn-primary" onclick="showTikTokSection(\'tiktok-credentials-section\')">I\'ve Added the Partner</button>';
        } else if (sectionId === 'tiktok-credentials-section') {
          footer.innerHTML = '<button class="wizard-btn wizard-btn-secondary" onclick="showTikTokSection(\'tiktok-partner-section\')">Back</button>' +
            '<button class="wizard-btn wizard-btn-primary" onclick="validateAndContinueTikTok()">Continue</button>';
        } else if (sectionId === 'tiktok-test-section') {
          footer.innerHTML = '<button class="wizard-btn wizard-btn-secondary" onclick="showTikTokSection(\'tiktok-credentials-section\')">Back</button>' +
            '<button class="wizard-btn wizard-btn-primary" id="tiktok-test-continue-btn" onclick="showTikTokSection(\'tiktok-shopify-section\')" disabled>Continue</button>';
        } else if (sectionId === 'tiktok-shopify-section') {
          footer.innerHTML = '<button class="wizard-btn wizard-btn-secondary" onclick="showTikTokSection(\'tiktok-test-section\')">Back</button>' +
            '<button class="wizard-btn wizard-btn-primary" onclick="completeTikTokShopifyStep()">I\'ve Done This</button>';
        } else if (sectionId === 'tiktok-whatsnext-section') {
          footer.innerHTML = ''; // No footer - CTAs are inline
        }
      }

      // Fire confetti on What's Next
      if (sectionId === 'tiktok-whatsnext-section' && typeof confetti === 'function') {
        confetti({
          particleCount: 100,
          spread: 70,
          origin: { y: 0.6 },
          colors: ['#A855F7', '#7C3AED', '#EC4899', '#10B981']
        });
      }
    }

    function completeTikTokShopifyStep() {
      showTikTokTestStatus('success');
      showTikTokSection('tiktok-whatsnext-section');
    }

    function copyBusinessId() {
      var code = document.getElementById('popsixle-business-id');
      if (code) {
        navigator.clipboard.writeText(code.textContent).then(function() {
          var btn = document.querySelector('.tiktok-copy-btn');
          if (btn) {
            var original = btn.innerHTML;
            btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg> Copied!';
            setTimeout(function() { btn.innerHTML = original; }, 2000);
          }
        });
      }
    }

    function validateAndContinueTikTok() {
      var valid = true;

      // Validate Pixel ID
      var pixelId = document.getElementById('tiktok-pixel-id');
      var pixelError = document.getElementById('tiktok-pixel-id-error');
      if (!pixelId.value.trim()) {
        pixelError.style.display = 'block';
        valid = false;
      } else {
        pixelError.style.display = 'none';
      }

      // Validate Access Token
      var token = document.getElementById('tiktok-access-token');
      var tokenError = document.getElementById('tiktok-access-token-error');
      if (!token.value.trim()) {
        tokenError.style.display = 'block';
        valid = false;
      } else {
        tokenError.style.display = 'none';
      }

      // Validate Test Code
      var testCode = document.getElementById('tiktok-test-code');
      var testCodeError = document.getElementById('tiktok-test-code-error');
      if (!testCode.value.trim()) {
        testCodeError.style.display = 'block';
        valid = false;
      } else {
        testCodeError.style.display = 'none';
      }

      if (valid) {
        showTikTokSection('tiktok-test-section');
      }
    }

    function sendTikTokTestEvent() {
      var btn = document.getElementById('tiktok-send-test-btn');
      btn.disabled = true;
      btn.textContent = 'Sending...';
      showTikTokTestStatus('testing');

      // Simulate API call
      setTimeout(function() {
        btn.textContent = 'Confirm & Send Test Event';
        btn.disabled = false;

        // Show success
        document.getElementById('tiktok-test-card').style.display = 'none';
        document.getElementById('tiktok-test-success').style.display = 'block';
        document.getElementById('tiktok-test-error').style.display = 'none';
        showTikTokTestStatus('success');

        // Enable continue button
        var continueBtn = document.getElementById('tiktok-test-continue-btn');
        if (continueBtn) continueBtn.disabled = false;
      }, 1500);
    }

    function retryTikTokTest() {
      document.getElementById('tiktok-test-card').style.display = 'block';
      document.getElementById('tiktok-test-error').style.display = 'none';
      document.getElementById('tiktok-test-success').style.display = 'none';
      showTikTokTestStatus('pending');

      var btn = document.getElementById('tiktok-send-test-btn');
      if (btn) {
        btn.disabled = false;
        btn.textContent = 'Confirm & Send Test Event';
      }
    }

    // TikTok Demo control functions
    function resetTikTokForm() {
      showTikTokSection('tiktok-partner-section');
      showTikTokTestStatus('pending');

      // Clear all inputs
      var inputs = ['tiktok-pixel-id', 'tiktok-access-token', 'tiktok-test-code'];
      inputs.forEach(function(id) {
        var el = document.getElementById(id);
        if (el) el.value = '';
      });

      // Hide all errors
      var errors = ['tiktok-pixel-id-error', 'tiktok-access-token-error', 'tiktok-test-code-error'];
      errors.forEach(function(id) {
        var el = document.getElementById(id);
        if (el) el.style.display = 'none';
      });

      // Reset test section
      var testCard = document.getElementById('tiktok-test-card');
      var testSuccess = document.getElementById('tiktok-test-success');
      var testError = document.getElementById('tiktok-test-error');
      if (testCard) testCard.style.display = 'block';
      if (testSuccess) testSuccess.style.display = 'none';
      if (testError) testError.style.display = 'none';

      // Reset step indicators
      for (var i = 1; i <= 5; i++) {
        var stepEl = document.getElementById('tiktok-step-' + i);
        if (stepEl) {
          stepEl.classList.remove('active', 'completed');
          if (i === 1) stepEl.classList.add('active');
          var numEl = stepEl.querySelector('.wizard-step-number');
          if (numEl) numEl.textContent = i;
        }
      }
    }

    function simulateTikTokCredentials() {
      showTikTokSection('tiktok-credentials-section');
      document.getElementById('tiktok-pixel-id').value = 'CXXXXXXXXXXXXXXXXXX';
      document.getElementById('tiktok-access-token').value = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...';
      document.getElementById('tiktok-test-code').value = 'TEST12345';
    }

    function simulateTikTokTestSuccess() {
      showTikTokSection('tiktok-test-section');
      document.getElementById('tiktok-test-card').style.display = 'none';
      document.getElementById('tiktok-test-success').style.display = 'block';
      document.getElementById('tiktok-test-error').style.display = 'none';
      showTikTokTestStatus('success');

      var continueBtn = document.getElementById('tiktok-test-continue-btn');
      if (continueBtn) continueBtn.disabled = false;
    }

    function simulateTikTokTestError() {
      showTikTokSection('tiktok-test-section');
      document.getElementById('tiktok-test-card').style.display = 'none';
      document.getElementById('tiktok-test-success').style.display = 'none';
      document.getElementById('tiktok-test-error').style.display = 'block';
      showTikTokTestStatus('failed');
    }

    function replayTikTokConfetti() {
      if (typeof confetti === 'function') {
        confetti({
          particleCount: 100,
          spread: 70,
          origin: { y: 0.6 },
          colors: ['#A855F7', '#7C3AED', '#EC4899', '#10B981']
        });
      }
    }

    // Simulate pixel check (for prototype)
    let pixelCheckAttempts = 0;

    function simulatePixelCheck() {
      // Simulate API check delay
      pixelCheckAttempts++;
      // After 2 attempts, show as enabled (simulates user actually enabling it)
      if (pixelCheckAttempts >= 2) {
        showPixelStatus('enabled');
      } else {
        showPixelStatus('not-detected-checked');
      }
    }

    // Open Theme Editor button (simulates opening Shopify)
    const openThemeEditorBtn = document.getElementById('open-theme-editor-btn');
    if (openThemeEditorBtn) {
      openThemeEditorBtn.addEventListener('click', function() {
        // In real implementation, this would open Shopify theme editor
        // For prototype, simulate the check after "returning"
        alert('In production, this opens your Shopify Theme Editor.\n\nFor this prototype, click OK to simulate returning after enabling the pixel.');
        simulatePixelCheck();
      });
    }

    // Show me how link
    const showHowLink = document.getElementById('show-how-link');
    if (showHowLink) {
      showHowLink.addEventListener('click', function() {
        alert('Show me how modal would appear here with step-by-step screenshots.\n\n1. Click "Open Theme Editor"\n2. Find "App embeds" in left sidebar\n3. Toggle "Popsixle" to ON\n4. Click Save');
      });
    }

    // Step 2 Continue button
    if (step2Continue) {
      step2Continue.addEventListener('click', function() {
        if (wizardState.pixelEnabled) {
          goToStep(3);
        }
      });
    }

    // Back button for Step 2
    const backBtn2 = document.getElementById('back-btn-2');
    if (backBtn2) {
      backBtn2.addEventListener('click', function() {
        goToStep(1);
      });
    }

    // ============================================
    // STEP 3: Special Cases
    // ============================================

    // Toggle handlers for special cases
    const specialCaseToggles = [
      { toggle: 'toggle-landing', item: 'special-case-landing', key: 'landingPage' },
      { toggle: 'toggle-headless', item: 'special-case-headless', key: 'headless' },
      { toggle: 'toggle-cart', item: 'special-case-cart', key: 'customCart' }
    ];

    specialCaseToggles.forEach(({ toggle, item, key }) => {
      const toggleInput = document.getElementById(toggle);
      const itemElement = document.getElementById(item);

      if (toggleInput && itemElement) {
        toggleInput.addEventListener('change', function() {
          if (this.checked) {
            itemElement.classList.add('selected');
            wizardState.specialCases[key] = true;
          } else {
            itemElement.classList.remove('selected');
            wizardState.specialCases[key] = false;
          }

          // Special handling for landing page URL input
          if (key === 'landingPage') {
            const urlInput = document.getElementById('landing-url-input');
            if (urlInput) {
              urlInput.style.display = this.checked ? 'block' : 'none';
            }
          }
        });
      }
    });

    // Landing page URL input handler
    const landingUrlInput = document.getElementById('landing-url');
    if (landingUrlInput) {
      landingUrlInput.addEventListener('input', function() {
        wizardState.specialCases.landingPageUrl = this.value;
      });
    }

    // Step 3 Continue button
    const step3Continue = document.getElementById('step3-continue');
    if (step3Continue) {
      step3Continue.addEventListener('click', function() {
        goToStep(4);
      });
    }

    // Back button for Step 3
    const backBtn3 = document.getElementById('back-btn-3');
    if (backBtn3) {
      backBtn3.addEventListener('click', function() {
        goToStep(2);
      });
    }

    // ============================================
    // STEP 4: Review Configuration
    // ============================================

    // Product type display names
    const productTypeNames = {
      'regular': 'Regular Products',
      'health': 'Health & Wellness',
      'cbd': 'CBD / Hemp Products',
      'restricted': 'Other Restricted Category'
    };

    // Update review page when entering Step 4
    function updateReviewPage() {
      // Product Type
      const productTypeEl = document.getElementById('review-product-type');
      if (productTypeEl && wizardState.productType) {
        productTypeEl.textContent = productTypeNames[wizardState.productType] || 'Not selected';
      }

      // Pixel Status
      const pixelStatusEl = document.getElementById('review-pixel-status');
      if (pixelStatusEl) {
        pixelStatusEl.textContent = wizardState.pixelEnabled ? 'Enabled' : 'Not enabled';
      }

      // Special Cases
      const specialCasesEl = document.getElementById('review-special-cases');
      const specialIconEl = document.getElementById('review-special-icon');
      if (specialCasesEl) {
        const cases = [];
        if (wizardState.specialCases.landingPage) cases.push('Landing Pages');
        if (wizardState.specialCases.headless) cases.push('Headless');
        if (wizardState.specialCases.customCart) cases.push('Custom Cart');

        if (cases.length > 0) {
          specialCasesEl.textContent = cases.join(', ');
          if (specialIconEl) specialIconEl.classList.add('success');
        } else {
          specialCasesEl.textContent = 'None selected';
          if (specialIconEl) specialIconEl.classList.remove('success');
        }
      }
    }

    // Hook into goToStep to update review when entering Step 4
    const originalGoToStep = goToStep;
    goToStep = function(step) {
      if (step === 4) {
        updateReviewPage();
      }
      originalGoToStep(step);
    };

    // Edit links
    document.querySelectorAll('.review-item-edit').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const step = parseInt(this.dataset.editStep);
        if (step) {
          goToStep(step);
        }
      });
    });

    // Step 4 Continue button
    const step4Continue = document.getElementById('step4-continue');
    if (step4Continue) {
      step4Continue.addEventListener('click', function() {
        goToStep(5);
      });
    }

    // Back button for Step 4
    const backBtn4 = document.getElementById('back-btn-4');
    if (backBtn4) {
      backBtn4.addEventListener('click', function() {
        goToStep(3);
      });
    }

    // ============================================
    // STEP 5: Channel Connect
    // ============================================

    const goToDashboardBtn = document.getElementById('go-to-dashboard');

    // Update dashboard button state
    function updateDashboardButton() {
      const hasConnection = wizardState.channels.meta || wizardState.channels.google || wizardState.channels.tiktok;
      const btnWrapper = document.getElementById('dashboard-btn-wrapper');
      if (goToDashboardBtn) {
        goToDashboardBtn.disabled = !hasConnection;
      }
      if (btnWrapper) {
        if (hasConnection) {
          btnWrapper.classList.add('connected');
        } else {
          btnWrapper.classList.remove('connected');
        }
      }
    }

    // Navigate to channel connection form
    function goToChannelStep(channel) {
      currentChannelStep = `5-${channel}`;

      // Hide all step panels
      document.querySelectorAll('.step-panel').forEach(panel => {
        panel.classList.remove('active');
      });

      // Show the channel-specific panel
      const channelPanel = document.querySelector(`.step-panel[data-step="5-${channel}"]`);
      if (channelPanel) {
        channelPanel.classList.add('active');
      }

      // Update explanation panel
      document.querySelectorAll('.explanation-content').forEach(content => {
        content.classList.remove('active');
      });
      const channelExplanation = document.querySelector(`.explanation-content[data-explanation="5-${channel}"]`);
      if (channelExplanation) {
        channelExplanation.classList.add('active');
      }

      // Update inner sidebar: hide setup steps, show connection steps
      const setupStepsList = document.querySelector('.setup-steps-list');
      const metaConnectionSteps = document.getElementById('connection-steps-list');
      const googleConnectionSteps = document.getElementById('google-connection-steps-list');
      const tiktokConnectionSteps = document.getElementById('tiktok-connection-steps-list');
      const setupStepsHeader = document.querySelector('.setup-steps-header');

      if (setupStepsList) setupStepsList.style.display = 'none';
      // Show the correct connection steps list
      if (metaConnectionSteps) metaConnectionSteps.style.display = (channel === 'meta') ? 'block' : 'none';
      if (googleConnectionSteps) googleConnectionSteps.style.display = (channel === 'google') ? 'block' : 'none';
      if (tiktokConnectionSteps) tiktokConnectionSteps.style.display = (channel === 'tiktok') ? 'block' : 'none';

      // Update header text based on channel
      if (setupStepsHeader) {
        const channelNames = { meta: 'Meta', google: 'Google Ads', tiktok: 'TikTok' };
        setupStepsHeader.querySelector('.setup-steps-title').textContent = `Connect to ${channelNames[channel] || channel}`;
        setupStepsHeader.querySelector('.setup-steps-progress').style.display = 'none';
      }

      // Update assistance card video text
      var assistanceVideoText = document.getElementById('assistance-video-text');
      if (assistanceVideoText) {
        var videoLabels = { meta: 'Meta Setup Overview', google: 'Google Ads Setup Overview', tiktok: 'TikTok Setup Overview' };
        assistanceVideoText.textContent = videoLabels[channel] || 'Setup Overview';
      }

      // Reset connection steps state (step 1 active, steps 2-4 pending)
      const step1 = document.getElementById('connection-step-1');
      const step2 = document.getElementById('connection-step-2');
      const step3 = document.getElementById('connection-step-3');
      const step4 = document.getElementById('connection-step-4');
      if (step1) { step1.classList.add('active'); step1.classList.remove('completed'); }
      if (step2) { step2.classList.remove('active', 'completed'); }
      if (step3) { step3.classList.remove('active', 'completed'); }
      if (step4) { step4.classList.remove('active', 'completed'); }

      // Reset Meta-specific state when entering Meta form
      if (channel === 'meta') {
        resetMetaForm();
      }

      // Reset Google-specific state when entering Google form
      if (channel === 'google') {
        resetGoogleForm();
        // Reset Google connection steps
        var gs1 = document.getElementById('google-step-1');
        var gs2 = document.getElementById('google-step-2');
        var gs3 = document.getElementById('google-step-3');
        if (gs1) { gs1.classList.add('active'); gs1.classList.remove('completed'); }
        if (gs2) { gs2.classList.remove('active', 'completed'); }
        if (gs3) { gs3.classList.remove('active', 'completed'); }
      }

      // Reset TikTok-specific state when entering TikTok form
      if (channel === 'tiktok') {
        resetTikTokForm();
        showTikTokSection('tiktok-partner-section');
        // Reset TikTok connection steps
        var ts1 = document.getElementById('tiktok-step-1');
        var ts2 = document.getElementById('tiktok-step-2');
        var ts3 = document.getElementById('tiktok-step-3');
        var ts4 = document.getElementById('tiktok-step-4');
        var ts5 = document.getElementById('tiktok-step-5');
        if (ts1) { ts1.classList.add('active'); ts1.classList.remove('completed'); }
        if (ts2) { ts2.classList.remove('active', 'completed'); }
        if (ts3) { ts3.classList.remove('active', 'completed'); }
        if (ts4) { ts4.classList.remove('active', 'completed'); }
        if (ts5) { ts5.classList.remove('active', 'completed'); }
      }
    }

    // Navigate to a channel step (alias for onclick handlers)
    function navigateToStep(stepId) {
      if (stepId.startsWith('5-')) {
        const channel = stepId.substring(2);
        goToChannelStep(channel);
      } else {
        goToStep(parseInt(stepId));
      }
    }

    // Return to channel selection from channel form
    function returnToChannelSelection() {
      currentChannelStep = null;

      // Show step 5 panel
      document.querySelectorAll('.step-panel').forEach(panel => {
        panel.classList.remove('active');
      });
      const step5Panel = document.querySelector('.step-panel[data-step="5"]');
      if (step5Panel) {
        step5Panel.classList.add('active');
      }

      // Show step 5 explanation
      document.querySelectorAll('.explanation-content').forEach(content => {
        content.classList.remove('active');
      });
      const step5Explanation = document.querySelector('.explanation-content[data-explanation="5"]');
      if (step5Explanation) {
        step5Explanation.classList.add('active');
      }

      // Restore inner sidebar: show setup steps, hide connection steps
      const setupStepsList = document.querySelector('.setup-steps-list');
      const metaConnectionSteps = document.getElementById('connection-steps-list');
      const googleConnectionSteps = document.getElementById('google-connection-steps-list');
      const setupStepsHeader = document.querySelector('.setup-steps-header');

      if (setupStepsList) setupStepsList.style.display = 'block';
      if (metaConnectionSteps) metaConnectionSteps.style.display = 'none';
      if (googleConnectionSteps) googleConnectionSteps.style.display = 'none';

      // Restore header text
      if (setupStepsHeader) {
        setupStepsHeader.querySelector('.setup-steps-title').textContent = 'Setup Steps';
        setupStepsHeader.querySelector('.setup-steps-progress').style.display = '';
      }

      // Restore assistance card video text
      var assistanceVideoText = document.getElementById('assistance-video-text');
      if (assistanceVideoText) {
        assistanceVideoText.textContent = 'Meta Setup Overview';
      }

      // Update flow lines
      setTimeout(updateFlowLines, 50);
    }

    // Connect channel function - navigates to connection form
    function connectChannel(channel) {
      goToChannelStep(channel);
    }

    // Meta celebration modal
    function showMetaCelebration() {
      var modal = document.getElementById('meta-celebration-modal');
      if (modal) modal.classList.add('active');
    }

    function closeMetaCelebration() {
      var modal = document.getElementById('meta-celebration-modal');
      if (modal) modal.classList.remove('active');
      returnToChannelSelection();
    }

    function closeMetaCelebrationToDashboard() {
      var modal = document.getElementById('meta-celebration-modal');
      if (modal) modal.classList.remove('active');
      window.location.href = 'dashboard.html';
    }

    // Complete channel connection (called after successful test)
    function completeChannelConnection(channel) {
      var row = document.querySelector('.flow-destination-wrapper[data-channel="' + channel + '"]');
      var status = document.getElementById('dest-' + channel + '-status');
      var btn = document.getElementById('connect-' + channel);
      var line = document.getElementById('line-' + channel);

      // Update state
      wizardState.channels[channel] = true;

      // Update visual - row and line
      if (row) row.classList.add('connected');
      if (status) {
        status.innerHTML = '<span class="status-dot"></span>Connected';
        status.classList.add('connected');
      }
      if (line) {
        line.classList.add('connected');
      }
      // Also animate trunk line when first channel connects
      const trunk = document.querySelector('.dashed-line.purple.trunk');
      if (trunk) {
        trunk.classList.add('connected');
      }
      // Hide the button after connecting
      if (btn) btn.style.display = 'none';

      // Update dashboard button
      updateDashboardButton();

      // Show celebration modal for Meta, otherwise return to channel selection
      if (channel === 'meta') {
        showMetaCelebration();
      } else {
        returnToChannelSelection();
      }
    }

    // Function to dynamically position SVG lines based on card positions
    function updateFlowLines() {
      const branchSvg = document.querySelector('.branch-lines');
      const flowDestinations = document.querySelector('.flow-destinations');
      const metaWrapper = document.querySelector('[data-channel="meta"]');
      const googleWrapper = document.querySelector('[data-channel="google"]');
      const tiktokWrapper = document.querySelector('[data-channel="tiktok"]');

      if (!branchSvg || !flowDestinations || !metaWrapper || !googleWrapper || !tiktokWrapper) return;

      // Get the bounding rect of the destinations container
      const destRect = flowDestinations.getBoundingClientRect();

      // Get the center Y position of each card relative to the destinations container
      const metaRect = metaWrapper.querySelector('.flow-destination-card').getBoundingClientRect();
      const googleRect = googleWrapper.querySelector('.flow-destination-card').getBoundingClientRect();
      const tiktokRect = tiktokWrapper.querySelector('.flow-destination-card').getBoundingClientRect();

      // Calculate Y positions relative to the destinations container top
      const metaY = (metaRect.top + metaRect.height / 2) - destRect.top;
      const googleY = (googleRect.top + googleRect.height / 2) - destRect.top;
      const tiktokY = (tiktokRect.top + tiktokRect.height / 2) - destRect.top;

      // Calculate total height needed
      const totalHeight = destRect.height;
      const centerY = totalHeight / 2;

      // Update SVG viewBox and height
      branchSvg.setAttribute('height', totalHeight);
      branchSvg.setAttribute('viewBox', `0 0 80 ${totalHeight}`);

      // Update the trunk line (horizontal from Popsixle to branch point)
      const trunkLine = branchSvg.querySelector('.trunk');
      if (trunkLine) {
        trunkLine.setAttribute('d', `M 0,${centerY} L 30,${centerY}`);
      }

      // Update individual branch lines
      const lineMeta = document.getElementById('line-meta');
      const lineGoogle = document.getElementById('line-google');
      const lineTiktok = document.getElementById('line-tiktok');

      if (lineMeta) {
        lineMeta.setAttribute('d', `M 30,${centerY} L 30,${metaY} L 80,${metaY}`);
      }
      if (lineGoogle) {
        lineGoogle.setAttribute('d', `M 30,${centerY} L 80,${googleY}`);
      }
      if (lineTiktok) {
        lineTiktok.setAttribute('d', `M 30,${centerY} L 30,${tiktokY} L 80,${tiktokY}`);
      }
    }

    // Run on window resize
    window.addEventListener('resize', updateFlowLines);

    // Initial call after a brief delay to ensure layout is complete
    setTimeout(updateFlowLines, 100);

    // Connect button handlers
    const connectMeta = document.getElementById('connect-meta');
    if (connectMeta) {
      connectMeta.addEventListener('click', () => connectChannel('meta'));
    }

    const connectGoogle = document.getElementById('connect-google');
    if (connectGoogle) {
      connectGoogle.addEventListener('click', () => connectChannel('google'));
    }

    const connectTiktok = document.getElementById('connect-tiktok');
    if (connectTiktok) {
      connectTiktok.addEventListener('click', () => connectChannel('tiktok'));
    }

    // ============================================
    // META CONNECTION FORM HANDLERS
    // ============================================

    // Meta back button
    const metaBackBtn = document.getElementById('meta-back-btn');
    if (metaBackBtn) {
      metaBackBtn.addEventListener('click', returnToChannelSelection);
    }

    // Google back button
    var googleBackBtn = document.getElementById('google-back-btn');
    if (googleBackBtn) {
      googleBackBtn.addEventListener('click', returnToChannelSelection);
    }



    // Meta Ad Account buttons (manual version)
    const metaSkipAdAccount = document.getElementById('meta-skip-ad-account');
    if (metaSkipAdAccount) {
      metaSkipAdAccount.addEventListener('click', function() {
        // Mark step 4 as skipped/complete and finish
        const step4 = document.getElementById('connection-step-4');
        if (step4) {
          step4.classList.remove('active');
          step4.classList.add('completed');
        }
        completeChannelConnection('meta');
      });
    }

    const metaConfirmAdAccount = document.getElementById('meta-confirm-ad-account');
    if (metaConfirmAdAccount) {
      metaConfirmAdAccount.addEventListener('click', function() {
        const adAccountId = document.getElementById('meta-ad-account-id').value.trim();
        if (!adAccountId) {
          document.getElementById('meta-ad-account-id').classList.add('error');
          return;
        }
        document.getElementById('meta-ad-account-id').classList.remove('error');

        // Mark step 4 as complete and finish
        const step4 = document.getElementById('connection-step-4');
        if (step4) {
          step4.classList.remove('active');
          step4.classList.add('completed');
        }
        completeChannelConnection('meta');
      });
    }

    // Meta Ad Account buttons (OAuth version)
    const metaSkipAdAccountOAuth = document.getElementById('meta-skip-ad-account-oauth');
    if (metaSkipAdAccountOAuth) {
      metaSkipAdAccountOAuth.addEventListener('click', function() {
        const step4 = document.getElementById('connection-step-4');
        if (step4) {
          step4.classList.remove('active');
          step4.classList.add('completed');
        }
        completeChannelConnection('meta');
      });
    }

    const metaAdAccountOAuth = document.getElementById('meta-ad-account-oauth');
    if (metaAdAccountOAuth) {
      metaAdAccountOAuth.addEventListener('click', function() {
        // Simulate OAuth flow
        this.disabled = true;
        this.innerHTML = '<svg class="animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Connecting...';

        setTimeout(() => {
          const step4 = document.getElementById('connection-step-4');
          if (step4) {
            step4.classList.remove('active');
            step4.classList.add('completed');
          }
          completeChannelConnection('meta');
        }, 2000);
      });
    }

    // Ad Account version toggle (for team review)
    document.querySelectorAll('.demo-version-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const version = this.dataset.version;
        document.querySelectorAll('.demo-version-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');

        document.getElementById('ad-account-manual').style.display = version === 'manual' ? 'block' : 'none';
        document.getElementById('ad-account-oauth').style.display = version === 'oauth' ? 'block' : 'none';
      });
    });

    // Go to Dashboard button
    if (goToDashboardBtn) {
      goToDashboardBtn.addEventListener('click', function() {
        if (!this.disabled) {
          // Navigate to dashboard
          window.location.href = 'dashboard.html';
        }
      });
    }

    // Back button for Step 5
    const backBtn5 = document.getElementById('back-btn-5');
    if (backBtn5) {
      backBtn5.addEventListener('click', function() {
        goToStep(4);
      });
    }

    // Skip to Dashboard Popup Functionality
    const skipTrigger = document.getElementById('skip-dashboard-trigger');
    const skipOverlay = document.getElementById('skip-popup-overlay');
    const skipClose = document.getElementById('skip-popup-close');
    const skipCancel = document.getElementById('skip-popup-cancel');

    if (skipTrigger && skipOverlay) {
      skipTrigger.addEventListener('click', (e) => {
        e.preventDefault();
        skipOverlay.classList.add('active');
      });

      skipClose.addEventListener('click', () => {
        skipOverlay.classList.remove('active');
      });

      skipCancel.addEventListener('click', () => {
        skipOverlay.classList.remove('active');
      });

      // Close on overlay click (outside popup)
      skipOverlay.addEventListener('click', (e) => {
        if (e.target === skipOverlay) {
          skipOverlay.classList.remove('active');
        }
      });
    }

    // Unrestricted Modal
    const unrestrictedOverlay = document.getElementById('unrestricted-modal-overlay');
    const unrestrictedClose = document.getElementById('unrestricted-modal-close');
    const unrestrictedContinue = document.getElementById('unrestricted-continue-core');

    if (unrestrictedOverlay) {
      unrestrictedClose.addEventListener('click', () => {
        unrestrictedOverlay.classList.remove('active');
      });

      unrestrictedContinue.addEventListener('click', () => {
        unrestrictedOverlay.classList.remove('active');
      });

      unrestrictedOverlay.addEventListener('click', (e) => {
        if (e.target === unrestrictedOverlay) {
          unrestrictedOverlay.classList.remove('active');
        }
      });
    }
  </script>
  <script src="js/main.js"></script>

  <!-- Unified Debug Panel -->
  <div id="debug-panel" class="debug-panel">
    <div class="debug-panel-header">Onboarding</div>
    <button type="button" class="debug-btn" onclick="debugGoToStep(0)">0. Overview</button>
    <button type="button" class="debug-btn" onclick="debugGoToStep(1)">1. Product Type</button>
    <button type="button" class="debug-btn" onclick="debugGoToStep(2)">2. Enable Pixel</button>
    <button type="button" class="debug-btn" onclick="debugGoToStep(3)">3. Special Cases</button>
    <button type="button" class="debug-btn" onclick="debugGoToStep(4)">4. Review</button>
    <button type="button" class="debug-btn" onclick="debugGoToStep(5)">5. Channels</button>

    <div class="debug-panel-header" style="margin-top: 8px;">Meta Flow</div>
    <button type="button" class="debug-btn" onclick="debugGoToMeta(1)">M1. Credentials</button>
    <button type="button" class="debug-btn" onclick="debugGoToMeta(2)">M2. Testing</button>
    <button type="button" class="debug-btn" onclick="debugGoToMeta(3)">M3. Data Sharing</button>
    <button type="button" class="debug-btn" onclick="debugGoToMeta(4)">M4. Ad Account</button>
    <button type="button" class="debug-btn" onclick="showMetaCelebration()">M5. Celebration</button>

    <div class="debug-panel-header" style="margin-top: 8px;">Google Flow</div>
    <button type="button" class="debug-btn" onclick="debugGoToGoogle(1)">G1. Connect</button>
    <button type="button" class="debug-btn" onclick="debugGoToGoogle(2)">G2. Conversion</button>
    <button type="button" class="debug-btn" onclick="debugGoToGoogle(3)">G3. Verify</button>
    <button type="button" class="debug-btn" onclick="debugGoToGoogle(4)">G4. What's Next</button>
    <button type="button" class="debug-btn" onclick="simulateGoogleOAuthError()">G-Err. OAuth</button>
    <button type="button" class="debug-btn" onclick="simulateGoogleConversionError()">G-Err. Perms</button>

    <!-- TikTok -->
    <div class="debug-panel-header" style="margin-top: 8px;">TikTok Flow</div>
    <button type="button" class="debug-btn" onclick="navigateToStep('5-tiktok'); showTikTokSection('tiktok-partner-section');">TT-1. Partner</button>
    <button type="button" class="debug-btn" onclick="navigateToStep('5-tiktok'); showTikTokSection('tiktok-credentials-section');">TT-2. Creds</button>
    <button type="button" class="debug-btn" onclick="navigateToStep('5-tiktok'); showTikTokSection('tiktok-test-section');">TT-3. Test</button>
    <button type="button" class="debug-btn" onclick="navigateToStep('5-tiktok'); showTikTokSection('tiktok-shopify-section');">TT-4. Shopify</button>
    <button type="button" class="debug-btn" onclick="navigateToStep('5-tiktok'); showTikTokSection('tiktok-whatsnext-section');">TT-5. Done</button>
    <button type="button" class="debug-btn" onclick="navigateToStep('5-tiktok'); simulateTikTokTestError();">TT-Err. Test</button>
  </div>

  <script>
    // Debug: Go to onboarding step
    function debugGoToStep(step) {
      // Make sure wizard is visible (skip pricing screen)
      var pricingScreen = document.getElementById('pricing-screen');
      var wizardScreen = document.getElementById('wizard-screen');
      if (pricingScreen) pricingScreen.style.display = 'none';
      if (wizardScreen) wizardScreen.classList.add('active');

      // Now go to step
      goToStep(step);
    }

    // Debug: Go to Meta sub-step
    function debugGoToMeta(metaStep) {
      // Make sure wizard is visible
      var pricingScreen = document.getElementById('pricing-screen');
      var wizardScreen = document.getElementById('wizard-screen');
      if (pricingScreen) pricingScreen.style.display = 'none';
      if (wizardScreen) wizardScreen.classList.add('active');

      // First go to step 5 and open Meta
      goToStep(5);

      setTimeout(function() {
        goToChannelStep('meta');

        setTimeout(function() {
          // Pre-fill credentials
          var pixelInput = document.getElementById('meta-pixel-id');
          var capiInput = document.getElementById('meta-capi-token');
          var testInput = document.getElementById('meta-test-code');
          if (pixelInput) pixelInput.value = '123456789';
          if (capiInput) capiInput.value = 'EAAtest123';
          if (testInput) testInput.value = 'TEST12345';

          var credentialsSection = document.getElementById('meta-credentials-section');
          var dataSharingSection = document.getElementById('meta-data-sharing-section');
          var adAccountSection = document.getElementById('meta-ad-account-section');
          var metaFooter = document.getElementById('meta-wizard-footer');

          switch(metaStep) {
            case 1:
              if (credentialsSection) credentialsSection.style.display = 'block';
              if (dataSharingSection) dataSharingSection.style.display = 'none';
              if (adAccountSection) adAccountSection.style.display = 'none';
              if (metaFooter) metaFooter.style.display = 'flex';
              updateMetaConnectionStep(1);
              showMetaTestStatus('pending');
              break;
            case 2:
              if (credentialsSection) credentialsSection.style.display = 'block';
              if (dataSharingSection) dataSharingSection.style.display = 'none';
              if (adAccountSection) adAccountSection.style.display = 'none';
              if (metaFooter) metaFooter.style.display = 'flex';
              updateMetaConnectionStep(2);
              showMetaTestStatus('testing');
              break;
            case 3:
              showMetaDataSharingStep();
              break;
            case 4:
              showMetaAdAccountStep();
              break;
          }
        }, 100);
      }, 50);
    }

    function debugGoToGoogle(googleStep) {
      var pricingScreen = document.getElementById('pricing-screen');
      var wizardScreen = document.getElementById('wizard-screen');
      if (pricingScreen) pricingScreen.style.display = 'none';
      if (wizardScreen) wizardScreen.classList.add('active');

      goToStep(5);

      setTimeout(function() {
        goToChannelStep('google');

        setTimeout(function() {
          var accountInput = document.getElementById('google-account-id');
          if (accountInput) accountInput.value = '123-456-7890';

          if (googleStep >= 2) {
            showGoogleTestStatus('success');
            showGoogleSection('google-conversion-section');
          }
          if (googleStep >= 3) {
            updateGoogleConnectionStep(2);
            showGoogleSection('google-verify-section');
            updateExplanationPanel('5-google-verify');
          }
          if (googleStep >= 4) {
            updateGoogleConnectionStep(3);
            showGoogleSection('google-whatsnext-section');
            updateExplanationPanel('5-google-whatsnext');
          }
        }, 100);
      }, 100);
    }
  </script>

  <!-- Live Chat Button -->
  <button class="live-chat-button" title="Chat with us">
    <span class="live-chat-icon"></span>
  </button>
</body>
</html>
